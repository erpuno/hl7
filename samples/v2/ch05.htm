<HTML><HEAD>
<TITLE>HL7 V2.4 Chapter 5</TITLE></HEAD>
<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">
<H1>
HL7 V2.4 Contents
</H1>
<A HREF="hl7.htm">Contents</A><br>
<A HREF="ch01.htm">1 . Introduction</A><br>
<A HREF="ch02.htm">2 .Control </A><br>
<A HREF="ch03.htm">3 .Patient Administration</A><br>
<A HREF="ch04.htm">4 .Order Entry</A><br>
<A HREF="ch05.htm">5 .Query</A><br>
<A HREF="ch06.htm">6. Financial Management</A><br>
<A HREF="ch07.htm">7 .Observation Reporting</A><br>
<A HREF="ch08.htm">8 .Master Files</A><br>
<A HREF="ch09.htm">9 .Medical Records/Information Management (Document Management)</A><br>
<A HREF="ch10.htm">10 .Scheduling</A><br>
<A HREF="ch11.htm">11 .Patient Referral</A><br>
<A HREF="ch12.htm">12 .Patient Care</A><br>
<A HREF="ch13.htm">13 .Clinical Laboratory Automation</A><br>
<A HREF="ch14.htm">14 .Application Management</A><br>
<A HREF="ch15.htm">15 .Personnel Management</A><br>
<A HREF="AppendixA.htm">A .Data Definition Tables</A><br>
<A HREF="AppendixB.htm">B. Lower Layer Protocols</A><br>
<A HREF="AppendixC.htm">C. Version 2.4 BNF Message Descriptions</A><br>
<A HREF="AppendixD.htm">D. Glossary</A><br>

<hr size=4>
<H1>
HL7 V2.4 Chapter 5</H1>
<UL>
<LI><A HREF="#Heading1">5 .<BR>Query</A>
<UL>
<LI><A HREF="#Heading2">5.1 CHAPTER 5 CONTENTS</A>
<LI><A HREF="#Heading3">5.2 INTRODUCTION</A>
<UL>
<LI><A HREF="#Heading4">5.2.1 Query/response model</A>
<LI><A HREF="#Heading5">5.2.2 Evolution of the query standard</A>
<LI><A HREF="#Heading6">5.2.3 Query development methodology</A>
<LI><A HREF="#Heading7">5.2.4 Response format</A>
<UL>
<LI><A HREF="#Heading8"> </A>
<LI><A HREF="#Heading9">5.2.4.1 Segment pattern response</A>
<LI><A HREF="#Heading10">5.2.4.2 Tabular response</A>
<LI><A HREF="#Heading11">5.2.4.3 Display response</A>
<LI><A HREF="#Heading12">5.2.4.4 Choosing among available response formats</A>
</UL>
<LI><A HREF="#Heading13">5.2.5 Query specification formats</A>
<UL>
<LI><A HREF="#Heading14"> </A>
<LI><A HREF="#Heading15">5.2.5.1 Expressing the same data using the variants</A>
<UL>
<LI><A HREF="#Heading16">5.2.5.1.1 Expression as simple parameters</A>
<LI><A HREF="#Heading17">5.2.5.1.2 Expression as query by example</A>
<LI><A HREF="#Heading18">5.2.5.1.3 Expression as a complex expression</A>
</UL>
</UL>
<LI><A HREF="#Heading19">5.2.6 Summary chart of query/response pairs</A>
</UL>
<LI><A HREF="#Heading20">5.3 QUERY/RESPONSE CONFORMANCE STATEMENT</A>
<UL>
<LI><A HREF="#Heading21">5.3.1 Using the Conformance Statement</A>
<UL>
<LI><A HREF="#Heading22"> </A>
<LI><A HREF="#Heading23">5.3.1.1 Query with tabular response example</A>
<LI><A HREF="#Heading24">5.3.1.2 Example of  Conformance Statement with tabular response</A>
</UL>
<LI><A HREF="#Heading25">5.3.2 Formal specification of the conformance statement</A>
<UL>
<LI><A HREF="#Heading26"> </A>
<LI><A HREF="#Heading27">5.3.2.1 Steps for developing a conformance statement</A>
<LI><A HREF="#Heading28">5.3.2.2 Conformance Statement introduction</A>
<LI><A HREF="#Heading29">5.3.2.3 Query grammar</A>
<LI><A HREF="#Heading30">5.3.2.4 Response grammar</A>
<LI><A HREF="#Heading31">5.3.2.5 Response grammar for display response</A>
<LI><A HREF="#Heading32">5.3.2.6 QPD input parameter specification</A>
<LI><A HREF="#Heading33">5.3.2.7 QPD input parameter field description and commentary</A>
<LI><A HREF="#Heading34">5.3.2.8 QBE input parameter specification</A>
<LI><A HREF="#Heading35">5.3.2.9 QBE input parameter field description and commentary</A>
<LI><A HREF="#Heading36">5.3.2.10 RCP input parameter field description and commentary</A>
<LI><A HREF="#Heading37">5.3.2.11 Input specification:  virtual table</A>
<LI><A HREF="#Heading38">5.3.2.12 Virtual table field description and commentary</A>
<LI><A HREF="#Heading39">5.3.2.13 Output specification for tabular response</A>
</UL>
<LI><A HREF="#Heading40">5.3.3 Conformance statement templates</A>
<UL>
<LI><A HREF="#Heading41"> </A>
<LI><A HREF="#Heading42">5.3.3.1 Conformance statement template for query with tabular response</A>
<LI><A HREF="#Heading43">5.3.3.2 Conformance statement template for query with segment pattern response</A>
<LI><A HREF="#Heading44">5.3.3.3 Conformance statement for query with display response</A>
<LI><A HREF="#Heading45">5.3.3.4 Conformance statement table summaries</A>
</UL>
</UL>
<LI><A HREF="#Heading46">5.4 QUERY/RESPONSE MESSAGE PAIRS</A>
<UL>
<LI><A HREF="#Heading47">5.4.1 QBP/RSP - query by parameter/segment pattern response (events vary )</A>
<LI><A HREF="#Heading48">5.4.2 QBP/RTB - query by parameter/tabular response (events vary)</A>
<LI><A HREF="#Heading49">5.4.3 QBP/RDY - query by parameter/display response (events vary)</A>
<LI><A HREF="#Heading50">5.4.4 QSB - Create subscription (event Q16)</A>
<LI><A HREF="#Heading51">5.4.5 QVR -  query for previous events (event Q17)</A>
<LI><A HREF="#Heading52">5.4.6 QCN/ACK - cancel query/acknowledge message (event J01)</A>
<LI><A HREF="#Heading53">5.4.7 QSX /ACK - cancel subscription/acknowledge message (event J02)</A>
</UL>
<LI><A HREF="#Heading54">5.5 QUERY/RESPONSE MESSAGE SEGMENTS</A>
<UL>
<LI><A HREF="#Heading55">5.5.1 DSP - display data segment</A>
<UL>
<LI><A HREF="#Heading56">5.5.1.0 DSP field definitions</A>
<LI><A HREF="#Heading57">5.5.1.1 DSP-1   Set ID - DSP   (SI)   00061 </A>
<LI><A HREF="#Heading58">5.5.1.2 DSP-2   Display level   (SI)   00062 </A>
<LI><A HREF="#Heading59">5.5.1.3 DSP-3   Data line   (TX)   00063 </A>
<LI><A HREF="#Heading60">5.5.1.4 DSP-4   Logical break point   (ST)   00064 </A>
<LI><A HREF="#Heading61">5.5.1.5 DSP-5   Result ID   (TX)   00065 </A>
</UL>
<LI><A HREF="#Heading62">5.5.2 QAK- query acknowledgment segment</A>
<UL>
<LI><A HREF="#Heading63">5.5.2.0 QAK field definitions</A>
<LI><A HREF="#Heading64">5.5.2.1 QAK-1   Query tag   (ST)   00696 </A>
<LI><A HREF="#Heading65">5.5.2.2 QAK-2   Query response status   (ID)   00708 </A>
<LI><A HREF="#Heading66">5.5.2.3 QAK-3   Message query name   (CE)   01375 </A>
<LI><A HREF="#Heading67">5.5.2.4 QAK-4   Hit count total  (NM)   01434</A>
<LI><A HREF="#Heading68">5.5.2.5 QAK-5   This payload (NM)   01622</A>
<LI><A HREF="#Heading69">5.5.2.6 QAK-6   Hits remaining (NM)   01623</A>
</UL>
<LI><A HREF="#Heading70">5.5.3 QID- query identification segment</A>
<UL>
<LI><A HREF="#Heading71">5.5.3.0 QID field definitions</A>
<LI><A HREF="#Heading72">5.5.3.1 QID-1   Query tag   (ST)   00696</A>
<LI><A HREF="#Heading73">5.5.3.2 QID-2   Message query name (CE)  01375</A>
<LI><A HREF="#Heading74">5.5.3.0 QPD field definitions</A>
<LI><A HREF="#Heading75">5.5.3.1 QPD-1   Message query name   (CE)   01375 </A>
<LI><A HREF="#Heading76">5.5.3.2 QPD-2   Query tag   (ST)   00696 </A>
<LI><A HREF="#Heading77">5.5.3.3 QPD-3   User parameters   (Varies)   01435 </A>
<UL>
<LI><A HREF="#Heading78">5.5.3.3.1 Note on QPD usage for query by example variant.</A>
</UL>
</UL>
<LI><A HREF="#Heading79">5.5.4 QRI - query response instance segment </A>
<UL>
<LI><A HREF="#Heading80">5.5.4.0 QRI field definitions</A>
<LI><A HREF="#Heading81">5.5.4.1 QRI-1   Candidate confidence   (NM)   01436 </A>
<LI><A HREF="#Heading82">5.5.4.2 QRI-2   Match reason code   (IS)   01437 </A>
<LI><A HREF="#Heading83">5.5.4.3 QRI-3   Algorithm descriptor   (CE)   01438 </A>
</UL>
<LI><A HREF="#Heading84">5.5.5 RCP - response control parameter segment </A>
<UL>
<LI><A HREF="#Heading85">5.5.5.0 RCP field definitions</A>
<LI><A HREF="#Heading86">5.5.5.1 RCP-1   Query priority   (ID)   00027 </A>
<LI><A HREF="#Heading87">5.5.5.2 RCP-2   Quantity limited request   (CQ)   00031  </A>
<LI><A HREF="#Heading88">5.5.5.3 RCP-3   Response modality   (CE)   01440 </A>
<LI><A HREF="#Heading89">5.5.5.4 RCP-4   Execution and delivery time   (TS)   01441 </A>
<LI><A HREF="#Heading90">5.5.5.5 RCP-5   Modify indicator (ID)   01443 </A>
<LI><A HREF="#Heading91">5.5.5.6 RCP-6   Sort-by field (SRT)   01624 </A>
<LI><A HREF="#Heading92">5.5.5.7 RCP-7   Segment group inclusion (ID)  01594 </A>
</UL>
<LI><A HREF="#Heading93">5.5.6 RDF - table row definition segment</A>
<UL>
<LI><A HREF="#Heading94">5.5.6.0 RDF field definitions</A>
<LI><A HREF="#Heading95">5.5.6.1 RDF-1   Number of columns per row   (NM)   00701</A>
<LI><A HREF="#Heading96">5.5.6.2 RDF-2   Column description   (RCD)   00702</A>
</UL>
<LI><A HREF="#Heading97">5.5.7 RDT - table row data segment</A>
<UL>
<LI><A HREF="#Heading98">5.5.7.0 RDT field definitions</A>
<LI><A HREF="#Heading99">5.5.7.1 RDT-1   Column value   (Variable)   00703</A>
</UL>
</UL>
<LI><A HREF="#Heading100">5.6 AUXILIARY QUERY PROTOCOLS</A>
<UL>
<LI><A HREF="#Heading101">5.6.1 Immediate vs. deferred response</A>
<UL>
<LI><A HREF="#Heading102"> </A>
<LI><A HREF="#Heading103">5.6.1.1 Immediate response</A>
<LI><A HREF="#Heading104">5.6.1.2 Deferred response example</A>
</UL>
<LI><A HREF="#Heading105">5.6.2 Query cancellation</A>
<LI><A HREF="#Heading106">5.6.3 Interactive continuation of response messages</A>
<UL>
<LI><A HREF="#Heading107"> </A>
<LI><A HREF="#Heading108">5.6.3.1 Interactive continuation  algorithm and rules</A>
<LI><A HREF="#Heading109">5.6.3.2 Use case</A>
<LI><A HREF="#Heading110">5.6.3.3 Example of interactive continuation protocol</A>
<LI><A HREF="#Heading111">5.6.3.4 Message fragmentation example </A>
</UL>
<LI><A HREF="#Heading112">5.6.4 Batch message as a query response</A>
<LI><A HREF="#Heading113">5.6.5 Query error response</A>
</UL>
<LI><A HREF="#Heading114">5.7 PUBLISH AND SUBSCRIBE</A>
<UL>
<LI><A HREF="#Heading115">5.7.1 Introduction</A>
<LI><A HREF="#Heading116">5.7.2 Details</A>
<LI><A HREF="#Heading117">5.7.3 Examples</A>
<UL>
<LI><A HREF="#Heading118"> </A>
<LI><A HREF="#Heading119">5.7.3.1 Example of a publish and subscribe Conformance Statement</A>
</UL>
<LI><A HREF="#Heading120">5.7.4 Establishing a subscription</A>
<LI><A HREF="#Heading121">5.7.5 Canceling a subscription</A>
</UL>
<LI><A HREF="#Heading122">5.8 QUERY IMPLEMENTATION CONSIDERATIONS</A>
<LI><A HREF="#Heading123">5.9 QUERY/RESPONSE MESSAGE EXAMPLES</A>
<UL>
<LI><A HREF="#Heading124">5.9.1 Query by parameter (QBP) / segment pattern response (RSP) </A>
<UL>
<LI><A HREF="#Heading125"> </A>
<LI><A HREF="#Heading126">5.9.1.1 Proposed dispense history example and Conformance Statement</A>
<UL>
<LI><A HREF="#Heading127">5.9.1.1.1 Associated dispense history Conformance Statement</A>
</UL>
<LI><A HREF="#Heading128">5.9.1.2 Comprehensive pharmacy information examples and Conformance Statement</A>
<UL>
<LI><A HREF="#Heading129">5.9.1.2.1 Comprehensive pharmacy information Conformance Statement</A>
</UL>
</UL>
<LI><A HREF="#Heading130">5.9.2 Query using QSC variant / segment pattern response examples</A>
<UL>
<LI><A HREF="#Heading131"> </A>
<LI><A HREF="#Heading132">5.9.2.1 Dispense information example and Conformance Statement</A>
<UL>
<LI><A HREF="#Heading133">5.9.2.1.1 Associated dispense information Conformance Statement</A>
</UL>
<LI><A HREF="#Heading134">5.9.2.2 Dispense information query showing different instantiation</A>
<LI><A HREF="#Heading135">5.9.2.3 Lab results history example</A>
<UL>
<LI><A HREF="#Heading136">5.9.2.3.1 Lab results history Conformance Statement</A>
</UL>
<LI><A HREF="#Heading137">5.9.2.4 Lab example different instantiation</A>
</UL>
<LI><A HREF="#Heading138">5.9.3 Query by parameter (QBP) / tabular response (RTB)</A>
<UL>
<LI><A HREF="#Heading139"> </A>
<LI><A HREF="#Heading140">5.9.3.1 MPI example</A>
<UL>
<LI><A HREF="#Heading141">5.9.3.1.1 MPI Conformance Statement</A>
</UL>
<LI><A HREF="#Heading142">5.9.3.2 Pharmacy example:</A>
<UL>
<LI><A HREF="#Heading143">5.9.3.2.1 QBP/RTB dispense history Conformance Statement</A>
</UL>
</UL>
<LI><A HREF="#Heading144">5.9.4 Query using QSC variant / tabular response (RTB)</A>
<UL>
<LI><A HREF="#Heading145"> </A>
<LI><A HREF="#Heading146">5.9.4.1 Pharmacy example</A>
<UL>
<LI><A HREF="#Heading147">5.9.4.1.1 QBP/RTB dispense history Conformance Statement using QSC variant</A>
</UL>
</UL>
<LI><A HREF="#Heading148">5.9.5 Query by parameter (QBP) / display response (RDY)</A>
<UL>
<LI><A HREF="#Heading149"> </A>
<LI><A HREF="#Heading150">5.9.5.1 Dispense history display Conformance Statement</A>
</UL>
<LI><A HREF="#Heading151">5.9.6 Query using QSC variant (QBP) / display response (RDY)</A>
<UL>
<LI><A HREF="#Heading152"> </A>
<LI><A HREF="#Heading153">5.9.6.1 Dispense history display Conformance Statement using QSC variant</A>
</UL>
<LI><A HREF="#Heading154">5.9.7 Query by example (QBP) / tabular response (RTB)</A>
<UL>
<LI><A HREF="#Heading155"> </A>
<LI><A HREF="#Heading156">5.9.7.1 MPI Conformance Statement using QBE variant</A>
<LI><A HREF="#Heading157">5.9.7.2 MPI Conformance Statement - Non query by example version</A>
</UL>
</UL>
<LI><A HREF="#Heading158">5.10 SUPERCEDED QUERY/RESPONSE TRIGGER EVENTS AND MESSAGE PAIRS</A>
<UL>
<LI><A HREF="#Heading159">5.10.1 Display message</A>
<UL>
<LI><A HREF="#Heading160"> </A>
<LI><A HREF="#Heading161">5.10.1.1 Display vs. record-oriented messages</A>
<LI><A HREF="#Heading162">5.10.1.2 UDM/ACK - unsolicited display update message (event Q05)  </A>
<LI><A HREF="#Heading163">5.10.1.3 Continuation of unsolicited display update message</A>
</UL>
<LI><A HREF="#Heading164">5.10.2 Original mode queries</A>
<UL>
<LI><A HREF="#Heading165"> </A>
<LI><A HREF="#Heading166">5.10.2.1 QRY/DSR - original mode display query -  immediate response (event Q01) </A>
<UL>
<LI><A HREF="#Heading167">5.10.2.1.1 Original mode display query variants</A>
</UL>
</UL>
<LI><A HREF="#Heading168">5.10.3 Original mode deferred access</A>
<UL>
<LI><A HREF="#Heading169"> </A>
<LI><A HREF="#Heading170">5.10.3.1 QRY/QCK - deferred query (event Q02) </A>
<LI><A HREF="#Heading171">5.10.3.2 DSR/ACK - deferred response to a query (event Q03) </A>
</UL>
<LI><A HREF="#Heading172">5.10.4 Enhanced mode queries</A>
<UL>
<LI><A HREF="#Heading173"> </A>
<LI><A HREF="#Heading174">5.10.4.1 EQQ - embedded query language query (event Q04)</A>
<LI><A HREF="#Heading175">5.10.4.2 RQQ - event replay query (event Q09) </A>
<LI><A HREF="#Heading176">5.10.4.3 SPQ - stored procedure request (event Q08) </A>
<LI><A HREF="#Heading177">5.10.4.4 VQQ - Virtual Table query (event Q07) </A>
</UL>
<LI><A HREF="#Heading178">5.10.5 Other query/response message segments</A>
<UL>
<LI><A HREF="#Heading179"> </A>
<LI><A HREF="#Heading180">5.10.5.1 EQL - embedded query language segment</A>
<UL>
<LI><A HREF="#Heading181">5.10.5.1.0 EQL field definitions</A>
<LI><A HREF="#Heading182">5.10.5.1.1 EQL-1   Query tag   (ST)   00696 </A>
<LI><A HREF="#Heading183">5.10.5.1.2 EQL-2   Query/response format code   (ID)   00697 </A>
<LI><A HREF="#Heading184">5.10.5.1.3 EQL-3   EQL query name   (CE)   00709 </A>
<LI><A HREF="#Heading185">5.10.5.1.4 EQL-4   EQL query statement   (ST)   00710 </A>
</UL>
<LI><A HREF="#Heading186">5.10.5.2 ERQ - event replay query segment</A>
<UL>
<LI><A HREF="#Heading187">5.10.5.2.0 ERQ field definitions</A>
<LI><A HREF="#Heading188">5.10.5.2.1 ERQ-1   Query tag   (ST)   00696 </A>
<LI><A HREF="#Heading189">5.10.5.2.2 ERQ-2   Event identifier   (CE)   00706 </A>
<LI><A HREF="#Heading190">5.10.5.2.3 ERQ-3   Input parameter list   (QIP)   00705 </A>
</UL>
<LI><A HREF="#Heading191">5.10.5.3 QRD - original-style query definition segment</A>
<UL>
<LI><A HREF="#Heading192">5.10.5.3.0 QRD field definitions</A>
<LI><A HREF="#Heading193">5.10.5.3.1 QRD-1   Query date/time   (TS)   00025 </A>
<LI><A HREF="#Heading194">5.10.5.3.2 QRD-2   Query format code   (ID)   00026 </A>
<LI><A HREF="#Heading195">5.10.5.3.3 QRD-3   Query priority   (ID)   00027 </A>
<LI><A HREF="#Heading196">5.10.5.3.4 QRD-4   Query ID   (ST)   00028 </A>
<LI><A HREF="#Heading197">5.10.5.3.5 QRD-5   Deferred response type   (ID)   00029 </A>
<LI><A HREF="#Heading198">5.10.5.3.6 QRD-6   Deferred response date/time   (TS)   00030 </A>
<LI><A HREF="#Heading199">5.10.5.3.7 QRD-7   Quantity limited request   (CQ)   00031 </A>
<LI><A HREF="#Heading200">5.10.5.3.8 QRD-8   Who subject filter   (XCN)   00032 </A>
<LI><A HREF="#Heading201">5.10.5.3.9 QRD-9   What subject filter   (CE)   00033 </A>
<LI><A HREF="#Heading202">5.10.5.3.10 QRD-10   What department data code   (CE)   00034 </A>
<LI><A HREF="#Heading203">5.10.5.3.11 QRD-11   What data code value qual   (CM)   00035  </A>
<LI><A HREF="#Heading204">5.10.5.3.12 QRD-12   Query results level   (ID)   00036 </A>
</UL>
<LI><A HREF="#Heading205">5.10.5.4 QRF - original style query filter segment</A>
<UL>
<LI><A HREF="#Heading206">5.10.5.4.0 QRF field definitions</A>
<LI><A HREF="#Heading207">5.10.5.4.1 QRF-1   Where subject filter   (ST)   00037 </A>
<LI><A HREF="#Heading208">5.10.5.4.2 QRF-2   When data start date/time   (TS)   00038 </A>
<LI><A HREF="#Heading209">5.10.5.4.3 QRF-3   When data end date/time   (TS)   00039 </A>
<LI><A HREF="#Heading210">5.10.5.4.4 QRF-4   What user qualifier   (ST)   00040 </A>
<LI><A HREF="#Heading211">5.10.5.4.5 QRF-5   Other QRY subject filter   (ST)   00041 </A>
<LI><A HREF="#Heading212">5.10.5.4.6 QRF-6   Which date/time qualifier   (ID)   00042 </A>
<LI><A HREF="#Heading213">5.10.5.4.7 QRF-7   Which date/time status qualifier   (ID)   00043 </A>
<LI><A HREF="#Heading214">5.10.5.4.8 QRF-8   Date/time selection qualifier   (ID)   00044 </A>
<LI><A HREF="#Heading215">5.10.5.4.9 QRF-9   When quantity/timing qualifier   (TQ)   00694 </A>
<LI><A HREF="#Heading216">5.10.5.4.10 QRF-10   Search confidence threshold   (NM)   01442 </A>
</UL>
<LI><A HREF="#Heading217">5.10.5.5 SPR - stored procedure request definition segment</A>
<UL>
<LI><A HREF="#Heading218">5.10.5.5.0 SPR field definitions</A>
<LI><A HREF="#Heading219">5.10.5.5.1 SPR-1   Query tag   (ST)   00696 </A>
<LI><A HREF="#Heading220">5.10.5.5.2 SPR-2   Query/response format code   (ID)   00697 </A>
<LI><A HREF="#Heading221">5.10.5.5.3 SPR-3   Stored procedure name   (CE)   00704 </A>
<LI><A HREF="#Heading222">5.10.5.5.4 SPR-4   Input parameter list   (QIP)   00705 </A>
</UL>
<LI><A HREF="#Heading223">5.10.5.6 URD - results/update definition segment</A>
<UL>
<LI><A HREF="#Heading224">5.10.5.6.0 URD field definitions</A>
<LI><A HREF="#Heading225">5.10.5.6.1 URD-1   R/U date/time   (TS)   00045 </A>
<LI><A HREF="#Heading226">5.10.5.6.2 URD-2   Report priority   (ID)   00046  </A>
<LI><A HREF="#Heading227">5.10.5.6.3 URD-3   R/U who subject definition   (XCN)   00047 </A>
<LI><A HREF="#Heading228">5.10.5.6.4 URD-4   R/U what subject definition   (CE)   00048 </A>
<LI><A HREF="#Heading229">5.10.5.6.5 URD-5   R/U what department code   (CE)   00049 </A>
<LI><A HREF="#Heading230">5.10.5.6.6 URD-6   R/U display/print locations   (ST)   00050 </A>
<LI><A HREF="#Heading231">5.10.5.6.7 URD-7   R/U results level   (ID)   00051 </A>
</UL>
<LI><A HREF="#Heading232">5.10.5.7 URS - unsolicited selection segment</A>
<UL>
<LI><A HREF="#Heading233">5.10.5.7.0 URS field definitions</A>
<LI><A HREF="#Heading234">5.10.5.7.1 URS-1   R/U where subject definition   (ST)   00052 </A>
<LI><A HREF="#Heading235">5.10.5.7.2 URS-2   R/U when data start date/time   (TS)   00053 </A>
<LI><A HREF="#Heading236">5.10.5.7.3 URS-3   R/U when data end date/time   (TS)   00054 </A>
<LI><A HREF="#Heading237">5.10.5.7.4 URS-4   R/U what user qualifier   (ST)   00055 </A>
<LI><A HREF="#Heading238">5.10.5.7.5 URS-5   R/U other results subject definition   (ST)   00056 </A>
<LI><A HREF="#Heading239">5.10.5.7.6 URS-6   R/U which date/time qualifier   (ID)   00057 </A>
<LI><A HREF="#Heading240">5.10.5.7.7 URS-7   R/U which date/time status qualifier   (ID)   00058 </A>
<LI><A HREF="#Heading241">5.10.5.7.8 URS-8   R/U date/time selection qualifier   (ID)   00059 </A>
<LI><A HREF="#Heading242">5.10.5.7.9 URS-9   R/U quantity/timing qualifier   (TQ)   00695 </A>
</UL>
<LI><A HREF="#Heading243">5.10.5.8 VTQ - Virtual table query request segment</A>
<UL>
<LI><A HREF="#Heading244">5.10.5.8.0 VTQ field definitions</A>
<LI><A HREF="#Heading245">5.10.5.8.1 VTQ-1   Query tag   (ST)   00696 </A>
<LI><A HREF="#Heading246">5.10.5.8.2 VTQ-2   Query/response format code   (ID)   00697 </A>
<LI><A HREF="#Heading247">5.10.5.8.3 VTQ-3   VT query name   (CE)   00698 </A>
<LI><A HREF="#Heading248">5.10.5.8.4 VTQ-4   Virtual table name   (CE)   00699 </A>
<LI><A HREF="#Heading249">5.10.5.8.5 VTQ-5   Selection criteria   (QSC)   00700 </A>
</UL>
</UL>
<LI><A HREF="#Heading250">5.10.6 Other Query examples</A>
<UL>
<LI><A HREF="#Heading251"> </A>
<LI><A HREF="#Heading252">5.10.6.1 Original mode query with display-oriented response</A>
<LI><A HREF="#Heading253">5.10.6.2 Enhanced mode query examples</A>
<UL>
<LI><A HREF="#Heading254">5.10.6.2.1 Embedded query language query</A>
<LI><A HREF="#Heading255">5.10.6.2.2 Virtual Table query</A>
<LI><A HREF="#Heading256">5.10.6.2.3 Stored procedure request</A>
<LI><A HREF="#Heading257">5.10.6.2.4 The response to the above queries might look like the following:</A>
<LI><A HREF="#Heading258">5.10.6.2.5 Embedded query language continuation query</A>
<LI><A HREF="#Heading259">5.10.6.2.6 Virtual Table query continuation query</A>
<LI><A HREF="#Heading260">5.10.6.2.7 Stored procedure request query continuation query</A>
<LI><A HREF="#Heading261">5.10.6.2.8 Tabular response showing no further data</A>
<LI><A HREF="#Heading262">5.10.6.2.9 Event replay query example</A>
<LI><A HREF="#Heading263">5.10.6.2.10 Event replay response example</A>
<LI><A HREF="#Heading264">5.10.6.2.11 Embedded query language (EQL) , Virtual Table, and stored procedure error response</A>
<LI><A HREF="#Heading265">5.10.6.2.12 Event replay error response</A>
</UL>
</UL>
</UL>
<LI><A HREF="#Heading266">5.11 OUTSTANDING ISSUES</A>
</UL>
</UL>
<hr size=4>

<h1>
<A NAME="Heading1">5 .<BR>Query</A></h1>

<p><br>
</p>
<TABLE>
<TR align="left">
<TD colspan=1 align="left"><p>Chapter
Chairs/Editors:
</p></TD>
<TD colspan=1 align="left"><p>Mark
Shafarman<br>Oracle
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Larry
Reis<br>Consultant
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Mark
Tucker<br>Regenstrief Institute
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>
Additional Editors
</p></TD>
<TD colspan=1 align="left"><p>Richard
Harding<br>Royal Brisbane Hospital
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Mike
Henderson<br>Kaiser Permanente
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Joann
Larson<br>Kaiser Permanente
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Greg
Thomas<br>Kaiser Permanente
</p></TD>
</TR>
</TABLE>
<h2>
<A NAME="Heading2">5.1 CHAPTER 5 CONTENTS</A></h2>


<h2>
<A NAME="Heading3">5.2 INTRODUCTION</A></h2>

<p>This
chapter defines the rules that apply to queries and to their responses. It also
defines the unsolicited display messages because their message syntax is
query-like in nature.<br>
Version 2.4 of the standard introduces new models for query and response
messages. The layout of this chapter is structured such that all information
pertaining to those newly defined query/response message pairs, including
auxiliary protocols, appears in sections 5.1-5.9 and the previously defined
queries appear in section 5.10.  Outstanding issues appear in the final
section, 5.11<br>
</p>
<TABLE BORDER>
<TR align="center">
<TH><p><b>Topic</b></p></TH>
<TH><p><b>Section
Reference
</b></p></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Introduction</p></TD>
<TD colspan=1 align="left"><p>5.1</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>
       Query/Response Model
</p></TD>
<TD colspan=1 align="left"><p>5.2.1</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Evolution
of the Query Standard
</p></TD>
<TD colspan=1 align="left"><p>5.2.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Query
Development Methodology
</p></TD>
<TD colspan=1 align="left"><p>5.2.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Response
Formats
</p></TD>
<TD colspan=1 align="left"><p>5.2.4</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Query
Specification Formats
</p></TD>
<TD colspan=1 align="left"><p>5.2.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Summary
Chart of Query/Response Pairs
</p></TD>
<TD colspan=1 align="left"><p>5.2.6</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Query/Response
Conformance Statement
</p></TD>
<TD colspan=1 align="left"><p>5.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Query/Response
Message Pairs
</p></TD>
<TD colspan=1 align="left"><p>5.3.3.4</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Query/Response
Message Segments
</p></TD>
<TD colspan=1 align="left"><p>5.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Auxiliary
Query Protocols
</p></TD>
<TD colspan=1 align="left"><p>5.6</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Publish
and Subscribe
</p></TD>
<TD colspan=1 align="left"><p>5.7</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Query
Implementation Considerations
</p></TD>

<TD colspan=1 align="left"><p>5.8</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Query/Response
Message Examples
</p></TD>
<TD colspan=1 align="left"><p>5.9</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Superceded
Query/Response Trigger Events and  Message Pairs 
</p></TD>
<TD colspan=1 align="left"><p>5.10</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>
        Display Messages
</p></TD>
<TD colspan=1 align="left"><p>5.10.1</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>
        Original Mode Queries
</p></TD>
<TD colspan=1 align="left"><p>5.10.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Enhanced
Mode Queries
</p></TD>
<TD colspan=1 align="left"><p>5.10.4</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Other
Query/Response Message Segments
</p></TD>
<TD colspan=1 align="left"><p>5.10.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Other
Query Examples
</p></TD>
<TD colspan=1 align="left"><p>5.10.6</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Outstanding
Issues
</p></TD>
<TD colspan=1 align="left"><p>5.11</p></TD>
</TR>
</TABLE>
<p>
The Standard embraces the most common queries that are likely to occur. These
are defined by the functional chapters. The following represents typical
examples of queries supported by the Standard:<br>
a)	data regarding a single patient, e.g., send all lab results for patient
#123456<br>
b)	data regarding multiple patients, e.g., send the list of patients whose
attending physician is Dr. #123<br>
c)	data that is not patient related, e.g., send the age specific normal values
for serum protein.<br>
d)	data within a specified time range, e.g., send all serum glucose results,
reported between January 1, 1998 through December 31, 1999, for patient
#123456.<br>
The variety of potential queries is almost unlimited.  There was no attempt
here to define a Standard that would cover every possible query. Chapter 5
discusses general ways query/response pairs are structured. Functional chapters
discuss specific query/response pairs required for their needs. The technical
committees responsible for functionally-specific chapters define detailed
content of the query/response segment patterns within those chapters.</p>
<p>In particular, there is no implication that a specific system must support
generalized queries or Conformance Statements to comply with the Standard.
Rather, these transactions provide a format, or a set of tools to support
queries to the extent desired by the institution.  The resources available and
local policies will influence the type of queries that are implemented.
</p>

<h3>
<A NAME="Heading4">5.2.1 Query/response model</A></h3>

<p>A
query with its response should be thought of as a message pair. The following
illustration shows the three generic models of message pairs: the
<b><i>declarative, interrogative, </i></b>and <b><i>imperative</i></b>.  Within
each model, one system assumes the role of initiator and the other system
assumes the role of responder. HL7 queries follow the "interrogative" style of
messaging as described below.<br>
<A href="ch0501.gif">Click here for Picture </A><br>
<b>Note:</b>  	All messaging in HL7 assumes a single basic paradigm using a
point-to-point transmission of an initial message from a sender to a receiver,
followed by a response or acknowledgement message from the receiver back to the
sender.  The response/acknowledgment message may be optional depending on
several use cases that will be discussed below.  The point-to-point
transmission is defined independent of any particular technology or
architecture.<br>
The <b><i>declarative</i></b> model is employed for distribution or broadcast
of unsolicited <b>events</b> such as the ORU and RDS.  <b>Clients</b>
(<b>interested parties</b>) that desire information that resides on a
<b>Server</b> or <b>data owner</b> may "subscribe" to be updated when new
information is available on the Server. The Server initiates a transmission of
event information.  This transmission may be to a single Client, or may be a
broadcast to multiple Clients. Each Client responds with an acknowledgement of
receipt.<br>
The <b><i>interrogative</i></b> model is employed for queries. A Client
initiates a query (a request for data) to the Server. The Server processes the
query, responds with a report of success or failure of the query to the Client,
and further responds by delivering information requested by the query.<br>
The <b><i>imperative</i></b> model is employed for remote interoperation. A
Client initiates a request for action (such as an order) to the Server. The
Server processes the request and responds with a report of success or failure
to the Client.<br>
<b>Note:</b>  	In HL7 v2.4, there is no formal assumption of client-server
architecture, or of a particular "publish and subscribe" architecture. Thus the
roles of the intercommunicating applications may change according to the
messaging needs. I.e. an application may be a data owner or Server for one set
of messages (e.g., an order entry system creating orders), and an interested
party or Client for another set of messages (e.g., an order entry system
receiving order status messages from an ancillary departmental system).
Furthermore, the "data owning" system may be a middleware component such as an
"application server" or a "messaging gateway" or "router" that distributes
information from a server application. In the discussions below,
"<i>Client</i>" and "<i>Server</i>" are used as shorthand synonyms for
"requesting system/application" and "responding system/application" without
implying the assumption of a client/server architecture. Likewise, the support
for "publish and subscribe" does not assume a particular operating system or
architecture, but is defined at the application level (level 7), in a
technology-neutral form. The phrase "<i>data owner</i>" is used to refer to the
human institution that operates the Server program.  One would say that "the
data owner defines the data to be made available by the Server program." 
</p>

<h3>
<A NAME="Heading5">5.2.2 Evolution of the query standard</A></h3>

<p>The
Query Standard, like the HL7 Standard in general, has been evolving since its
inception in Version 2.1. Version 2.4 introduces a new methodology intended to
supercede the previous generation of queries.<br>
<b>Original Mode Queries</b><br>
Originally, the parameters of an HL7 query were carried by the QRD and QRF
segments.  Because these segments were intended to be used by all queries, the
content of these segments could only be loosely defined. Such "original mode
queries" actually represent just a starting point for defining queries.  <br>
In these original mode queries, separate trigger events were used to
differentiate between an immediate response and a deferred response. In
addition, some of the functional chapters defined queries and responses with
separate trigger events.<br>
<b>Enhanced Mode Queries</b><br>
In HL7 V2.3, "enhanced mode queries" were introduced that attempted to provide
for a much higher level of precision in queries. Four new ways of specifying a
query were introduced in Version 2.3.<br>
*	An Embedded Query Language query, which supports free-form select statements,
based on the query language of choice (e.g., SQL)<br>
*	a Virtual Table request query which supports queries against server database
tables (virtual or actual) based on specific selection criteria<br>
*	a stored procedure request, which enables an application on one system to
execute a stored procedure on another system, which is coded to extract
specific data<br>
*	an event replay request message, which is used to request data formatted as
an event replay response<br>
"Enhanced Mode" introduced three new ways to pass data to the responding system
(e.g., a Server).<br>
1)	Passing values to specific parameters of a query. (Used by the stored
procedure and event replay queries.)  This is the most common and
straightforward technique for creating queries. The drawback is that the client
is tightly limited in the range of queries it can formulate.<br>
2)	Passing the query as a single complex query "expression".  (Used by the
Virtual Table query.) The query is defined by an expression-tree made up of the
usual AND OR,' &lt;' , `&gt;',...  Operators can refer to column_names or
variables defined by the Server.  These Queries give the Client significant
flexibility in specifying their query over the columns that the Server has
permitted. The cost of this Client flexibility is that the Server must evaluate
the query expression, rather than simply plug parameter values into an existing
stored procedure.<br>
3)	Passing the query as a single string in an existing database query language
such as SQL.  (Used by the EQL External Query Language query.) An EQL query is
represented as a string formatted in the particular syntax of an existing query
language.  The Server will probably pass this string expression directly to an
existing database engine to evaluate the query, which will have to parse this
expression to recover the query. The drawback of this technique is that
different database engines use different query languages, and so the exact
query string which the Client constructs will depend on the Server's query
language.<br>
Also in Version 2.3, the use of the trigger event was moving closer to the
definition set forth in chapter 2. Each offered query had its own trigger
event. In Version 2.3.1 each response had its own trigger event.<br>
<b>Version 2.4 Queries</b><br>
Users of 2.3 queries encountered some somewhat arbitrary limitations suggested
by the 2.3 standard. A close reading of the 2.3 virtual table query wording
made it appear that the only way a query could be specified by a QSC selection
expression was if it returned tabular (RDT) results, and it seemed that
query-by-parameter queries could not return tabular results.  <br>
Version 2.4 of the HL7 standard now more cleanly separates how a query is
specified from how the data is returned, and it emphasizes the existence of a
"Conformance Statement." HL7 continues to support the semantics of the Stored
Procedure/Event Replay queries and the Virtual Table queries, but formulates
the syntax more clearly using a single new query, the Query By Parameter (QBP).
<br>
The QBP query is intended to unify the semantics of the stored-procedure,
event-replay and virtual-table queries within the framework of a precise
conformance statement.  <br>
The standard recognizes the continued use of the Original Mode queries
(QRD/QRF), but uses a new query formalism to explain their semantics more
clearly.  <br>
The bulk of the new material of Version 2.4 consists of defining a format for
Conformance Statements, and giving examples of query design and use.<br>
<b>Compatibility with past versions</b><br>
For backward compatibility, both the "original" and "enhanced" queries remain
in the standard, but their description has been relegated to a "for backward
compatibility only" section.  The main part of this chapter is a complete and
consistent explanation of the recommended approach to HL7 queries in Version
2.4.<br>
As in past versions of HL7, the detailed domain content of the query and
response messages is defined by the technical committees responsible for the
functionally-specific chapters; the basic forms and methodology for queries and
responses are defined in this chapter.<br>
Sections 5.2.4 and 5.2.5 discuss Response Formats and Query Specification
Formats.
</p>

<h3>
<A NAME="Heading6">5.2.3 Query development methodology</A></h3>

<p>Typically,
an individual HL7 conformant query would evolve as follows:<br>
An institution, or data owner, decides that it would like to make information
available via a query.  It decides precisely <b><i>what data will be made
available</i></b> and <b><i>how it will be offered.  </i></b>Knowing its own
data, the data owner will define its query to return one of three
representations of the data:<br>
1.	As traditional HL7 segments.  (See section 5.2.4.0 for "segment pattern
response".) <br>
2.	As rows and columns of data from a precisely defined Virtual Table. (See
section 
5.2.4.2
for "tabular response.")<br>
3.	As rows of human readable text ready to output to a screen or printer. (See
section 5.2.4.3 for  "display response".)<br>
Next, the data owner specifies exactly which <b><i>input variables</i></b> the
Client can use to control the data that the Server agrees to return.<br>
The complete specification of what data are available, how the data will be
returned, and what variables can be valued or constrained in a Query is called
the <b><i>Conformance Statement</i></b>. <br>
The Conformance Statement concept is critical to the proper usage of the
query/response pair. In the absence of a Conformance Statement, the Client
would be unaware of the existence of the query, let alone how to use it or what
to expect from it<b><i>. </i></b>The data owner advertises the existence of,
and support for, a query by publishing a <b><i>Conformance Statement</i></b>.
<br>
The Conformance Statement has the following broad structure:<br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p>Introduction
including title, trigger events, mode, characteristics and purpose
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Query
Grammar
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Response
Grammar
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Input
Specification and Commentary
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Response
Control
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Output
specifications and Commentary
</p></TD>
</TR>
</TABLE>
<p><b>Conformance
statement</b>: A declaration which sets forth the name of the query supported
by the Server, the logical structure of the information that can be queried,
and the logical structure of what can be returned.<br>
Section 5.3 will explain the conformance statement in detail.<br>
The next section elaborates on the three styles of response data (segment
pattern, tabular, and display) that a data owner may use to represent its data.
<br>
<b>The introduction of the Conformance Statement concept is not intended to
imply system certification. It is intended to promote well-specified queries.
As in previous versions, support for queries is not required for HL7 conformance.
</b></p>

<h3>
<A NAME="Heading7">5.2.4 Response format</A></h3>

<p>The
first decision a data owner must make in formulating a query is to decide which
style of representing data is most appropriate for their needs.<br>
</p>
<TABLE BORDER>
<TR align="center">
<TD colspan=1 align="center"><p>HL7
recognizes three main styles of representing responses to queries:
<b><i>tabular, segment pattern, or display</i></b>. <i>Segment pattern </i>and
<i>tabular</i> were previously known as <i>record-oriented</i> as described in
earlier versions of this Standard. <i>Segment pattern</i> responses consist of
a set of  HL7 segments. Each query will define, in its conformance statement,
the precise grammar of HL7 segments that it will return. Tabular responses
return data as a set of rows, one RDT segment per row.  Display queries return
data in DSP segments. An HL7 conformant system interested in supporting queries
will choose one or more of these styles before proceeding with a detailed
design.  
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Tabular</p></TD>
<TD colspan=1 align="left"><p>The
responding system formats the data in a relational format, as rows and columns.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Segment
pattern
</p></TD>
<TD colspan=1 align="left"><p>The
responding system formats the data on the basis of an application-specific
segment-oriented (record-oriented) message.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Display</p></TD>
<TD colspan=1 align="left"><p>The
responding system formats the data in human readable format for direct
outputting to a display device (in both original and enhanced modes).
</p></TD>
</TR>
</TABLE>
<p>These
structures support all original mode and enhanced mode responses, as well as
the 2.4 queries.
</p>

<h4>
<A NAME="Heading8"> </A></h4>


<h4>
<A NAME="Heading9">5.2.4.1 Segment pattern response</A></h4>

<p>Segment
Pattern data responses reflect the traditional way of offering data within HL7.
The Server responds to queries by returning a pattern of HL7 segments.  For
example, the core of a response to a query for Lab data might be defined by the
following segment grammar: <br>
{PID<br>
OBR<br>
[{OBX}]<br>
}<br>
For example, patient information will be returned in the PID segment and
laboratory results in OBR and OBX segments. In this style, the message returned
by a Server is often a close approximation to an existing unsolicited update
HL7 message.<br>
In creating a Conformance Statement for a segment pattern response, the data
owner must decide on the exact segment grammar it will return. The output
specification of the Conformance Statement for a segment pattern response will
have a structure very similar to the message definition of a standard HL7
transaction.  It must define a grammar of segments that will be returned, and,
for each segment, it should clarify, where necessary, the meaning of each
field, the cardinality of the data, and whether the data is optional or required.
</p>

<h4>
<A NAME="Heading10">5.2.4.2 Tabular response</A></h4>

<p>A
data owner may decide that the best model for the data it wishes to offer is
that of a fairly conventional table of rows and columns.  In this case, a data
owner advertises support for a straightforward ("virtual") table of data, with
specific columns of specific data types.  It further indicates which of the
columns the Client can constrain in its query.  The response to a query will be
in the form of a set of rows from the advertised table. <br>
The Virtual Table is an abstraction around a traditional database table.
However, there are important differences between a traditional database table
and the Virtual Table.  The Virtual Table need not be based on a single table
or collection of data.  It may represent a "join" or combination of data among
database tables (although the "join" or combination is not explicitly exposed
to the Client).<br>
The concept of <i>table,</i> borrowed from the relational database world, is
used merely as a representational aid.  The actual internal data structure of
the Server need not be relational.  Virtual Tables may be used to present data
elements from internal structures that are hierarchical, object-oriented, or
otherwise non-relational in nature.<br>
Virtual Tables therefore insulate the user from the exact data layout or
representation in the data source.  That is to say, the requestor need not
understand the structure of the tables, rows and columns of the database being
queried but only the structure of the Virtual Table representation.  Likewise,
the responder (database owner) does not have to expose the structure of the
real database. Neither the owner nor the requestor needs to worry if the
structure of the database changes. <br>
The rows and columns of the Virtual Table for a query are fully described in
the Conformance Statement for that query.<br>
A virtual table data representation is appropriate when the information being
offered is relatively simple.  It would not be the appropriate representation
for lab reports that typically involve a complex nesting of results into
sections.   Data carried by the typical HL7 segment or segment group could be
modeled as a virtual table.  For example, the ADT system might offer a table
consisting of the fields of PID, NK1 and a single PV1 segment.  On the other
hand, it would be difficult to represent the visit history of a patient in a
single virtual table.  
</p>

<h4>
<A NAME="Heading11">5.2.4.3 Display response</A></h4>

<p>A
display message can be generated where the update information does not need to
be captured by the receiving system's database, but only displayed, either on a
visual medium (such as a PC, workstation or a CRT) or on printed medium. <br>
The display response does not actually represent a formal style of data
organization.  It represents a decision to return data formatted for human,
rather than for computer, consumption.  The Server offers a pretty-printed
version of the data in a format that is meaningful for human readers.
Logically, the content of the pretty printed message might be the complex data
carried by an HL7 segment pattern, or could be a simple record normally carried
by a tabular response.
</p>

<h4>
<A NAME="Heading12">5.2.4.4 Choosing among available response formats</A></h4>

<p>In
practice, it is easy to decide which style of data to offer.  In general,
segment pattern responses are able to carry complex data structures (e.g., an
entire laboratory report), while tabular responses are typically simple data
structures. Therefore, tabular response is intended as a simpler tool to
accomplish a simpler task. There is no need for the Client to understand, parse
and process the deep structure and relationships implied by the segment pattern
response.. The Client does not need a complex state machine to do segment level
parsing. The rows all have the same structure so only a simple state machine is
needed.<br>
If the query is defined by an HL7 technical committee, then the decision is
already made. If, on the other hand, no query is yet defined but the domain of
the data is well covered by HL7, then it is probable that there are existing
HL7 segments that could carry the data. A Z query may be constructed out of the
existing HL7 segments. If the data is site specific, the site can either create
its own Z segments and offer a segment pattern response (which makes particular
sense if the overall data is complex) or it can define its own Virtual Table,
offer a tabular response and let the Client process each record.<br>
Once it is known what data a Server is making available, then the data can be
ordered or requested. This is analogous to needing to refer to a catalog before
ordering an item by mail.
</p>

<h3>
<A NAME="Heading13">5.2.5 Query specification formats</A></h3>

<p>The
previous section explained the three representations for data that are returned
to a query client. This section discusses how the client may represent a query
for information.<br>
HL7 now recommends one primary way with 3 basic variants for specifying a
query.<br>
This query model with its variants is intended to assist implementers in
translating specific query needs from the ordinary prose of the business model
into an appropriate HL7 query paradigm.  The paradigm selected will depend upon
the philosophy of the institution:  whether to allow relative freedom to client
systems in composing query expressions, or to control rigidly the fields and
operations to be offered.  The following paragraphs compare and contrast the
features of each of the HL7 query variant models.  The differences between them
lie mainly in the processing they require on the Server side.<br>
<b><i>Query By Simple Parameter </i></b><br>
The first variant is called the Simple Parameter query. In the simple parameter
query, the input parameters are passed in order as successive fields of an HL7
segment.  The Server need only read them from the corresponding HL7 fields, and
plug them into an internal function to evaluate the query.<br>
This is the most basic form of the query in which the Server specifies a fixed
list of parameters in its Conformance Statement.  (For example, the Server may
direct the querying system to specify a medical record number, a beginning
date, and an ending date.)  When invoking the query, the Client passes a
specific value for each parameter. This is analogous to invoking a stored
procedure against a database.<br>
The parameter definition segment (i.e., the QPD) can be seen as a
generalization of the QRD and QRF segments of the original mode query.  Each
field in the QRD and QRF corresponds to 1 parameter of the QPD instance.  HL7
recommends that queries defined by QRD and QRF segments be recast as a version
2.4 Query By Parameter.<br>
The obvious implementation gain is that the Server can simply map the input
values to the parameters specified in the Conformance Statement. An already
known function or procedure is called to evaluate the query and select data to
be returned. The bulk of the work effort has already been invested in the
development of this predefined function or procedure.<br>
<b><i>Query By Example Variant:</i></b><i> </i><br>
The Query By Example (QBE) is an extension of Query By Parameter (QBP) in which
search parameters are passed by sending them in the segment which naturally
carries them, instead of as fields of the QPD segment.  For example, if one
wanted to perform a "find_candidates" query using QBE, one would send the
demographics information on which to search in the PID and/or PD1 segments,
leaving blank those fields in the segment sent that are not query parameters.
If, for example, religion were not one of the query parameters, PID-17 would be
left blank when the PID was sent in the query.  Parameters which do not occur
naturally in an HL7 message, such as search algorithm, confidence level, etc.,
would continue to be carried in the QPD segment as they are in the Query by
Parameter.  The exact segments and fields available for use as query parameters
would be specified in the Conformance Statement for the query.<br>
<b><i>Query using the QSC variant:</i></b> <br>
The third variant is known as the QSC variant because of its use of the QSC
data type, which was used in the Virtual Table query. The conformance statement
for the query will define all the variables that the Client may use in an
expression.  At runtime, the Client is able to define the exact search criteria
by constructing a "tree" of operator/operand nodes that constrain the available
input parameters.  To evaluate the query, the Server must be willing to analyze
and interpret the query expression at runtime. The Server may translate the
input expression into its local data access language, or perhaps it will
interpret the request itself, and evaluate the expression for each item of the
virtual table. The client's Complex Expression is analogous to an SQL selection
statement against a relational database.<br>
This variant is most like the Virtual Table Query (VQQ).<br>
There are a number of factors to consider in determining which variant to
offer.  In the Complex Expression (QSC) variant, the Client may select any or
all of the variables offered and may specify any permissible operators and
values for each variable.  By contrast, in the Simple Parameter variant or the
Query By Example variant, the Client must provide values for exactly the set of
variables offered.<br>
The Simple Parameter variant is easy to parse and process because it has
positional fields; i.e., the parameters are in a predefined and fixed order.
Likewise, the Query By Example variant lends itself to simple processing, since
parameters will occur in known positions in defined segments.  The Complex
Expression variant, on the other hand, requires more involved parsing and
processing because of its flexibility and the optionality of its elements.
Thus, while the Complex Expression variant offers more functionality to the
Client, it is more burdensome for the Server to process.  Conversely, the
Simple Parameter and Query By Example variants offer less functionality to the
Client but are generally easier for the Server to implement; they are often
based on existing stored procedures on the Server's system.</p>

<h4>
<A NAME="Heading14"> </A></h4>


<h4>
<A NAME="Heading15">5.2.5.1 Expressing the same data using the variants</A></h4>

<p>The
following is an example of a query stated in all three variant forms.  This
example is presented to illustrate the utility of each format for the purpose
of offering a query.  Which format to use depends upon the level of processing
complexity to be implemented on the Server and the degree of specification
flexibility required by the Client. <br>
The purpose of the query is to allow a simple inquiry upon an administrative
database.  Suppose a patient information request is submitted by the Client.
The Server is to respond with demographic information:  patient's date of
birth, sex, and ZIP code.
</p>

<h5>
<A NAME="Heading16">5.2.5.1.1 Expression as simple parameters</A></h5>

<p>As
we have seen, this variant requires an exact parameter specification.<br>
The client system transmits a QBP query message in the following format:<br>
MSH|^~|FEH.IVR|HUHA.CSC|HUHA.DEMO||199902031135-0600||QBP^Z58^QBP_Q13|1|D|2.4<br>
QPD|Z58^Pat Parm Qry 2|Q502|111069999<br>
RCP||I<br>
The names of the input and output fields are not specified in the query
message, but by the Conformance Statement, identified by <i>QPD-1-message query
name</i>.  The <i>MSH-9.2-trigger event</i> and the <i>QPD-1-message query name
</i>are this query's only distinguishing elements.  The requesting system must
refer to this query's Conformance Statement to learn more about the input and
output fields.
</p>

<h5>
<A NAME="Heading17">5.2.5.1.2 Expression as query by example</A></h5>

<p>Just
as in the Simple Parameter variant, the Query By Example requires an exact
parameter specification.  The distinction in a Query By Example is that
segments other than QPD are used to transmit the parameters.  The segments
offered should be already-existing segments that the Server can parse
easily.<br>
The client system transmits a Query By Example in the following format.<br>
MSH|^~|FEH.IVR|HUHA.CSC|HUHA.DEMO||199902031135-0600||QBP^Z58^QBP_Q13|1|D|2.4<br>
QPD|Z58^Pat Parm Qry 2|Q502<br>
PID|||111069999<br>
RCP||I<br>
Parameters used in this query are specified in the Conformance Statement.
</p>

<h5>
<A NAME="Heading18">5.2.5.1.3 Expression as a complex expression</A></h5>

<p>In
contrast, the Complex Expression variant allows flexible input specifications.
This allows more choices for the Client system, but can require more complex
processing capability on the part of the Server System. <br>
If the above Simple Parameter variant were to be stated as a Complex
Expression, it might look like this.<br>
MSH|^~|FEH.IVR|HUHA.CSC|HUHA.DEMO||199902031135-0600||QBP^Q12^QBP_Q12|1|D|2.4<br>
QPD|Z999^Pat Sel Qry 1|Q501|@MedicalRecordNo^EQ^111069999<br>
RCP||I<br>
Note the explicit statement of the input field name in <i>QPD-3-user
parameters</i>.  Also, note that this query might be used to specify and
request other fields, depending upon the specification of what is permitted by
the server system's Conformance Statement.<br>
</p>
<TABLE BORDER>
<TR align="center">
<TD colspan=1 align="center"><p><b>Query
Modalities
</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Simple
Parameter Variant
</p></TD>
<TD colspan=1 align="left"><p>The
Server specifies parameters and the Client passes specific values to the
parameters when the query is invoked 
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Complex
Expression Variant
</p></TD>
<TD colspan=1 align="left"><p>The
Server offers variables which can be used by the Client who passes a
constraining  expression (subject to any limitations specified by the
Conformance Statement) over those variables when invoking the query
</p></TD>
</TR>
</TABLE>
<p>Using
the new modalities shown in the table, the variety and number of queries is
almost unlimited. There is no implication that a specific Server must support
all of these potential generalized queries to comply with the Standard.
Rather, these transactions provide a format, or a set of tools, to support
queries to the extent desired by the institution.  The resources available and
local policies will influence the types of queries that are implemented.
</p>

<h3>
<A NAME="Heading19">5.2.6 Summary chart of query/response pairs</A></h3>

<p>The
following chart delineates the query/response messages defined in chapter 5:<br>
</p>
<TABLE BORDER>
<TR align="center">
<TH><p><b>Description</b></p></TH>
<TH><p><b>Query<br></b></p></TH>
<TH><p><b>Response<br></b></p></TH>
<TH><p><b>Response
type
</b></p></TH>
<TH><p><b>Defining
segment(s)
</b></p></TH>
<TH><p><b>Sec
Ref
</b></p></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Cancel
query
</p></TD>
<TD colspan=1 align="left"><p>QCN</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>5.4.6</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Embedded
query language query
</p></TD>
<TD colspan=1 align="left"><p>EQQ</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Enhanced
mode (superceded)
</p></TD>
<TD colspan=1 align="left"><p>EQL</p></TD>
<TD colspan=1 align="left"><p>5.10.2.0</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Query
By Parameter
</p></TD>
<TD colspan=1 align="left"><p>QBP</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>QPD</p></TD>
<TD colspan=1 align="left"><p>5.4.1,
5.4.2, 5.4.3
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Query,
original Mode
</p></TD>
<TD colspan=1 align="left"><p>QRY</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Original
mode (superceded)
</p></TD>
<TD colspan=1 align="left"><p>QRD/QRF</p></TD>
<TD colspan=1 align="left"><p>5.10.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Event
Replay Query
</p></TD>
<TD colspan=1 align="left"><p>RQQ</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Enhanced
mode (superceded)
</p></TD>
<TD colspan=1 align="left"><p>ERQ</p></TD>
<TD colspan=1 align="left"><p>5.10.4.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Stored
procedure request
</p></TD>
<TD colspan=1 align="left"><p>SPQ</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Enhanced
mode (superceded)
</p></TD>
<TD colspan=1 align="left"><p>SPR</p></TD>
<TD colspan=1 align="left"><p>5.10.4.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Virtual
Table query
</p></TD>
<TD colspan=1 align="left"><p>VQQ</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Enhanced
mode (superceded)
</p></TD>
<TD colspan=1 align="left"><p>VTQ</p></TD>
<TD colspan=1 align="left"><p>5.10.4.4</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Display
response
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RDY</p></TD>
<TD colspan=1 align="left"><p>Display</p></TD>
<TD colspan=1 align="left"><p>DSP</p></TD>
<TD colspan=1 align="left"><p>5.4.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Enhanced
display response
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>EDR</p></TD>
<TD colspan=1 align="left"><p>Enhanced
mode (superceded)
</p></TD>
<TD colspan=1 align="left"><p>DSP</p></TD>
<TD colspan=1 align="left"><p>5.10.4.0,
5.10.4.3, 5.10.4.4
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Event
replay response
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ERP</p></TD>
<TD colspan=1 align="left"><p>Enhanced
mode (superceded)
</p></TD>
<TD colspan=1 align="left"><p>ERQ</p></TD>
<TD colspan=1 align="left"><p>5.10.4.2,
5.10.4.3
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Response
Segment Pattern
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RSP</p></TD>
<TD colspan=1 align="left"><p>Segment
pattern
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>5.4.1,
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Response
tabular
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RTB</p></TD>
<TD colspan=1 align="left"><p>tabular</p></TD>
<TD colspan=1 align="left"><p>RDF/RDT</p></TD>
<TD colspan=1 align="left"><p>5.4.2,
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Tabular
Data Response
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>TBR</p></TD>
<TD colspan=1 align="left"><p>tabular</p></TD>
<TD colspan=1 align="left"><p>RDF/RDT</p></TD>
<TD colspan=1 align="left"><p>5.10.4.4</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Unsolicited
display message
</p></TD>
<TD colspan=1 align="left"><p>UDM</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Display
(superceded)
</p></TD>
<TD colspan=1 align="left"><p>URD/URS</p></TD>
<TD colspan=1 align="left"><p>5.10.1.2</p></TD>
</TR>
</TABLE>
<p>The
following chart delineates the query/response messages defined in the
functional chapters:<br>
</p>
<TABLE BORDER>
<TR align="center">
<TH><p><b>Description</b></p></TH>
<TH><p><b>Query<br></b></p></TH>
<TH><p><b>Response<br></b></p></TH>
<TH><p><b>Response
type
</b></p></TH>
<TH><p><b>Defining
<br>segment(s)
</b></p></TH>
<TH><p><b>Sec
Ref
</b></p></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>ADT
response
</p></TD>
<TD colspan=1 align="left"><p>QRY^A19</p></TD>
<TD colspan=1 align="left"><p>ADR^A19</p></TD>
<TD colspan=1 align="left"><p>Original
mode
</p></TD>
<TD colspan=1 align="left"><p>QRD/QRF</p></TD>
<TD colspan=1 align="left"><p>3.3.19</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Allocate
identifiers
</p></TD>
<TD colspan=1 align="left"><p>QBP^Q24</p></TD>
<TD colspan=1 align="left"><p>RSP^K24</p></TD>
<TD colspan=1 align="left"><p>Segment
pattern
</p></TD>
<TD colspan=1 align="left"><p>QBP</p></TD>
<TD colspan=1 align="left"><p>3.3.59</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Ancillary
RPT (display) (for backward compatibility only)
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ARD</p></TD>
<TD colspan=1 align="left"><p>Original
mode
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>7</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Find
candidates
</p></TD>
<TD colspan=1 align="left"><p>QBP^Q22</p></TD>
<TD colspan=1 align="left"><p>RSP^K22</p></TD>
<TD colspan=1 align="left"><p>Segment
pattern
</p></TD>
<TD colspan=1 align="left"><p>QBP</p></TD>
<TD colspan=1 align="left"><p>3.3.57</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Get
corresponding identifiers
</p></TD>
<TD colspan=1 align="left"><p>QBP^Q23</p></TD>
<TD colspan=1 align="left"><p>RSP^K23</p></TD>
<TD colspan=1 align="left"><p>Segment
pattern
</p></TD>
<TD colspan=1 align="left"><p>QBP</p></TD>
<TD colspan=1 align="left"><p>3.3.58</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Get
person demographics
</p></TD>
<TD colspan=1 align="left"><p>QBP^Q21</p></TD>
<TD colspan=1 align="left"><p>RSP^K21</p></TD>
<TD colspan=1 align="left"><p>Segment
pattern
</p></TD>
<TD colspan=1 align="left"><p>QBP</p></TD>
<TD colspan=1 align="left"><p>3.3.56</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Order
status query/ Order status response
</p></TD>
<TD colspan=1 align="left"><p>OSQ^Q06</p></TD>
<TD colspan=1 align="left"><p>OSR^Q06</p></TD>
<TD colspan=1 align="left"><p>Original
mode
</p></TD>
<TD colspan=1 align="left"><p>QRD/QRF</p></TD>
<TD colspan=1 align="left"><p>4.4.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Pharmacy
administration information
</p></TD>
<TD colspan=1 align="left"><p>QRY^Q27</p></TD>
<TD colspan=1 align="left"><p>RAR^RAR</p></TD>
<TD colspan=1 align="left"><p>Original
mode
</p></TD>
<TD colspan=1 align="left"><p>QRD/QRF</p></TD>
<TD colspan=1 align="left"><p>4.13.14</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Master
files query
</p></TD>
<TD colspan=1 align="left"><p>MFQ</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Original
mode
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>8.4.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Master
files query response
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>MFR</p></TD>
<TD colspan=1 align="left"><p>Original
mode
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>8.43</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Personnel
information
</p></TD>
<TD colspan=1 align="left"><p>QBP^Qnn</p></TD>
<TD colspan=1 align="left"><p>RSP^Knn</p></TD>
<TD colspan=1 align="left"><p>Segment
pattern
</p></TD>
<TD colspan=1 align="left"><p>QBP</p></TD>
<TD colspan=1 align="left"><p>15.3.7</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Pharmacy
dispense information
</p></TD>
<TD colspan=1 align="left"><p>QRY^Q28</p></TD>
<TD colspan=1 align="left"><p>RDR^RDR</p></TD>
<TD colspan=1 align="left"><p>Original
mode
</p></TD>
<TD colspan=1 align="left"><p>QRD/QRF</p></TD>
<TD colspan=1 align="left"><p>4.13.15</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Pharmacy
dose information
</p></TD>
<TD colspan=1 align="left"><p>QRY^Q30</p></TD>
<TD colspan=1 align="left"><p>RGR/RGR</p></TD>
<TD colspan=1 align="left"><p>Original
mode
</p></TD>
<TD colspan=1 align="left"><p>QRD/QRF</p></TD>
<TD colspan=1 align="left"><p>4.13.17</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Pharmacy
encoded order information
</p></TD>
<TD colspan=1 align="left"><p>QRY^Q29</p></TD>
<TD colspan=1 align="left"><p>RER^RER</p></TD>
<TD colspan=1 align="left"><p>Original
mode
</p></TD>
<TD colspan=1 align="left"><p>QRD/QRF</p></TD>
<TD colspan=1 align="left"><p>4.13.16</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Pharmacy
prescription order response
</p></TD>
<TD colspan=1 align="left"><p>QRY^Q26</p></TD>
<TD colspan=1 align="left"><p>ROR^ROR</p></TD>
<TD colspan=1 align="left"><p>Original
mode
</p></TD>
<TD colspan=1 align="left"><p>QRD/QRF</p></TD>
<TD colspan=1 align="left"><p>4.13.13</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Request
clinical information
</p></TD>
<TD colspan=1 align="left"><p>RQC^I05</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Original
mode
</p></TD>
<TD colspan=1 align="left"><p>QRD/QRF</p></TD>
<TD colspan=1 align="left"><p>11.3.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Results
of observation, query for
</p></TD>
<TD colspan=1 align="left"><p>QRY^R02</p></TD>
<TD colspan=1 align="left"><p>ORF^R04</p></TD>
<TD colspan=1 align="left"><p>Original
mode
</p></TD>
<TD colspan=1 align="left"><p>QRD/QRF</p></TD>
<TD colspan=1 align="left"><p>7.2.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Return
Clinical Information
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RCI^I05</p></TD>
<TD colspan=1 align="left"><p>Original
mode
</p></TD>
<TD colspan=1 align="left"><p>QRD/QRF</p></TD>
<TD colspan=1 align="left"><p>11.2.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Return
Clinical List
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RCL^I06</p></TD>
<TD colspan=1 align="left"><p>Original
mode
</p></TD>
<TD colspan=1 align="left"><p>QRD/QRF</p></TD>
<TD colspan=1 align="left"><p>11.3.6</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Return
patient referral
</p></TD>
<TD colspan=1 align="left"><p>RRI</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Original
mode
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>11.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Return
patient referral
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RRI</p></TD>
<TD colspan=1 align="left"><p>Original
mode
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>11.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Schedule
query
</p></TD>
<TD colspan=1 align="left"><p>SQM</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Original
mode
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>10.5.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Schedule
query response
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>SQR</p></TD>
<TD colspan=1 align="left"><p>Original
mode
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>10.5.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Query
for vaccination record
</p></TD>
<TD colspan=1 align="left"><p>VXQ^V01</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Original
mode
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>4.17.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Vaccination
query record response
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>VXR^V03</p></TD>
<TD colspan=1 align="left"><p>Original
mode
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>4.17.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Vaccination
query response with multiple PID matches
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>VXX^V02</p></TD>
<TD colspan=1 align="left"><p>Original
mode
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>4.17.4</p></TD>
</TR>
</TABLE>
<h2>
<A NAME="Heading20">5.3 QUERY/RESPONSE CONFORMANCE STATEMENT</A></h2>

<p>The
introduction of the Query/Response Conformance Statement concept is not
intended to imply system certification. It is intended to promote the
definition and implementation of well-specified queries. As in previous
versions, support for queries is not required for HL7 conformance.<br>
In the introduction, the data owner describes the data being made available and
the purpose of the query.  He specifies the exact coded value Query Name which
the Client must used to invoke this query.<br>
The Query Grammar defines the exact segments the Client may send.  For each
field of those segments, the conformance statement will define how the Server
will interpret client values. (For example, the patient name field is
interpreted as a regular expression match.)  <br>
The Response Grammar defines the exact pattern of segments that the Server will
return. Each Segment Pattern Response will specify its own pattern of segments.
(For example, lab data queries will return patterns of OBR and OBX, while
demographic queries might respond with patterns of PID, PV1... segments.)  When
a data owner defines a tabular response query, the response grammar might
simply be a list of RDT segments that carry rows of data. The user selects
columns from a Virtual Table to define the output for the Query By
Parameter/Tabular Response (QBP/RTB).<br>
Note that in the case of an HL7-defined query, a specific section of the HL7
Standard will define a Conformance Statement. By contrast, in the case of a
site defined query, the Conformance Statement is written by analysts and
programmers of the Server application/system, and is available to the analysts
and programmers of the Client application/system. <br>
Although the Conformance Statement is a new construct with Version 2.4, it may
also be used with the previous generation queries.
</p>

<h3>
<A NAME="Heading21">5.3.1 Using the Conformance Statement</A></h3>

<p>Critical
to the proper usage of the new query/response pairs is the Conformance
Statement concept. In the absence of a Conformance Statement, the Client might
not be aware of the existence of a query, or might not know how to use it or
what to expect from it.<br>
The Server advertises the existence of, and support for, a query by publishing
a <b><i>Conformance Statement</i></b>. The Conformance Statement identifies the
query, specifies what items can be queried and describes what the response will
look like.<br>
<b>Conformance Statement</b>: A declaration which sets forth the name of the
query supported by the Server, the logical structure of the information that
can be queried, and the logical structure of what can be returned.<br>
A number of examples of Conformance Statements can be found in section 5.9</p>

<h4>
<A NAME="Heading22"> </A></h4>


<h4>
<A NAME="Heading23">5.3.1.1 Query with tabular response example</A></h4>

<p>The
user wishes to know the identity of the patient whose medical record number is
"555444222111".<br>
MSH|^&amp;~\|PCR|GenHosp|MPI||199811201400-0800||QBP^Q40^QBP_Q13|8699|P|2.4||||||||<br>
QPD|Q40^WhoAmI^HL7nnnn|Q0001|555444222111^^^MPI^MR|||19980531|19990531|<br>
RCP|I|<br>
RDF|PatientList^CX^20~PatientName^XPN^48~Mother'sMaidenName^XPN^48~DOB^TS^26~Sex^IS^1~Race^CE^80|<br>
The MPI system returns the following RTB message<br>
MSH|^&amp;~\|MPI|GenHosp|PCR||199811201400-0800||RTB^R40^RTB_R40|ACK9901|P|2.4||||||||<br>
MSA|AA|8699|<br>
QAK|Q0001|OK|Q40^WhoAmI^HL7nnnn|1|<br>
QPD|Q28^WhoAmI^HL7nnnn|Q0001|555444222111^^^MPI^MR|||19980531|19990531|<br>
RDF|PatientList^CX^20~PatientName^XPN^48~Mother'sMaidenName^XPN^48~DOB^TS^26~Sex^IS^1~Race^CE^80|<br>
RDT|555444222111^^^MPI^MR|Everyman^Adam||19600614|M||
</p>

<h4>
<A NAME="Heading24">5.3.1.2 Example of  Conformance Statement with tabular response</A></h4>

<p><center><b>Conformance
Statement</b></center><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Statement ID (Query ID=Z99):
</b></p></TD>
<TD colspan=1 align="left"><p>Z99</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Type:</b></p></TD>
<TD colspan=1 align="left"><p>Query
(or Publish)
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Name:
</b></p></TD>
<TD colspan=1 align="left"><p>Who
Am I
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Trigger (= MSH-9):
</b></p></TD>
<TD colspan=1 align="left"><p>QBP^Z99^QBP_Q13</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Mode:
</b></p></TD>
<TD colspan=1 align="left"><p>Both</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Response
Trigger (= MSH-9):
</b></p></TD>
<TD colspan=1 align="left"><p>RSP^Z84RSP_K13</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Characteristics:
</b></p></TD>
<TD colspan=1 align="left"><p>Returns
response sorted by PatientLastName unless otherwise specified.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Purpose:</b></p></TD>
<TD colspan=1 align="left"><p>Find
the identity of the patient for specified medical record number(s)
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Response
Characteristics:
</b></p></TD>
<TD colspan=1 align="left"><p>Returns
response sorted by PatientLastName unless otherwise specified.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Based
on Segment Pattern:
</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
</TABLE>
<p><br>
</p>
<TABLE>
<TR align="left">
<TD colspan=1 align="left"><p><tt><b><u>QBP^Z99^QBP_Q13</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Query
Grammar:  QBP Message 
</u></b></tt></p></TD>
<TD colspan=1 align="center"><p>Section
Reference
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header Segment
</tt></p></TD>
<TD colspan=1 align="center"><p>2.16.9</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QPD</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Parameter Definition
</tt></p></TD>
<TD colspan=1 align="center"><p>0</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
RDF ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Table
Row Definition Segment
</tt></p></TD>
<TD colspan=1 align="center"><p>5.5.5.6</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>RCP</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Response
Control Parameter
</tt></p></TD>
<TD colspan=1 align="center"><p>5.5.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="center"><p>2.16.4</p></TD>
</TR>
</TABLE>
<p><br>
</p>
<TABLE>
<TR align="left">
<TD colspan=1 align="left"><p><tt><b><u>RSP^Z84RSP_K13</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Response
Grammar:  RTB Message
</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Section
Reference
</u></b></tt></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header Segment
</tt></p></TD>
<TD colspan=1 align="center"><p>2.16.9</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSA</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Acknowledgement
</tt></p></TD>
<TD colspan=1 align="center"><p>2.16.8</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
ERR ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Error</tt></p></TD>
<TD colspan=1 align="center"><p>2.16.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QAK</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Acknowledgement
</tt></p></TD>
<TD colspan=1 align="center"><p>5.4.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QPD</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Parameter Definition
</tt></p></TD>
<TD colspan=1 align="center"><p>0</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
RDF 
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Table
Row Definition Segment
</tt></p></TD>
<TD colspan=1 align="center"><p>5.5.5.6</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 [ { RDT } ]]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Table
Row Data Segment
</tt></p></TD>
<TD colspan=1 align="center"><p>5.5.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="center"><p>2.16.4</p></TD>
</TR>
</TABLE>
<p><b>QPD
Input Parameter Specification</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TH colspan=1 align="left"><p><b>Field
Seq (Query ID=Z99)
</b></p></TH>
<TH colspan=1 align="left"><p><b>Field
Name 
</b></p></TH>
<TH colspan=1 align="left"><p><b>Key/</b><br>
<b>Search
</b></p></TH>
<TH colspan=1 align="left"><p><b>Sort</b></p></TH>
<TH colspan=1 align="left"><p><b>LEN</b></p></TH>
<TH colspan=1 align="left"><p><b>TYPE</b></p></TH>
<TH colspan=1 align="left"><p><b>Opt</b></p></TH>
<TH colspan=1 align="left"><p><b>Rep</b></p></TH>
<TH colspan=1 align="left"><p><b>Match
Op
</b></p></TH>
<TH colspan=1 align="left"><p><b>TBL</b></p></TH>
<TH colspan=1 align="left"><p><b>Segment
Field Name
</b></p></TH>
<TH colspan=1 align="left"><p><b>Service
Identifier Code
</b></p></TH>
<TH colspan=1 align="left"><p><b>Element
Name
</b></p></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>1</p></TD>
<TD colspan=1 align="left"><p>MessageQueryName</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>60</p></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>R</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>2</p></TD>
<TD colspan=1 align="left"><p>QueryTag</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>32</p></TD>
<TD colspan=1 align="left"><p>ST</p></TD>
<TD colspan=1 align="left"><p>R</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>3</p></TD>
<TD colspan=1 align="left"><p>PatientList</p></TD>
<TD colspan=1 align="left"><p>S</p></TD>
<TD colspan=1 align="left"><p>Y</p></TD>
<TD colspan=1 align="left"><p>20</p></TD>
<TD colspan=1 align="left"><p>CX</p></TD>
<TD colspan=1 align="left"><p>O</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID-3</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID-3
Patient  Identifier List
</p></TD>
</TR>
</TABLE>
<p><b>QPD
Input Parameter Field Description and Commentary</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Input
Parameter (Query ID=Z99)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Comp.
Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>DT</b></p></TD>
<TD colspan=1 align="left"><p><b>Description</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>MessageQueryName</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>Must
be valued <b>Z99^WhoAmI^HL7nnnn</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>QueryTag</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ST</p></TD>
<TD colspan=1 align="left"><p>Unique
to each query message instance.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>PatientList</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CX</p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Components:
&lt;ID (ST)&gt; ^ &lt;check digit (ST)&gt; ^ &lt;code identifying the check
digit scheme employed (ID)&gt; ^ &lt; assigning authority (HD)&gt; ^
&lt;identifier type code (IS)&gt; ^ &lt; assigning facility (HD)&gt;
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>The
combination of values for <i>PatientID, and PatientIDAssigningAuthority, </i>
are intended to identify a unique entry on the PATIENT_MASTER table. The
<i>PatientIDTypeCode</i> is useful for further filtering or to supply
uniqueness in the event that the assigning authority may have more than one
coding system. (The PATIENT_MASTER table contains a constraint that prevents
multiple patients from being identified by the same combination of field
values.)  This PATIENT_MASTER entry will be searched against on the
PHARMACY_DISPENSE_TRANSACTION table to retrieve the rows fulfilling the query
conditions.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>If
this field is not valued, all values for this field are considered to be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ID</p></TD>
<TD colspan=1 align="left"><p>ST</p></TD>
<TD colspan=1 align="left"><p>If
this field, PID.3.1, is not valued, all values for this field are considered to
be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Assigning
Authority
</p></TD>
<TD colspan=1 align="left"><p>HD</p></TD>
<TD colspan=1 align="left"><p>If
this field, PID.3.4, is not valued, all values for this field are considered to
be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Identifier
Type Code
</p></TD>
<TD colspan=1 align="left"><p>IS</p></TD>
<TD colspan=1 align="left"><p>If
this field, PID.3.5, is not valued, all values for this field are considered to
be a match.
</p></TD>
</TR>
</TABLE>
<p><b>RCP
Response Control Parameter Field Description and Commentary</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Field
Seq (Query ID=Z99)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Name</b></p></TD>
<TD colspan=1 align="left"><p><b>Component
Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>LEN</b></p></TD>
<TD colspan=1 align="left"><p><b>DT</b></p></TD>
<TD colspan=1 align="left"><p><b>Description</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>1</p></TD>
<TD colspan=1 align="left"><p>Query
Priority
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>1</p></TD>
<TD colspan=1 align="left"><p>ID</p></TD>
<TD colspan=1 align="left"><p>(<b>D</b>)eferred
or (<b>I</b>)mmediate.  Default is <b>I</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>2</p></TD>
<TD colspan=1 align="left"><p>Quantity
Limited Request
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>10</p></TD>
<TD colspan=1 align="left"><p>CQ</p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Quantity</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>NM</p></TD>
<TD colspan=1 align="left"><p>Number
of units (specified by the following component) that will be returned in each
increment of the response.  If no value is given, the entire response will be
returned in a single increment.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Units</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p><b>CH</b>aracters,
<b>LI</b>nes, <b>P</b>a<b>G</b>es, or <b>R</b>ecor<b>D</b>s.  Default is
<b>LI</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>3</p></TD>
<TD colspan=1 align="left"><p>Response
Modality
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>60</p></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p><b>R</b>eal
time or <b>B</b>atch.  Default is <b>R</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>6</p></TD>
<TD colspan=1 align="left"><p>Sort-by
Field
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>256</p></TD>
<TD colspan=1 align="left"><p>SRT</p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Sort-by
Field
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ST</p></TD>
<TD colspan=1 align="left"><p>Segment
field name of an output column by which the response may be sorted.  Must
contain a <b>Y</b> in the Sort column of the output specification table.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Sequencing</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ID</p></TD>
<TD colspan=1 align="left"><p>As
specified in HL7 Table 0397- Sequencing.  Default is <b>A</b>scending.
</p></TD>
</TR>
</TABLE>
<p><b>Output
Specification and Commentary:  Virtual Table</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>ColName
(Query ID=Z99)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Key/</b><br>
<b>Search
</b></p></TD>
<TD colspan=1 align="left"><p><b>Sort</b></p></TD>
<TD colspan=1 align="left"><p><b>LEN</b></p></TD>
<TD colspan=1 align="left"><p><b>TYPE</b></p></TD>
<TD colspan=1 align="left"><p><b>Opt</b></p></TD>
<TD colspan=1 align="left"><p><b>Rep</b></p></TD>
<TD colspan=1 align="left"><p><b>Match
Op
</b></p></TD>
<TD colspan=1 align="left"><p><b>TBL</b></p></TD>
<TD colspan=1 align="left"><p><b>Segment
Field Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>Service
Identifier Code
</b></p></TD>
<TD colspan=1 align="left"><p><b>ElementName</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>PatientList</p></TD>
<TD colspan=1 align="left"><p>S</p></TD>
<TD colspan=1 align="left"><p>Y</p></TD>
<TD colspan=1 align="left"><p>20</p></TD>
<TD colspan=1 align="left"><p>CX</p></TD>
<TD colspan=1 align="left"><p>O</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID.3</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID-3:
Patient  Identifier List
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>PatientName</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>48</p></TD>
<TD colspan=1 align="left"><p>XPN</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID.5</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID-5
Patient Name
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Mother'sMaidenName</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>48</p></TD>
<TD colspan=1 align="left"><p>XPN</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID.6</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID-6
Mother's Maiden Name
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>DOB</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>26</p></TD>
<TD colspan=1 align="left"><p>TS</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID.7</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID-7
Date/Time of Birth
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Sex</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>1</p></TD>
<TD colspan=1 align="left"><p>IS</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID.8</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID-8
Sex
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Race</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>80</p></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID.10</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID-10
Race
</p></TD>
</TR>
</TABLE>
<h3>
<A NAME="Heading25">5.3.2 Formal specification of the conformance statement</A></h3>

<p>The
Conformance Statement contains the following information: <br>
*	<b>Conformance Statement ID</b>: The unique identifier applying to this
query's Conformance Statement.  This value is transmitted as the first
component of <i>QPD-1-Message query name</i>. For sites implementing the
Conformance SIG's Implementation Guide, this value shall also be transmitted in
<i>MSH-21-Conformance statement ID</i>.<br>
*	<b>Formal Query Name</b>: identifies a unique query or publication, e.g.,
PharmacyDispenseHistory.<br>
*	<b>Query Trigger: </b>identifies the trigger event for the query.  Note that
more than one conformance statement may map to the same generic trigger event
(Q10 through Q15).  If a non-generic trigger event is used, it should
correspond to exactly one Conformance Statement.<br>
The use of Q for HL7-standard query trigger events is conventional; another
letter may be used if the supply of Q triggers is exhausted.<br>
The assignment of a trigger event, while mandatory, is intended to facilitate
processing rather than to identify a query uniquely.  A query is uniquely
identified by the value transmitted in <i>QPD-1-Message query name</i>.  This
value must be the same in both the query and response messages, even though the
trigger event for the query differs from the trigger event for the response.
<br>
*	<b>Response Trigger: </b>identifies the unique trigger event for the
response. Note that more than one conformance statement may map to the same
generic trigger event (K10 through K15).  If a non-generic trigger event is
used, it should correspond to exactly one Conformance Statement.<br>
The use of K for HL7-standard response trigger events is conventional; another
letter may be used if the supply of K triggers is exhausted.<br>
*	<b>Query Priority: </b>Specifies if the query is immediate, deferred or
selectable<br>
*	<b>Query Characteristics: </b>Narrative describing general feature of the
query<br>
*	<b>Purpose: </b>Describes intent of query<br>
*	<b>Query Grammar: </b>defines the logical structure of what can be sent by
the Client. The structure of this part of the Conformance Statement is very
similar in appearance to a message syntax.<br>
*	<b>Response Grammar: </b>defines the logical structure of what can be
returned by the Server. The structure of this part of the Conformance Statement
is very similar in appearance to a message syntax with 2 additional columns:
Comment and Support Indicator<br>
*	<b>Data Model</b>:	the logical structure of the information that can be
queried.  It can be thought of as a set of rows or a list of items having the
same format as the Virtual Table structure described in the next section.  This
works for both tabular and segment pattern queries.  A display query can be
considered as orthogonal to the tabular and segment pattern queries and follows
the same input structure. This is not always included in the Conformance
Statement.<br>
*	<b>Input Parameter Field Specification and Commentary:</b> Cites the
allowable parameters that can be passed to the recipient. The structure of this
part of the Conformance Statement is very similar in appearance to an HL7
Segment Attribute Table with several additional columns: ColName, Key/Search,
Sort, MatchOp, SegmentFieldName, and Service Identifier Code.<br>
A QPD Input Parameters table and corresponding explanation table is always
provided.  These tables discuss all the fields of the QPD segment, including
<i>QPD-1-Message query name</i> and <i>QPD-2-Query tag</i>.  If the query is a
Query By Example, additional input parameters and explanation tables are
provided for all the fields that may be populated in the example segments.<br>
*	<b>Response Control: </b>Specifies execution date and time, restrictions on
amount of data, and query modality.  This is not always included in the
Conformance Statement.<br>
*	<b>Output  Specification and Commentary:</b> Used for tabular and display
response. For the tabular response, it specifies the column names that will be
returned. The structure of this part of the Conformance Statement is very
similar in appearance to an Attribute Table with several additional columns:
ColName, Key/Search, Sort, MatchOp, SegmentFieldName, and Service Identifier
Code. For the display response, it describes the format of the data that will
be returned.<br>
Note that in the case of an HL7-defined query, a specific section of the HL7
standard will define a Conformance Statement. The existence of a standard
Conformance Statement for any given query does <b>not</b> mean that a system
must implement this particular query to be conformant to the HL7 Standard.
However, systems that do implement the query must follow the specifications as
given in the Conformance Statement.<br>
Sites that wish to offer queries not specified by the Standard may create their
own Conformance Statements.  By contrast to an HL7-standard query, in the case
of a site defined query, the Conformance Statement is written by the Server,
and is available to the analysts and programmers of the Client system to enable
them to know the exact behavior of the Server.<br>
Although the Conformance statement is a new construct with version 2.4, it may
also be used with the previous generation queries.<br>
Input Parameter Specification and Input Field Description and Commentary are
always included for the QPD segment.  When the Query By Example variant is
used, they are provided for the QBE as well. An Output Specification and
Commentary showing a Virtual Table is provided for queries that accommodate a
tabular response.<br>
For Conformance Statements published in the HL7 Standard, each table includes
the Conformance Statement ID in parentheses in the upper left-hand cell.  This
allows the table to be imported automatically into the HL7 database.</p>

<h4>
<A NAME="Heading26"> </A></h4>


<h4>
<A NAME="Heading27">5.3.2.1 Steps for developing a conformance statement</A></h4>

<p>1)
Before composing the Conformance Statement, express the query in ordinary
English sentences.<br>
2)	Transform the query into a mathematical or pseudo-language statement.  A
syntax such as SQL provides a useful mechanism.<br>
3)	From the pseudo-statement, extract the parameters and the operations upon
the parameters.<br>
4)	Advertise the parameters in the Conformance Statement. <br>
5)	Within the Conformance Statement, explain the operations that will be
performed upon the parameters:  relational conjunctions, equality/inequality,
etc.  Use examples to aid the user in understanding how the query might be
invoked in specific instances.
</p>

<h4>
<A NAME="Heading28">5.3.2.2 Conformance Statement introduction</A></h4>

<p>The
Conformance Statement begins with a table that summarizes the characteristics
and identifying information about the query to which the Conformance Statement
applies.<br>
<center><b>Conformance Statement</b></center><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Statement ID (Query ID=Znn):
</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Type:</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Name:
</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Trigger (= MSH-9):
</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Mode:
</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Response
Trigger (= MSH-9):
</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Characteristics:
</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Purpose:</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Response
Characteristics:
</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Based
on Segment Pattern:
</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
</TABLE>
<p><b>Query
Statement ID</b>: The unique identifier applying to this Conformance Statement.
This value is transmitted as the first component of <i>QPD-1-Message query
name</i>.<br>
<b>Type</b>:  Usually <b>Query</b>, except for publish-and subscribe
Conformance Statements (see Section 5.7.3.1) for which the value should be
<b>Publish</b>.<br>
<b>Query Name</b>: The name corresponding to the identifier in <b>Query
Statement ID</b>.  This value is transmitted as the second component of
<i>QPD-1-Message query name</i>.<br>
<b>Query Trigger (= MSH-9)</b>: The exact value that the Client will transmit
in the <i>MSH-9-Message type</i> field of the query message.<br>
<b>Query Mode</b>: Whether the query may be sent in <b>Real time</b> (including
Bolus) or in <b>Batch</b>; see Section 5.5.5.3.  The value <b>Both</b>
indicates that both real-time/bolus and batch modes are acceptable.<br>
<b>Response Trigger (= MSH-9)</b>: The exact value that the Server will
transmit in the <i>MSH-9-Message type</i> field of the response message.<br>
<b>Query Characteristics</b>: Particular features of this query.  This is free
text intended to help the query implementor in selecting among queries.<br>
<b>Purpose</b>:  The end result that this query is intended to accomplish.
Free text.<br>
<b>Response Characteristics</b>: Particular features of this response.  This is
free text intended to help the query implementor in selecting among queries.<br>
<b>Based on Segment Pattern</b>: For queries that return a segment pattern
response, this is the (non-query response) message type upon which the segment
pattern is based.
</p>

<h4>
<A NAME="Heading29">5.3.2.3 Query grammar</A></h4>

<p>The
Conformance Statement shows a query grammar.  This is a brief model of the
segments used in the query message.  <br>
</p>
<TABLE>
<TR align="left">
<TD colspan=1 align="left"><p><tt><b><u>QBP^Znn^QBP_Qnn</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Query
Grammar:  QBP Message 
</u></b></tt></p></TD>
<TD colspan=1 align="center"><p>Section
Reference
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header Segment
</tt></p></TD>
<TD colspan=1 align="center"><p>2.16.9</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QPD</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Parameter Definition
</tt></p></TD>

<TD colspan=1 align="center"><p>0</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
RDF ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Table
Row Definition Segment
</tt></p></TD>
<TD colspan=1 align="center"><p>5.5.5.6</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>RCP</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Response
Control Parameter
</tt></p></TD>
<TD colspan=1 align="center"><p>5.5.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="center"><p>2.16.4</p></TD>
</TR>
</TABLE>
<p><b>Query
Grammar</b>: This and the following column specify the HL7 code name and full
name of each segment sent in the query.  Braces specify that the segment or
segment group is repeatable; brackets specify the optionality of the segment or
segment group.<br>
<b>Section Reference</b>: Specifies where in the standard further information
about the segment can be found.<br>
When the Query By Example variant is used, the Query Grammar shows the segments
that may be used to transmit parameters and the order in which they appear.
Segments used to transmit parameters are always sent immediately following the
QPD segment.
</p>

<h4>
<A NAME="Heading30">5.3.2.4 Response grammar</A></h4>

<p>The
Conformance Statement always shows a response grammar.  If the query response
is segment pattern, the response grammar should specify the segments, order,
optionality, and repetition as do message specifications within the HL7
Standard.<br>
</p>
<TABLE>
<TR align="left">
<TH colspan=1 align="left"><p><tt><b><u>RTB^Znn^RTB_Knn</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Response
Grammar:  Widget Dispense Message
</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Group
Control
</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Comment</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Support
Indicator
</u></b></tt></p></TH>
<TH><p>Sec
Ref
</p></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.9</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSA</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Acknowledgement
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.8</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[ERR]</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Error</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QAK</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Acknowledgement
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>5.5.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QPD</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Parameter Definition
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>0</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>...</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>...</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.4</p></TD>
</TR>
</TABLE>
<p><b>Response
Grammar</b>: This and the following column specify the HL7 code name and full
name of each segment returned in the response.  Braces specify that the segment
or segment group is repeatable; brackets specify the optionality of the segment
or segment group.<br>
For Conformance Statements published in the HL7 Standard,, the Response Grammar
table includes the Conformance Statement ID in parentheses in the upper
left-hand cell.  This allows the table to be imported automatically into the
HL7 database.<br>
<b>Message Description</b>: The full text name of the segment.<br>
<b>Group Control</b>: The name of a segment group.<br>
<b>Comment</b>: Specifies in English (1) the opening or closing of a segment
group and (2) the relevance of the segment in a Hit Count. (Only positive value
is noted)<br>
<b>Support Indicator</b>: Allows the Server to indicate (1) whether an optional
segment or segment group will be supported or (2) that the segment or segment
group is dependent on an input parameter. The default understanding is that if
the Server knows the information, it will be sent.<br>
<b>Sec Ref</b>:	 Specifies where in the standard further information about the
segment can be found.
</p>

<h4>
<A NAME="Heading31">5.3.2.5 Response grammar for display response</A></h4>

<p>The
response grammar for a display response lists the segment names, descriptions,
and section references for the segments to be returned by the Server, as
described in the previous section.  In addition, the print text is displayed,
as in the following example.<br>
</p>
<TABLE>
<TR align="left">
<TH colspan=1 align="left"><p><tt><b><u>RDY^Znn^RDY_K15</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Response
Grammar:  Dispense History
</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Group
Control
</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Comment</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Support
Indicator
</u></b></tt></p></TH>
<TH><p>Sec
Ref
</p></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.9</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSA</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Acknowledgement
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.8</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[ERR]</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Error</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QAK</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Acknowledgement
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>5.5.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QPD</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Parameter Definition
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>0</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[{
DSP }]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Display
Data
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>5.5.1</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.4</p></TD>
</TR>
</TABLE>
<p><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><tt><b>The
data will display as follows: (Query ID=Z99)
</b></tt></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>DSP||
       GENERAL HOSPITAL - PHARMACY DEPARTMENT          DATE:mm-dd-yy
</tt></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>DSP||
       DISPENSE HISTORY REPORT                               PAGE  n
</tt></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>DSP||MRN
         Patient Name       MEDICATION DISPENSED        DISP-DATE
</tt></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>DSP||XXXXX
      XXXXXx, XXXXX       XXXXXXXXXXXXXXXX              mm/dd/ccyy
</tt></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>...</tt></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>DSP||
      &lt;&lt; END OF REPORT &gt;&gt;
</tt></p></TD>
</TR>
</TABLE>
<h4>
<A NAME="Heading32">5.3.2.6 QPD input parameter specification</A></h4>

<p>The
Input Parameter Specification section of the Conformance Statement looks very
much like an attribute table and is followed by a commentary on the fields.
Each row of the QPD Input Parameter Specification specifies one user parameter
within the QPD segment.  Values for user parameters are transmitted in
successive fields of the QPD segment, beginning at QPD-3.<br>
When the QSC variant is employed (see Section 5.2.5.1.3), a complex query
expression may be used as the only input parameter, or may be combined with
other (simple) input parameters.<br>
<b>QPD Input Parameter Specification</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TH colspan=1 align="left"><p><b>Field
Seq (Query ID=Z99)
</b></p></TH>
<TH colspan=1 align="left"><p><b>Name</b></p></TH>
<TH colspan=1 align="left"><p><b>Key/</b><br>
<b>Search
</b></p></TH>
<TH colspan=1 align="left"><p><b>Sort</b></p></TH>
<TH colspan=1 align="left"><p><b>LEN</b></p></TH>
<TH colspan=1 align="left"><p><b>TYPE</b></p></TH>
<TH colspan=1 align="left"><p><b>Opt</b></p></TH>
<TH colspan=1 align="left"><p><b>Rep</b></p></TH>
<TH colspan=1 align="left"><p><b>Match
Op
</b></p></TH>
<TH colspan=1 align="left"><p><b>TBL</b></p></TH>
<TH colspan=1 align="left"><p><b>Segment
Field Name
</b></p></TH>
<TH colspan=1 align="left"><p><b>Service
Identifier Code
</b></p></TH>
<TH colspan=1 align="left"><p><b>Element
Name
</b></p></TH>
</TR>
<TR align="left">
<TH colspan=1 align="left"><BR></TH>
<TH colspan=1 align="left"><BR></TH>
<TH colspan=1 align="left"><BR></TH>
<TH colspan=1 align="left"><BR></TH>
<TH colspan=1 align="left"><BR></TH>
<TH colspan=1 align="left"><BR></TH>
<TH colspan=1 align="left"><BR></TH>
<TH colspan=1 align="left"><BR></TH>
<TH colspan=1 align="left"><BR></TH>
<TH colspan=1 align="left"><BR></TH>
<TH colspan=1 align="left"><BR></TH>
<TH colspan=1 align="left"><BR></TH>
<TH colspan=1 align="left"><BR></TH>
</TR>
</TABLE>
<p>The
following is a description of the attributes of the above table.   <br>
<b>Field Seq</b>: The ordinal number of the element being discussed.  Sequence
1 is <u>always</u> Message Query Name, and sequence 2 is <u>always</u> Query
Tag.  Sequence 3 and above are reserved for user parameters.<br>
<b>Name</b>:  the user-defined name for the element as will be used in the
query.  Example: MedicationDispensed. When <b>Name</b> is derived from an
actual HL7 element (segment and field), the segment field name and element name
appear in the columns headed by those names.  When <b>Name</b> is not derived
from an actual HL7 element (segment and field), the source system defines the
values they expect in this field.<br>
For Conformance Statements published in the HL7 Standard, the Input Parameter
Specification table includes the Conformance Statement ID in parentheses in the
upper left-hand cell.  This allows the table to be imported automatically into
the HL7 database.<br>
<b>Key/Search</b>: This field identifies which element is the key and which
elements are searchable.  The key field is designated by a value of `K'.  A
value of `S' designates fields upon which an indexed search can be performed by
the source.  `L' designates non-indexed fields. (Note that searching on a
non-indexed field requires the Server to perform a linear scan of the data
base.)  If this column is left blank, the field may not be searched.<br>
<b>Sort</b>: valued as "Y" if the output of the query can be sorted on this
field.  This column should only be valued in Virtual Tables that are used as
output specifications.<br>
<b>Len</b>:  the maximum field length that will be transmitted by the
source.<br>
<b>Type</b>: the data type of this user parameter.  The values available for
this field are described in Section 2.8 of the <i>Health Level Seven
Standard</i>.  Data types QIP and QSC are available for transmitting complex
user parameters.<br>
<b>Opt</b>:  defines whether the field is required (`R'), optional (`O'),
conditionally required (`C'), or required for backward compatibility (`B').<br>
<b>Rep</b>:  valued as `Y' if the field may repeat (i.e., be multiply
valued).<br>
<b>Match Op</b>:  the relational operator that will be applied against the
value that the querying system specifies for this field.<br>
<b>Note:</b>	These are defined by <u>HL7 Table 0209 - Relatio
nal
operator</u>, a component of the QSC data type<br>
<b>TBL</b>:  identifies the HL7 table from which the values are derived.<br>
<b>Segment Field Name</b>: identifies the HL7 segment and field from which the
new definition is derived. This field will be blank if the Name is NOT derived
from an actual HL7 segment and field.<br>
<b>Service Identifier Code: </b>a value of data type CE that contains the
applicable LOINC code, if it exists, or the applicable HL7 code, if it exists,
if no Segment Field Name has been identified.  If a Segment Field Name has been
identified, this field is not populated.<br>
<b>Element Name</b>: the name of the element identified by<b> </b>Segment Field
Name.  This may also be a user-defined `Z'-element.
</p>

<h4>
<A NAME="Heading33">5.3.2.7 QPD input parameter field description and commentary</A></h4>

<p>The
QPD Input Parameter Field Description and Commentary provides a more detailed
description of each of the fields transmitted in the QPD segment. <br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Input
Parameter (Query ID=Znn)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Comp.
Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>DT</b></p></TD>
<TD colspan=1 align="left"><p><b>Description</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>MessageQueryName</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>Must
be valued <b>Z99^WhoAmI^HL7nnnn</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>QueryTag</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ST</p></TD>
<TD colspan=1 align="left"><p>Unique
to each query message instance.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>InputItem...</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CX</p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
</TABLE>
<p><b>Input
Parameter</b>: The name of the field whose value is being transmitted.<br>
<b>Comp. Name</b>: When the <b>Input Parameter</b> is of a composite data type
(<i>e.g.,</i> XPN), this is the name of an individual component of the
composite input parameter.  Only those components that may be valued should be
listed in this column.<br>
<b>DT</b>:  The data type of the parameter or component.<br>
<b>Description</b>:  A narrative description of the parameter or component and
how it is to be used.
</p>

<h4>
<A NAME="Heading34">5.3.2.8 QBE input parameter specification</A></h4>

<p>In
the Query By Example variant, discussed below in Section 5.9.7, "Query by
example (QBP) / tabular response (RTB)," the Conformance Statement may specify
that the client may use fields within actual message segments, such as the PID
segment, to transmit parameter information.  Where this is permitted, the
Conformance Statement includes a "QBE Input Parameter Specification" table to
specify which fields may be used to transmit the parameters.<br>
<b>QBE Input Parameter Specification</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TH colspan=1 align="left"><p><b>Segment
Field Name (Query ID=Z99)
</b></p></TH>
<TH colspan=1 align="left"><p><b>Name</b></p></TH>
<TH colspan=1 align="left"><p><b>Key/</b><br>
<b>Search
</b></p></TH>
<TH colspan=1 align="left"><p><b>Sort</b></p></TH>
<TH colspan=1 align="left"><p><b>LEN</b></p></TH>
<TH colspan=1 align="left"><p><b>TYPE</b></p></TH>
<TH colspan=1 align="left"><p><b>Opt</b></p></TH>
<TH colspan=1 align="left"><p><b>Rep</b></p></TH>
<TH colspan=1 align="left"><p><b>Match
Op
</b></p></TH>
<TH colspan=1 align="left"><p><b>TBL</b></p></TH>
<TH colspan=1 align="left"><p><b>Service
Identifier Code
</b></p></TH>
<TH colspan=1 align="left"><p><b>Element
Name
</b></p></TH>
</TR>
<TR align="left">
<TH colspan=1 align="left"><BR></TH>
<TH colspan=1 align="left"><BR></TH>
<TH colspan=1 align="left"><BR></TH>
<TH colspan=1 align="left"><BR></TH>
<TH colspan=1 align="left"><BR></TH>
<TH colspan=1 align="left"><BR></TH>
<TH colspan=1 align="left"><BR></TH>
<TH colspan=1 align="left"><BR></TH>
<TH colspan=1 align="left"><BR></TH>
<TH colspan=1 align="left"><BR></TH>
<TH colspan=1 align="left"><BR></TH>
<TH colspan=1 align="left"><BR></TH>
</TR>
</TABLE>
<p>Fields
are indicated by their actual Segment Field Name, which specifies both segment
and position.  Except for this distinguishing feature, the remaining columns in
this table are identical in meaning to their counterparts in the "QPD input
parameter specification" in Section 5.3.2.6 above.<br>
Each row of the QBE Input Parameter Specification specifies one field that may
be used to transmit user parameters within the example segment(s).
</p>

<h4>
<A NAME="Heading35">5.3.2.9 QBE input parameter field description and commentary</A></h4>

<p>The
QPD Input Parameter Field Description and Commentary provides a more detailed
description of each of the fields transmitted in the example segments sent in a
Query By Example. <br>
<b>QBE Input Parameter Field Description and Commentary</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Input
Parameter (Query ID=Znn)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Comp.
Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>DT</b></p></TD>
<TD colspan=1 align="left"><p><b>Description</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
</TABLE>
<p>Fields
are indicated by their actual Segment Field Name, which specifies both segment
and position.  Except for this distinguishing feature, the remaining columns in
this table are identical in meaning to their counterparts in the "QPD input
parameter field description and commentary" in Section 5.3.2.7 above.
</p>

<h4>
<A NAME="Heading36">5.3.2.10 RCP input parameter field description and commentary</A></h4>

<p>The
RCP Input Parameter Field Description and Commentary provides a more detailed
description of each of the fields transmitted in the RCP (Response Control
Parameters) segment. <br>
<b>RCP Response Control Parameter Field Description and Commentary</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Field
Seq (Query ID=Znn)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Name</b></p></TD>
<TD colspan=1 align="left"><p><b>Component
Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>LEN</b></p></TD>
<TD colspan=1 align="left"><p><b>DT</b></p></TD>
<TD colspan=1 align="left"><p><b>Description</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
</TABLE>
<p><b>Field
Seq</b>: The position within the RCP segment that the field occupies.<br>
<b>Name</b>:  The name of the field whose value is being transmitted.<br>
<b>Component Name</b>: When the field referenced by <b>Name</b> is of a
composite data type (<i>e.g.,</i> XPN), this is the name of an individual
component of the composite input parameter.  Only those components that may be
valued should be listed in this column.<br>
<b>LEN</b>:  The maximum length of the field.<br>
<b>DT</b>:  The data type of the parameter or component.<br>
<b>Description</b>:  A narrative description of the parameter or component and
how it is to be used.
</p>

<h4>
<A NAME="Heading37">5.3.2.11 Input specification:  virtual table</A></h4>

<p>When
the QSC variant is in use, the Conformance Statement includes a Virtual Table
specification listing the fields that the Client may include in the complex
expression parameter. <br>
<b>Input Specification: Virtual Table</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>ColName
(Query ID=Znn)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Key/</b><br>
<b>Search
</b></p></TD>
<TD colspan=1 align="left"><p><b>Sort</b></p></TD>
<TD colspan=1 align="left"><p><b>LEN</b></p></TD>
<TD colspan=1 align="left"><p><b>TYPE</b></p></TD>
<TD colspan=1 align="left"><p><b>Opt</b></p></TD>
<TD colspan=1 align="left"><p><b>Rep</b></p></TD>
<TD colspan=1 align="left"><p><b>Match
Op
</b></p></TD>
<TD colspan=1 align="left"><p><b>TBL</b></p></TD>
<TD colspan=1 align="left"><p><b>Segment
Field Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>Service
Identifier Code
</b></p></TD>
<TD colspan=1 align="left"><p><b>ElementName</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
</TABLE>
<p>The
<b>ColName</b> column identifies each field name that the Client may include in
the complex query expression.  Other columns in this table are defined as in
Section 5.3.2.6 above.<br>
When both the QSC variant and a tabular response are specified, this table is
labeled "Input/Output Specification: Virtual Table" and no separate output
specification is provided.
</p>

<h4>
<A NAME="Heading38">5.3.2.12 Virtual table field description and commentary</A></h4>

<p>The
Virtual Table Field Description and Commentary provides a more detailed
description of each of the fields listed in the Virtual Table.<br>
<b>Virtual Table Field Description and Commentary</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>ColName
(Query ID=Znn)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Comp.
Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>DT</b></p></TD>
<TD colspan=1 align="left"><p><b>Description</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
</TABLE>
<p><b>ColName</b>:
 The name used to identify the column, or field, in the complex expression.<br>
<b>Comp. Name</b>:  When the <b>ColName</b> is of a composite data type
(<i>e.g.,</i> XPN), this is the name of an individual component of the column.
Only those components that may be valued should be listed.<br>
When specifying a field in the complex expression, both the <b>ColName</b> and
<b>Comp. Name</b> attributes should be sent if only a single component is being
identified.  For instance, <b>PatientList.ID</b> would specify the ID component
of the <b>PatientList</b> field.<br>
<b>DT</b>:  The data type of the field or component.<br>
<b>Description</b>:  A narrative description of the field or component and how
it is to be used.
</p>

<h4>
<A NAME="Heading39">5.3.2.13 Output specification for tabular response</A></h4>

<p>The
output specification for the tabular response consists of the Virtual Table
description, i.e., the columns and rows. It has the same columns as the input
specification, but the rows reflect all of the available rows in the table, not
just those that can be filtered upon input.<br>
<b>Output Specification and Commentary:  Virtual Table</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>ColName
(Query ID=Z99)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Key/</b><br>
<b>Search
</b></p></TD>
<TD colspan=1 align="left"><p><b>Sort</b></p></TD>
<TD colspan=1 align="left"><p><b>LEN</b></p></TD>
<TD colspan=1 align="left"><p><b>TYPE</b></p></TD>
<TD colspan=1 align="left"><p><b>Opt</b></p></TD>
<TD colspan=1 align="left"><p><b>Rep</b></p></TD>
<TD colspan=1 align="left"><p><b>Match
Op
</b></p></TD>
<TD colspan=1 align="left"><p><b>TBL</b></p></TD>
<TD colspan=1 align="left"><p><b>Segment
Field Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>Service
Identifier Code
</b></p></TD>
<TD colspan=1 align="left"><p><b>ElementName</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
</TABLE>
<p>The
usage of the columns in this table is as described in Section 5.2.2.2, "Input
Parameter Specification."  Note that the Key/Search and Match Op fields are
only meaningful when a virtual table is used in the input specification (QSC
variant).<br>
When the QSC variant is in use, the "Input/Output Specification and Commentary"
virtual table is used for selection of output fields.  No separate table is
specified for output.
</p>

<h3>
<A NAME="Heading40">5.3.3 Conformance statement templates</A></h3>


<h4>
<A NAME="Heading41"> </A></h4>


<h4>
<A NAME="Heading42">5.3.3.1 Conformance statement template for query with tabular response</A></h4>

<p><center><b>Conformance
Statement</b></center><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Statement ID (Query ID=Znn):
</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Type:</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Name:
</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Trigger (= MSH-9):
</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Mode:
</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Response
Trigger (= MSH-9):
</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Characteristics:
</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Purpose:</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Response
Characteristics:
</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Based
on Segment Pattern:
</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
</TABLE>
<p><br>
</p>
<TABLE>
<TR align="left">
<TD colspan=1 align="left"><p><tt><b><u>QBP^Znn^QBP_Q13</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Query
Grammar:  QBP Message 
</u></b></tt></p></TD>
<TD colspan=1 align="center"><p>Section
Reference
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p>
<BR></TD>
<TD colspan=1 align="left"><p><tt>Message
Header Segment
</tt></p></TD>
<TD colspan=1 align="center"><p>2.16.9</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QPD</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Parameter Definition
</tt></p></TD>
<TD colspan=1 align="center"><p>0</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
RDF ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Table
Row Definition Segment
</tt></p></TD>
<TD colspan=1 align="center"><p>5.5.5.6</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>RCP</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Response
Control Parameter
</tt></p></TD>
<TD colspan=1 align="center"><p>5.5.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="center"><p>2.16.4</p></TD>
</TR>
</TABLE>
<p><br>
</p>
<TABLE>
<TR align="left">
<TD colspan=1 align="left"><p><tt><b><u>RTB^Znn^QBP_K13</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Response
Grammar:  RTB Message 
</u></b></tt></p></TD>
<TD colspan=1 align="center"><p>Section
Reference
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header Segment
</tt></p></TD>
<TD colspan=1 align="center"><p>2.16.9</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSA</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Acknowledgement
</tt></p></TD>
<TD colspan=1 align="center"><p>2.16.8</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
ERR ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Error</tt></p></TD>
<TD colspan=1 align="center"><p>2.16.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QAK</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Acknowledgement
</tt></p></TD>
<TD colspan=1 align="center"><p>5.4.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QPD</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Parameter Definition
</tt></p></TD>
<TD colspan=1 align="center"><p>0</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
RDF 
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Table
Row Definition Segment
</tt></p></TD>
<TD colspan=1 align="center"><p>5.5.5.6</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 [ { RDT } ]]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Table
Row Data Segment
</tt></p></TD>
<TD colspan=1 align="center"><p>5.5.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="center"><p>2.16.4</p></TD>
</TR>
</TABLE>
<p><b>QPD
Input Parameter Specification</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TH colspan=1 align="left"><p><b>Field
Seq (Query ID=Znn)
</b></p></TH>
<TH colspan=1 align="left"><p><b>Name</b></p></TH>
<TH colspan=1 align="left"><p><b>Key/</b><br>
<b>Search
</b></p></TH>
<TH colspan=1 align="left"><p><b>Sort</b></p></TH>
<TH colspan=1 align="left"><p><b>LEN</b></p></TH>
<TH colspan=1 align="left"><p><b>TYPE</b></p></TH>
<TH colspan=1 align="left"><p><b>Opt</b></p></TH>
<TH colspan=1 align="left"><p><b>Rep</b></p></TH>
<TH colspan=1 align="left"><p><b>Match
Op
</b></p></TH>
<TH colspan=1 align="left"><p><b>TBL</b></p></TH>
<TH colspan=1 align="left"><p><b>Segment
Field Name
</b></p></TH>
<TH colspan=1 align="left"><p><b>Service
Identifier Code
</b></p></TH>
<TH colspan=1 align="left"><p><b>Element
Name
</b></p></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>1</p></TD>
<TD colspan=1 align="left"><p>MessageQueryName</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>60</p></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>R</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>2</p></TD>
<TD colspan=1 align="left"><p>QueryTag</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>32</p></TD>
<TD colspan=1 align="left"><p>ST</p></TD>
<TD colspan=1 align="left"><p>R</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>3</b></p></TD>
<TD colspan=1 align="left"><p><b>InputItem
. . .
</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
</TABLE>
<p><b>QPD
Input Parameter Field Description and Commentary</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Input
Parameter (Query ID=Znn)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Comp.
Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>DT</b></p></TD>
<TD colspan=1 align="left"><p><b>Description</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>MessageQueryName</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>Must
be valued <b>Znn^&lt;query name&gt;^HL7nnnn</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>QueryTag</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ST</p></TD>
<TD colspan=1 align="left"><p>Unique
to each query message instance.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>InputItem1</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>DataType</p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Components:
(if applicable)
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>(Description)</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>(Valuation
note)
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><b>Component1</b>
(if applicable)
</p></TD>
<TD colspan=1 align="left"><p>DataType</p></TD>
<TD colspan=1 align="left"><p>(Valuation
note)
</p></TD>
</TR>
</TABLE>
<p>[The
following table is used only for the Complex Expression (QSC) variant.]<br>
<b>Input Specification: Virtual Table</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>ColName
(Query ID=Znn)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Key/</b><br>
<b>Search
</b></p></TD>
<TD colspan=1 align="left"><p><b>Sort</b></p></TD>
<TD colspan=1 align="left"><p><b>LEN</b></p></TD>
<TD colspan=1 align="left"><p><b>TYPE</b></p></TD>
<TD colspan=1 align="left"><p><b>Opt</b></p></TD>
<TD colspan=1 align="left"><p><b>Rep</b></p></TD>
<TD colspan=1 align="left"><p><b>Match
Op
</b></p></TD>
<TD colspan=1 align="left"><p><b>TBL</b></p></TD>
<TD colspan=1 align="left"><p><b>Segment
Field Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>Service
Identifier Code
</b></p></TD>
<TD colspan=1 align="left"><p><b>ElementName</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
</TABLE>
<p>[The
following table is used only for the Complex Expression (QSC) variant.]<br>
<b>Virtual Table Field Description and Commentary</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>ColName
(Query ID=Znn)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Comp.
Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>DT</b></p></TD>
<TD colspan=1 align="left"><p><b>Description</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
</TABLE>
<p>[The
following table is used only for the Query By Example variant.]<br>
<b>QBE Input Parameter Specification</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Segment
Field Name (Query ID=Znn)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Name</b></p></TD>
<TD colspan=1 align="left"><p><b>Key/</b><br>
<b>Search
</b></p></TD>
<TD colspan=1 align="left"><p><b>Sort</b></p></TD>
<TD colspan=1 align="left"><p><b>LEN</b></p></TD>
<TD colspan=1 align="left"><p><b>TYPE</b></p></TD>
<TD colspan=1 align="left"><p><b>Opt</b></p></TD>
<TD colspan=1 align="left"><p><b>Rep</b></p></TD>
<TD colspan=1 align="left"><p><b>Match
Op
</b></p></TD>
<TD colspan=1 align="left"><p><b>TBL</b></p></TD>
<TD colspan=1 align="left"><p><b>Service
Identifier Code
</b></p></TD>
<TD colspan=1 align="left"><p><b>ElementName</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
</TABLE>
<p>[The
following table is used only for the Query By Example (QBE) variant.]<br>
<b>QBE Input Parameter Field Description and Commentary</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Input
Parameter (Query ID=Znn)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Comp.
Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>DT</b></p></TD>
<TD colspan=1 align="left"><p><b>Description</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
</TABLE>
<p><b>RCP
Response Control Parameter Field Description and Commentary</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Field
Seq (Query ID=Znn)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Name</b></p></TD>
<TD colspan=1 align="left"><p><b>Component
Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>LEN</b></p></TD>
<TD colspan=1 align="left"><p><b>DT</b></p></TD>
<TD colspan=1 align="left"><p><b>Description</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
</TABLE>
<p><b>Output
Specification and Commentary:  Virtual Table</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>ColName
(Query ID=Znn)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Key/</b><br>
<b>Search
</b></p></TD>
<TD colspan=1 align="left"><p><b>Sort</b></p></TD>
<TD colspan=1 align="left"><p><b>LEN</b></p></TD>
<TD colspan=1 align="left"><p><b>TYPE</b></p></TD>
<TD colspan=1 align="left"><p><b>Opt</b></p></TD>
<TD colspan=1 align="left"><p><b>Rep</b></p></TD>
<TD colspan=1 align="left"><p><b>Match
Op
</b></p></TD>
<TD colspan=1 align="left"><p><b>TBL</b></p></TD>
<TD colspan=1 align="left"><p><b>Segment
Field Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>Service
Identifier Code
</b></p></TD>
<TD colspan=1 align="left"><p><b>ElementName</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
</TABLE>
<h4>
<A NAME="Heading43">5.3.3.2 Conformance statement template for query with segment pattern response</A></h4>

<p><center><b>Conformance
Statement</b></center><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Statement ID (Query ID=Znn):
</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Type:</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Name:
</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Trigger (= MSH-9):
</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Mode:
</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Response
Trigger (= MSH-9):
</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Characteristics:
</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Purpose:</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Response
Characteristics:
</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Based
on Segment Pattern:
</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
</TABLE>
<p><br>
</p>
<TABLE>
<TR align="left">
<TD colspan=1 align="left"><p><tt><b><u>QBP^Znn^QBP_Q11</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Query
Grammar:  QBP Message 
</u></b></tt></p></TD>
<TD colspan=1 align="center"><p>Section
Reference
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header Segment
</tt></p></TD>
<TD colspan=1 align="center"><p>2.16.9</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QPD</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Parameter Definition
</tt></p></TD>
<TD colspan=1 align="center"><p>0</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>RCP</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Response
Control Parameter
</tt></p></TD>
<TD colspan=1 align="center"><p>5.5.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="center"><p>2.16.4</p></TD>
</TR>
</TABLE>
<p><br>
</p>
<TABLE>
<TR align="left">
<TH colspan=1 align="left"><p><tt><b><u>RSP^Znn^RSP_K11</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Response
Grammar:  RSP Message
</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Group
Control
</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Comment</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Support
Indicator
</u></b></tt></p></TH>
<TH><p>Sec
Ref
</p></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.9</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSA</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Acknowledgement
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.8</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[ERR]</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Error</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QAK</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Acknowledgement
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>5.5.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QPD</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Parameter Definition
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>0</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[...]</tt></p></TD>
<TD colspan=1 align="left"><p><tt>(additional
segments according to the data to be produced)
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.4</p></TD>
</TR>
</TABLE>
<p><b>QPD
Input Parameter Specification</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TH colspan=1 align="left"><p><b>Field
Seq (Query ID=Znn)
</b></p></TH>
<TH colspan=1 align="left"><p><b>Col
Name
</b></p></TH>
<TH colspan=1 align="left"><p><b>Key/</b><br>
<b>Search
</b></p></TH>
<TH colspan=1 align="left"><p><b>Sort</b></p></TH>
<TH colspan=1 align="left"><p><b>LEN</b></p></TH>
<TH colspan=1 align="left"><p><b>TYPE</b></p></TH>
<TH colspan=1 align="left"><p><b>Opt</b></p></TH>
<TH colspan=1 align="left"><p><b>Rep</b></p></TH>
<TH colspan=1 align="left"><p><b>Match
Op
</b></p></TH>
<TH colspan=1 align="left"><p><b>TBL</b></p></TH>
<TH colspan=1 align="left"><p><b>Segment
Field Name
</b></p></TH>
<TH colspan=1 align="left"><p><b>Service
Identifier Code
</b></p></TH>
<TH colspan=1 align="left"><p><b>Element
Name
</b></p></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>1</p></TD>
<TD colspan=1 align="left"><p>MessageQueryName</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>60</p></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>R</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>2</p></TD>
<TD colspan=1 align="left"><p>QueryTag</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>32</p></TD>
<TD colspan=1 align="left"><p>ST</p></TD>
<TD colspan=1 align="left"><p>R</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>3</p></TD>
<TD colspan=1 align="left"><p>InputItem
. . .
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
</TABLE>
<p><b>QPD
Input Parameter Field Description and Commentary</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Input
Parameter (Query ID=Znn)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Comp.
Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>DT</b></p></TD>
<TD colspan=1 align="left"><p><b>Description</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>MessageQueryName</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>Must
be valued <b>Znn^&lt;query name&gt;^HL7nnnn</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>QueryTag</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ST</p></TD>
<TD colspan=1 align="left"><p>Unique
to each query message instance.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>InputItem1</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>DataType</p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Components:
(if applicable)
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>(Description)</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>(Valuation
note)
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><b>Component1</b>
(if applicable)
</p></TD>
<TD colspan=1 align="left"><p>DataType</p></TD>
<TD colspan=1 align="left"><p>(Valuation
note)
</p></TD>
</TR>
</TABLE>
<p>[The
following table is used only for the Complex Expression (QSC) variant.]<br>
<b>Input Specification: Virtual Table</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>ColName
(Query ID=Znn)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Key/</b><br>
<b>Search
</b></p></TD>
<TD colspan=1 align="left"><p><b>Sort</b></p></TD>
<TD colspan=1 align="left"><p><b>LEN</b></p></TD>
<TD colspan=1 align="left"><p><b>TYPE</b></p></TD>
<TD colspan=1 align="left"><p><b>Opt</b></p></TD>
<TD colspan=1 align="left"><p><b>Rep</b></p></TD>
<TD colspan=1 align="left"><p><b>Match
Op
</b></p></TD>
<TD colspan=1 align="left"><p><b>TBL</b></p></TD>
<TD colspan=1 align="left"><p><b>Segment
Field Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>Service
Identifier Code
</b></p></TD>
<TD colspan=1 align="left"><p><b>ElementName</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
</TABLE>
<p>[The
following table is used only for the Complex Expression (QSC) variant.]<br>
<b>Virtual Table Field Description and Commentary</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>ColName
(Query ID=Znn)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Comp.
Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>DT</b></p></TD>
<TD colspan=1 align="left"><p><b>Description</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
</TABLE>
<p>[The
following table is used only for the Query By Example (QBE) variant.]<br>
<b>QBE Input Parameter Specification</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Segment
Field Name (Query ID=Znn)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Name</b></p></TD>
<TD colspan=1 align="left"><p><b>Key/</b><br>
<b>Search
</b></p></TD>
<TD colspan=1 align="left"><p><b>Sort</b></p></TD>
<TD colspan=1 align="left"><p><b>LEN</b></p></TD>
<TD colspan=1 align="left"><p><b>TYPE</b></p></TD>
<TD colspan=1 align="left"><p><b>Opt</b></p></TD>
<TD colspan=1 align="left"><p><b>Rep</b></p></TD>
<TD colspan=1 align="left"><p><b>Match
Op
</b></p></TD>
<TD colspan=1 align="left"><p><b>TBL</b></p></TD>
<TD colspan=1 align="left"><p><b>Service
Identifier Code
</b></p></TD>
<TD colspan=1 align="left"><p><b>ElementName</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
</TABLE>
<p>[The
following table is used only for the Query By Example variant.]<br>
<b>QBE Input Parameter Field Description and Commentary</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Input
Parameter (Query ID=Znn)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Comp.
Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>DT</b></p></TD>
<TD colspan=1 align="left"><p><b>Description</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
</TABLE>
<p><b>RCP
Response Control Parameter Field Description and Commentary</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Field
Seq (Query ID=Znn)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Name</b></p></TD>
<TD colspan=1 align="left"><p><b>Component
Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>LEN</b></p></TD>
<TD colspan=1 align="left"><p><b>DT</b></p></TD>
<TD colspan=1 align="left"><p><b>Description</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
</TABLE>
<h4>
<A NAME="Heading44">5.3.3.3 Conformance statement for query with display response</A></h4>

<p><center><b>Conformance
Statement</b></center><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Statement ID (Query ID=Znn):
</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Type:</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Name:
</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Trigger (= MSH-9):
</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Mode:
</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Response
Trigger (= MSH-9):
</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Characteristics:
</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Purpose:</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Response
Characteristics:
</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Based
on Segment Pattern:
</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
</TABLE>
<p><br>
</p>
<TABLE>
<TR align="left">
<TD colspan=1 align="left"><p><tt><b><u>QBP^Znn^QBP_Q15</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Query
Grammar:  QBP Message 
</u></b></tt></p></TD>
<TD colspan=1 align="center"><p>Section
Reference
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header Segment
</tt></p></TD>
<TD colspan=1 align="center"><p>2.16.9</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QPD</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Parameter Definition
</tt></p></TD>
<TD colspan=1 align="center"><p>0</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>RCP</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Response
Control Parameter
</tt></p></TD>
<TD colspan=1 align="center"><p>5.5.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="center"><p>2.16.4</p></TD>
</TR>
</TABLE>
<p><br>
</p>
<TABLE>
<TR align="left">
<TH colspan=1 align="left"><p><tt><b><u>RDY^Znn^RDY_K15</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Response
Grammar:  RDY Message 
</u></b></tt></p></TH>
<TH><p>Section
Reference
</p></TH>
</TR>
<TR align="left">
<TH colspan=1 align="left"><p><tt>MSH</tt></p></TH>
<TH colspan=1 align="left"><p><tt>Message
Header Segment
</tt></p></TH>
<TH><p>2.16.9</p></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSA</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Acknowledgement
</tt></p></TD>
<TD colspan=1 align="center"><p>2.16.8</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
ERR ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Error</tt></p></TD>
<TD colspan=1 align="center"><p>2.16.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QAK</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Acknowledgement
</tt></p></TD>
<TD colspan=1 align="center"><p>5.4.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QPD</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Parameter Definition
</tt></p></TD>
<TD colspan=1 align="center"><p>0</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[{
DSP }]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Display
Data
</tt></p></TD>
<TD colspan=1 align="center"><p>5.5.1</p></TD>
</TR>
<TR align="left">
<TH colspan=1 align="left"><p><tt>[
DSC ]
</tt></p></TH>
<TH colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TH>
<TH><p>2.16.4</p></TH>
</TR>
</TABLE>
<p><br>
</p>
<TABLE BORDER>
<TR align="left">
<TH colspan=1 align="left"><p><tt><b>The
data will display as follows: (Query ID=Znn)
</b></tt></p></TH>
</TR>
<TR align="left">
<TH colspan=1 align="left"><p><tt>DSP||
      (data in actual display format)
</tt></p></TH>
</TR>
</TABLE>
<p><b>QPD
Input Parameter Specification</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TH colspan=1 align="left"><p><b>Field
Seq (Query ID=Znn)
</b></p></TH>
<TH colspan=1 align="left"><p><b>Name</b></p></TH>
<TH colspan=1 align="left"><p><b>Key/</b><br>
<b>Search
</b></p></TH>
<TH colspan=1 align="left"><p><b>Sort</b></p></TH>
<TH colspan=1 align="left"><p><b>LEN</b></p></TH>
<TH colspan=1 align="left"><p><b>TYPE</b></p></TH>
<TH colspan=1 align="left"><p><b>Opt</b></p></TH>
<TH colspan=1 align="left"><p><b>Rep</b></p></TH>
<TH colspan=1 align="left"><p><b>Match
Op
</b></p></TH>
<TH colspan=1 align="left"><p><b>TBL</b></p></TH>
<TH colspan=1 align="left"><p><b>Segment
Field Name
</b></p></TH>
<TH colspan=1 align="left"><p><b>Service
Identifier Code
</b></p></TH>
<TH colspan=1 align="left"><p><b>Element
Name
</b></p></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>1</p></TD>
<TD colspan=1 align="left"><p>MessageQueryName</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>60</p></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>R</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>2</p></TD>
<TD colspan=1 align="left"><p>QueryTag</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>32</p></TD>
<TD colspan=1 align="left"><p>ST</p></TD>
<TD colspan=1 align="left"><p>R</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><b>InputItem</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
</TABLE>
<p><b>QPD
Input Parameter Field Description and Commentary</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Input
Parameter (Query ID=Znn)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Comp.
Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>DT</b></p></TD>
<TD colspan=1 align="left"><p><b>Description</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>MessageQueryName</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>Must
be valued <b>Znn^&lt;query name&gt;^HL7nnnn</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>QueryTag</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ST</p></TD>
<TD colspan=1 align="left"><p>Unique
to each query message instance.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>InputItem1</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>DataType</p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Components:
(if applicable)
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>(Description)</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>(Valuation
note)
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><b>Component1</b>
(if applicable)
</p></TD>
<TD colspan=1 align="left"><p>DataType</p></TD>
<TD colspan=1 align="left"><p>(Valuation
note)
</p></TD>
</TR>
</TABLE>
<p>[The
following table is used only for the Complex Expression (QSC) variant.]<br>
<b>Input Specification: Virtual Table</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>ColName
(Query ID=Znn)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Key/</b><br>
<b>Search
</b></p></TD>
<TD colspan=1 align="left"><p><b>Sort</b></p></TD>
<TD colspan=1 align="left"><p><b>LEN</b></p></TD>
<TD colspan=1 align="left"><p><b>TYPE</b></p></TD>
<TD colspan=1 align="left"><p><b>Opt</b></p></TD>
<TD colspan=1 align="left"><p><b>Rep</b></p></TD>
<TD colspan=1 align="left"><p><b>Match
Op
</b></p></TD>
<TD colspan=1 align="left"><p><b>TBL</b></p></TD>
<TD colspan=1 align="left"><p><b>Segment
Field Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>Service
Identifier Code
</b></p></TD>
<TD colspan=1 align="left"><p><b>ElementName</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
</TABLE>
<p>[The
following table is used only for the Complex Expression (QSC) variant.]<br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>ColName
(Query ID=Znn)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Comp.
Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>DT</b></p></TD>
<TD colspan=1 align="left"><p><b>Description</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
</TABLE>
<p>[The
following table is used only for the Query By Example (QBE) variant.]<br>
<b>QBE Input Parameter Specification</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Segment
Field Name (Query ID=Znn)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Name</b></p></TD>
<TD colspan=1 align="left"><p><b>Key/</b><br>
<b>Search
</b></p></TD>
<TD colspan=1 align="left"><p><b>Sort</b></p></TD>
<TD colspan=1 align="left"><p><b>LEN</b></p></TD>
<TD colspan=1 align="left"><p><b>TYPE</b></p></TD>
<TD colspan=1 align="left"><p><b>Opt</b></p></TD>
<TD colspan=1 align="left"><p><b>Rep</b></p></TD>
<TD colspan=1 align="left"><p><b>Match
Op
</b></p></TD>
<TD colspan=1 align="left"><p><b>TBL</b></p></TD>
<TD colspan=1 align="left"><p><b>Service
Identifier Code
</b></p></TD>
<TD colspan=1 align="left"><p><b>ElementName</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
</TABLE>
<p>[The
following table is used only for the Query By Example variant.]<br>
<b>QBE Input Parameter Field Description and Commentary</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Input
Parameter (Query ID=Znn)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Comp.
Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>DT</b></p></TD>
<TD colspan=1 align="left"><p><b>Description</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
</TABLE>
<p><b>RCP
Response Control Parameter Field Description and Commentary</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Field
Seq (Query ID=Znn)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Name</b></p></TD>
<TD colspan=1 align="left"><p><b>Component
Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>LEN</b></p></TD>
<TD colspan=1 align="left"><p><b>DT</b></p></TD>
<TD colspan=1 align="left"><p><b>Description</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
</TABLE>
<h4>
<A NAME="Heading45">5.3.3.4 Conformance statement table summaries</A></h4>

<p>The
following table lists the tables that are to be included in each Conformance
Statement.  The differences arise both from the query variant used and the
response type provided.<br>
</p>
<TABLE BORDER>
<TR align="center">
<TD colspan=1 align="center"><p><b>Response
Type
</b></p></TD>
<TD colspan=1 align="center"><p><b>Query
Variant
</b></p></TD>
<TD colspan=1 align="center"><p><b>Table
Included
</b></p></TD>
<TD colspan=1 align="center"><p><b>Section
Reference
</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Display</p></TD>
<TD colspan=1 align="left"><p>None
(QPD)
</p></TD>
<TD colspan=1 align="left"><p>Conformance
Statement introduction
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Query
grammar
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Response
grammar for display response
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>QPD
input parameter specification
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.6</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>QPD
input parameter field description and commentary
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.7</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RCP
input parameter field description and commentary
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.10</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Display</p></TD>
<TD colspan=1 align="left"><p>QBE</p></TD>
<TD colspan=1 align="left"><p>Conformance
Statement introduction
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Query
grammar
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Response
grammar for display response
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>QPD
input parameter specification
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.6</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>QPD
input parameter field description and commentary
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.7</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>QBE
input parameter specification
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.8</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>QBE
input parameter field description and commentary
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.9</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RCP
input parameter field description and commentary
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.10</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Display</p></TD>
<TD colspan=1 align="left"><p>QSC</p></TD>
<TD colspan=1 align="left"><p>Conformance
Statement introduction
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Query
grammar
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Response
grammar for display response
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>QPD
input parameter specification
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.6</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>QPD
input parameter field description and commentary
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.7</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Input
specification:  virtual table
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.11</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Virtual
table field description and commentary
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.12</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Tabular</p></TD>
<TD colspan=1 align="left"><p>None
(QPD)
</p></TD>
<TD colspan=1 align="left"><p>Conformance
Statement introduction
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Query
grammar
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Response
grammar
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.4</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>QPD
input parameter specification
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.6</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>QPD
input parameter field description and commentary
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.7</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RCP
input parameter field description and commentary
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.10</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Output
specification for tabular response
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.13</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Tabular</p></TD>
<TD colspan=1 align="left"><p>QBE</p></TD>
<TD colspan=1 align="left"><p>Conformance
Statement introduction
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Query
grammar
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Response
grammar
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.4</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>QPD
input parameter specification
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.6</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>QPD
input parameter field description and commentary
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.7</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>QBE
input parameter specification
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.8</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>QBE
input parameter field description and commentary
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.9</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RCP
input parameter field description and commentary
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.10</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Output
specification for tabular response
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.13</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Tabular</p></TD>
<TD colspan=1 align="left"><p>QSC</p></TD>
<TD colspan=1 align="left"><p>Conformance
Statement introduction
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Query
grammar
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Response
grammar
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.4</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>QPD
input parameter specification
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.6</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>QPD
input parameter field description and commentary
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.7</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Input/output
specification:  virtual table
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.11</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Virtual
table field description and commentary
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.12</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RCP
input parameter field description and commentary
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.10</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Segment
pattern
</p></TD>
<TD colspan=1 align="left"><p>None
(QPD)
</p></TD>
<TD colspan=1 align="left"><p>Conformance
Statement introduction
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Query
grammar
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Response
grammar
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.4</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>QPD
input parameter specification
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.6</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>QPD
input parameter field description and commentary
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.7</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RCP
input parameter field description and commentary
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.10</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Segment
pattern
</p></TD>
<TD colspan=1 align="left"><p>QBE</p></TD>
<TD colspan=1 align="left"><p>Conformance
Statement introduction
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Query
grammar
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Response
grammar
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.4</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>QPD
input parameter specification
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.6</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>QPD
input parameter field description and commentary
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.7</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>QBE
input parameter specification
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.8</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>QBE
input parameter field description and commentary
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.9</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RCP
input parameter field description and commentary
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.10</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Segment
pattern
</p></TD>
<TD colspan=1 align="left"><p>QSC</p></TD>
<TD colspan=1 align="left"><p>Conformance
Statement introduction
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Query
grammar
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Response
grammar
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.4</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>QPD
input parameter specification
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.6</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>QPD
input parameter field description and commentary
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.7</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Input
specification:  virtual table
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.11</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Virtual
table field description and commentary
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.12</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RCP
input parameter field description and commentary
</p></TD>
<TD colspan=1 align="left"><p>5.3.2.10</p></TD>
</TR>
</TABLE>
<h2>
<A NAME="Heading46">5.4 QUERY/RESPONSE MESSAGE PAIRS</A></h2>

<p>The
query recommended for use in v 2.4 is the Query By Parameter (QBP). The
query/response message pairs that follow in this section supercede the previous
generation of original mode and enhanced queries that are described in sections
5.10.2, 5.10.3, 5.10.4.<br>
All queries must have a Query Name. The Query Name field, which is a CE data
type, uniquely identifies a Conformance Statement <br>
The QBP allows for several variants in defining the selection criteria. <br>
The first variant, the Query By (Simple) Parameter, is to declare a sequence of
one to many HL7 fields. Each of these fields will retain its data type as
defined in the original HL7 usage. Each field corresponds to a parameter in the
Conformance Statement. <br>
<b>Note:</b>  	It is the responsibility of the Server to declare explicitly the
purpose of the query, the meaning of each of the query parameters, and the
relationships among the parameters.  These declarations are made in the
Conformance Statement.<br>
A second variant, the Query By Example, allows the specification of parameters
within actual HL7 segments other than the QPD.  For example, the Conformance
Statement might permit the use of the PID segment to transmit specific patient
identification parameters.  Each such parameter is specified in <b>the QBE
Input Parameter Specification</b> and <b>QBE Input Parameter Field Description
and Commentary</b> tables.<br>
The third variant uses a single QPD parameter in the form of a complex query
selection expression. This field with its QSC data type allows the defining
segment to be broader in scope and allows any field in the target data to be
selected and filtered unless constrained through the Conformance Statement. It
explicitly states any relational operators such as AND and OR.  It is intended
to support a wide range of combinations of parameters.<br>
The difference in how parameters are passed in each of these three variants is
as follows:<br>
*	Query by Simple Parameter passes each client value to the Server positionally
using only the third and successive fields of the QPD segment.<br>
*	Query By Example passes parameters using HL7 segments, such as PID, that are
defined in the endpoint application chapters.  The third and successive fields
of the QPD segment also may be used in this variant.<br>
*	In the QSC Selection Criteria variant, the parameter values are all contained
within a single complex query selection expression that is passed in QPD-3.<br>
Each generic query has a specific message syntax, a unique trigger event, and a
unique message structure. Each generic response also has a specific message
syntax, a unique trigger event, and a unique message structure.<br>
There are three generic message structures, each of which accommodates the
specific detail needed in each of the three response types.<br>
*	The QBP_Q11 structure supports a Segment Pattern Response and contains the
MSH, QPD, RCP, and DSC segments.  Its default trigger event is Q11.  A standard
or site-defined query may use this trigger event or may specify a unique
trigger event value in its Conformance Statement.  If a unique trigger event
value is chosen for a site-defined query, that value must begin with <b>Z</b>.
<br>
*	The QBP_Q13 structure supports a Tabular Response and contains the MSH, RCP,
RDF, and DSC segments.  Its default trigger event is Q13.  A standard or
site-defined query may use this trigger event or may specify a unique trigger
event value in its Conformance Statement.  If a unique trigger event value is
chosen for a site-defined query, that value must begin with <b>Z</b>. <br>
*	The QBP_Q15 structure supports a Display Response and contains the MSH, QPD,
RCP, and DSC segments.  Its default trigger event is Q15.  A standard or
site-defined query may use this trigger event or may specify a unique trigger
event value in its Conformance Statement.  If a unique trigger event value is
chosen for a site-defined query, that value must begin with <b>Z</b>.<br>
The new queries support both immediate and deferred response. This information
is carried in the RCP segment along with the execution date and time.<br>
The query definition segment is echoed back in the response. This is
particularly important in a continuation situation. Otherwise, the sender might
be conceivably having to manage a queue of queries. 
</p>

<h3>
<A NAME="Heading47">5.4.1 QBP/RSP - query by parameter/segment pattern response (events vary )</A></h3>

<TABLE>
<TR align="left">
<TH colspan=1 align="left"><p><tt><b><u>QBP^Q11^QBP_Q11</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Query
By Parameter
</u></b></tt></p></TH>
<TH><p>Chapter</p></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt><u>QPD</u></tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Parameter Definition Segment
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[...]</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Optional
query by example segments
</tt></p></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt><u>RCP</u>
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Response
Control Parameters
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]	
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer	
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
</TABLE>
<p>The
QBP_Q11 structure supports a Segment Pattern Response and contains the MSH,
QPD, RCP, and DSC segments.  Its default trigger event is Q11.  A standard or
site-defined query may use this trigger event or may specify a unique trigger
event value in its Conformance Statement.  If a unique trigger event value is
chosen for a site-defined query, that value must begin with <b>Z</b>. <br>
</p>
<TABLE>
<TR align="left">
<TH colspan=1 align="left"><p><tt><b><u>RSP^K11^RSP_K11</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Segment
Pattern Response
</u></b></tt></p></TH>
<TH><p>Chapter</p></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSA</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Acknowledgement
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
ERR ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Error</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QAK</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Acknowledgement
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QPD</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Parameter Definition Segment
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[...</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Segment
Pattern from Conformance Statement
</tt></p></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>...]</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]	
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer	
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
</TABLE>
<p>The
RSP_K11 supports a Segment Pattern Response to the QBP and contains the MSH,
MSA, ERR, QAK, QPD, variable content segments, and the DSC.  Its default
trigger event is K11.  A standard or site-defined response may use this trigger
event or may specify a unique trigger event value in its Conformance Statement.
If a unique trigger event value is chosen for a site-defined response, that
value must begin with <b>Z</b>. <br>
<b>Note on QBP:</b> <b>Query By Example variant:</b> The query by example is an
extension of Query By Parameter (QBP) in which search parameters are passed by
sending them in the segment which naturally carries them. A Conformance
Statement which uses this variant must replace the ellipses in the input
QBP_Q11 grammar above, with the specific segments that it accepts. <br>
<b>Note:</b> 	The indicated trigger events are the default values for
<i>MSH-9-2-Trigger event</i>.  Standard and site-defined queries may use these
trigger events or may specify unique trigger event values in their Conformance
Statements.  Unique trigger event values for site-defined queries must begin
with <b>Z</b>.<br>
<b>Note on RSP:</b> The conformance statement for each QBP/RSP pair shall
specify an explicit segment pattern grammar in place of the ellipses shown
above in the RSP_K11 grammar.
</p>

<h3>
<A NAME="Heading48">5.4.2 QBP/RTB - query by parameter/tabular response (events vary)</A></h3>

<TABLE>
<TR align="left">
<TH colspan=1 align="left"><p><tt><b><u>QBP^Q13^QBP_Q13</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Query
By Parameter
</u></b></tt></p></TH>
<TH><p>Chapter</p></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QPD</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Parameter Definition Segment
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[...]</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Optional
query by example segments
</tt></p></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
RDF ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Table
Row Definition Segment
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>RCP
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Response
Control Parameters
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]	
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer	
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
</TABLE>
<p>The
QBP_Q13 structure supports a Tabular Response and contains the MSH, RDF, RCP,
and DSC segments.  Its default trigger event is Q13.  A standard or
site-defined query may use this trigger event or may specify a unique trigger
event value in its Conformance Statement.  If a unique trigger event value is
chosen for a site-defined query, that value must begin with <b>Z</b>.<br>
Unless otherwise specified in the query's Conformance Statement, the default
value for the RDF segment shall be understood to contain all available fields
from the Virtual Table. The Client may override the default RDF by specifying
explicitly the columns to be returned.<br>
</p>
<TABLE>
<TR align="left">
<TH colspan=1 align="left"><p><tt><b><u>RTB^K13^RTB_K13</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Table
Based Response
</u></b></tt></p></TH>
<TH><p>Chapter</p></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSA</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Acknowledgement
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
ERR ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Error</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt><u>QAK</u></tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Acknowledgement
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt><u>QPD</u></tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Definition Segment
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
<u>RDF</u> 
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Table
Row Definition Segment
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
[ { <u>RDT</u> } ]]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Table
Row Data Segment
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]	
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer	
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
</TABLE>
<p>The
RTB_K13 supports a Tabular Response to the QBP and contains the MSH, MSA, ERR,
QAK, QPD, RDF, RDT and the DSC.  Its default trigger event is K13.  A standard
or site-defined response may use this trigger event or may specify a unique
trigger event value in its Conformance Statement.  If a unique trigger event
value is chosen for a site-defined response, that value must begin with
<b>Z</b>. <br>
The RTB_K13 structure requires that, if any RDT segments are returned, they be
preceded by an RDF segment containing the row definition specification for the
RDT segments.  If no RDF was sent in the query, the default RDF is returned in
the RTB_K13. <br>
<b>Note:</b> 	The indicated trigger events are the default values for
<i>MSH-9-2-Trigger event</i>.  Standard and site-defined queries may use these
trigger events or may specify unique trigger event values in their Conformance
Statements.  Unique trigger event values for site-defined queries must begin
with <b>Z</b>.
</p>

<h3>
<A NAME="Heading49">5.4.3 QBP/RDY - query by parameter/display response (events vary)</A></h3>

<TABLE>
<TR align="left">
<TH colspan=1 align="left"><p><tt><b><u>QBP^Q15^QBP_Q15</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Query
By Parameter
</u></b></tt></p></TH>
<TH><p>Chapter</p></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt><u>QPD</u></tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Parameter Definition Segment
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[...]</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Optional
query by example segments
</tt></p></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt><u>RCP</u>
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Response
Control Parameters
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]	
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer	
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
</TABLE>
<p>The
QBP_Q15 structure supports a Display Response and contains the MSH, QPD, RCP,
and DSC segments.  Its default trigger event is Q15.  A standard or
site-defined query may use this trigger event or may specify a unique trigger
event value in its Conformance Statement.  If a unique trigger event value is
chosen for a site-defined query, that value must begin with <b>Z</b>.<br>
</p>
<TABLE>
<TR align="left">
<TH colspan=1 align="left"><p><tt><b><u>RDY^K15^RDY_K15</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Display
Based Response
</u></b></tt></p></TH>
<TH><p>Chapter</p></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSA</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Acknowledgement
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
ERR ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Error</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt><u>QAK</u></tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Acknowledgement
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt><u>QPD</u></tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Parameter Definition Segment
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
{ <u>DSP</u> } ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Display
Data
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]	
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer	
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
</TABLE>
<p>The
RDY_K15 supports a Display Response to the QBP and contains the MSH, MSA, ERR,
QAK, DSP, and the DSC.  Its default trigger event is K15.  A standard or
site-defined response may use this trigger event or may specify a unique
trigger event value in its Conformance Statement.  If a unique trigger event
value is chosen for a site-defined response, that value must begin with
<b>Z</b>.<br>
<b>Note:</b> 	The indicated trigger events are the default values for
<i>MSH-9-2-Trigger event</i>.  Standard and site-defined queries may use these
trigger events or may specify unique trigger event values in their Conformance
Statements.  Unique trigger event values for site-defined queries must begin
with <b>Z</b>.
</p>

<h3>
<A NAME="Heading50">5.4.4 QSB - Create subscription (event Q16)</A></h3>

<p>See
section 5.7 for more information about this event.<br>
</p>
<TABLE>
<TR align="left">
<TH colspan=1 align="left"><p><tt><b><u>QSB^Q16^QSB_Q16</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Create
Subscription 
</u></b></tt></p></TH>
<TH><p>Chapter</p></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt><u>QPD</u></tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Parameter Definition 
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt><u>RCP</u>
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Response
Control Parameters
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]	
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer	
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
</TABLE>
<p><br>
</p>
<TABLE>
<TR align="left">
<TH colspan=1 align="left"><p><tt><b><u>ACK^Q16</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>General
Acknowledgment
</u></b></tt></p></TH>
<TH><p>Chapter</p></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSA</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Acknowledgment
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
ERR ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Error</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
</TABLE>
<h3>
<A NAME="Heading51">5.4.5 QVR -  query for previous events (event Q17)</A></h3>

<p>The
Query for Previous Events is like a Query by Parameter with a Segment Pattern
Response except that the response consists of zero to many messages of the type
defined in the Conformance Statement rather than a single response message
containing multiple iterations of the segment pattern.  While the messages sent
in response to a QVR will reflect events which occurred in the past, the time
stamp in the message header will reflect the time the message is actually
constructed (current time).  It is also similar to the previous generation
VQQ/RQQ Event Replay. <br>
While the response is similar to subscription messages, it differs from
subscription in that the response messages are the result of "interrogating"
the database rather than events being triggered in the current timeframe.<br>
In a Query for Previous Events, the Server still has to parse the query, but
avoids the handshaking protocols required in normal query/response situations.
The Server acknowledges the query with the general acknowledgement message ACK.
The Server then transmits a sequence of messages as if they were simulated
unsolicited messages. This is useful for low end systems that cannot/do not
want to deal with the overhead of the query response message syntax, i.e.,
systems that can only process unsolicited update messages.<br>
Systems that choose to offer the QVR should offer guidance in the Conformance
Statement, where appropriate, concerning the scope and size of the data
requested by the Client.  Moreover, the Conformance Statement should contain
language cautioning Clients of the potential for harm from getting messages out
of the original sequence and/or context.  <br>
Use cases for this query are as follows: 1) to populate a database initially,
2) to recover from an extended down time on the part of the recipient, 3) to
enable systems which normally receive unsolicited data to be extended to act as
a query client with minimal modification.<br>
<b> Note:</b> 	If there is a concern that it will be difficult to distinguish
these messages from any current realtime messages, <i>e.g.</i>, if they are
going down the same pipe, the data offerer might choose to designate a unique
<i>MSH-3 Sending application</i> for the messages it sends in response to a
QVR. This would allow downstream systems to recognize which messages were the
result of the QVR, versus which are the result of current realtime activity on
the sending system. For example, there may be 2 systems receiving pharmacy
dispense messages. If system A wishes to issue a QVR to receive a historical
load, system B might misinterpret the QVR results coming over the pipe as
actual live data. A separate Sending Application name would allow for easy
differentiation. <br>
</p>
<TABLE>
<TR align="left">
<TH colspan=1 align="left"><p><tt><b><u>QVR^Q17^QVR_Q17</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Query
for Previous Events
</u></b></tt></p></TH>
<TH><p>Chapter</p></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt><u>QPD</u></tt></p></TD>
<TD colspan=1 align="left"><p><tt>Event
Definition Segment
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[...]</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Optional
query by example segments
</tt></p></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt><u>RCP</u>
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Response
Control Parameters
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]	
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer	
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
</TABLE>
<p><br>
</p>
<TABLE>
<TR align="left">
<TH colspan=1 align="left"><p><tt><b><u>ACK^Q17</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>General
Acknowledgment
</u></b></tt></p></TH>
<TH><p>Chapter</p></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSA</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Acknowledgment
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
ERR ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Error</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
</TABLE>
<p>The
QVR message segments are identical to those of the QBP.  A QVR conformance
statement may use either the QSC or query by example syntactic variants as well
as the query by simple parameter.
</p>

<h3>
<A NAME="Heading52">5.4.6 QCN/ACK - cancel query/acknowledge message (event J01)</A></h3>

<TABLE>
<TR align="left">
<TH colspan=1 align="left"><p><tt><b><u>QCN^J01^QCN_J01</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Cancel
Query
</u></b></tt></p>
<BR></TH>
<TH><p>Chapter</p></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt><u>QID</u></tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
identification Segment
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
</TABLE>
<p><br>
</p>
<TABLE>
<TR align="left">
<TH colspan=1 align="left"><p><tt><b><u>ACK^J01^ACK</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>General
Acknowledgment
</u></b></tt></p></TH>
<TH><p>Chapter</p></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSA</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Acknowledgment
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
ERR ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Error</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
</TABLE>
<h3>
<A NAME="Heading53">5.4.7 QSX /ACK - cancel subscription/acknowledge message (event J02)</A></h3>

<p>See
Section 5.6 for more information about this event.<br>
</p>
<TABLE>
<TR align="left">
<TH colspan=1 align="left"><p><tt><b><u>QSX^J02^QCN_J01</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Cancel
Subscription
</u></b></tt></p></TH>
<TH><p>Chapter</p></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt><u>QID</u></tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
identification Segment
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
</TABLE>
<p><br>
</p>
<TABLE>
<TR align="left">
<TH colspan=1 align="left"><p><tt><b><u>ACK^J02^ACK</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>General
Acknowledgment
</u></b></tt></p></TH>
<TH><p>Chapter</p></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSA</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Acknowledgment
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
ERR ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Error</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
</TABLE>
<h2>
<A NAME="Heading54">5.5 QUERY/RESPONSE MESSAGE SEGMENTS</A></h2>

<p>This
section includes all message segments, except for the general message segments,
used for the query/response pairs recommended for use in v 2.4.
</p>

<h3>
<A NAME="Heading55">5.5.1 DSP - display data segment</A></h3>

<p>The
DSP segment is used to contain data that has been preformatted by the sender
for display.  The semantic content of the data is lost; the data is simply
treated as lines of text. <br>
<center>HL7 Attribute Table - DSP
<a name="DSP"></a>
- Display Data</center><br>
</p>
<TABLE BORDER>
<TR align="center">
<TH><p><b>SEQ</b></p></TH>
<TH><p><b>LEN</b></p></TH>
<TH><p><b>DT</b></p></TH>
<TH><p><b>OPT</b></p></TH>
<TH><p><b>RP/#</b></p></TH>
<TH><p><b>TBL#</b></p></TH>
<TH><p><b>ITEM
#
</b></p></TH>
<TH><p>ELEMENT
NAME
</p></TH>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>1</p></TD>
<TD colspan=1 align="center"><p>4</p></TD>
<TD colspan=1 align="center"><p>SI</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>00061</p></TD>
<TD colspan=1 align="center"><p>Set
ID - DSP
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>2</p></TD>
<TD colspan=1 align="center"><p>4</p></TD>
<TD colspan=1 align="center"><p>SI</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>00062</p></TD>
<TD colspan=1 align="center"><p>Display
Level
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>3</p></TD>
<TD colspan=1 align="center"><p>300</p></TD>
<TD colspan=1 align="center"><p>TX</p></TD>
<TD colspan=1 align="center"><p>R</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>00063</p></TD>
<TD colspan=1 align="center"><p>Data
Line
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>4</p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
<TD colspan=1 align="center"><p>ST</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>00064</p></TD>
<TD colspan=1 align="center"><p>Logical
Break Point
</p>
<BR></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>5</p></TD>
<TD colspan=1 align="center"><p>20</p></TD>
<TD colspan=1 align="center"><p>TX</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>00065</p></TD>
<TD colspan=1 align="center"><p>Result
ID
</p></TD>
</TR>
</TABLE>
<h4>
<A NAME="Heading56">5.5.1.0 DSP field definitions</A></h4>


<h4>
<A NAME="Heading57">5.5.1.1 DSP-1   Set ID - DSP   (SI)   00061 </A></h4>

<p>Definition:
 This field is used optionally to number multiple display segments.
</p>

<h4>
<A NAME="Heading58">5.5.1.2 DSP-2   Display level   (SI)   00062 </A></h4>

<p>Definition:
 This field contains numbering to define groups of fields as assigned by the
individual sites or applications.
</p>

<h4>
<A NAME="Heading59">5.5.1.3 DSP-3   Data line   (TX)   00063 </A></h4>

<p>Definition:
 This field contains an actual line as it should be displayed.  As described
for the TX data type, highlighting and other special display characteristics
may be included.
</p>

<h4>
<A NAME="Heading60">5.5.1.4 DSP-4   Logical break point   (ST)   00064 </A></h4>

<p>Definition:
 This field is non-null if this line is the last line of a logical break point
in the response as defined by the responding system.  <br>
Often the lines of display text will fall into logical groups that differ from
the physical size of a screen or printer page.  For example, a complete battery
or an entire radiology report might be thought of as comprising a logical
group, though it might have as few as six or as many as 120 lines.  Knowledge
of the logical break points in the display data can be useful to the
application system that is displaying or printing data.  For this reason,
<i>DSP-4-Logical break point</i> is used.  The sending application (the one
that formats the data) places the logical break points where appropriate.  If
there is a particular ancillary result ID associated with the data delineated
by <i>DSP-4-Logical break point</i>, the value of this ID also can be returned
in <i>DSP-5-Result ID</i>.  Then if the user selects the area of the display
delineated by <i>DSP-4-Logical break point</i>, the displaying system can query
for the associated <i>DSP-5-Result ID</i>.
</p>

<h4>
<A NAME="Heading61">5.5.1.5 DSP-5   Result ID   (TX)   00065 </A></h4>

<p>Definition:
 When the user selects a result ID (defined by <i>DSP-4-Logical break
point</i>) from the screen display corresponding to a record in which
<i>DSP-5-Result ID</i> is non-null, the application can initiate a second query
(a separate session) to the ancillary with the <i>QRD-10-What department data
code</i> filled in with this non-null value (e.g., the ancillary accession
number or its equivalent).  The ancillary response will contain the report
referenced by this result ID (e.g., accession number).  The ancillary should
correlate the result ID with <i>DSP-4-Logical break point</i> as follows: If
more than one line of text is sent per result, <i>DSP-5-Result ID</i> should be
only non-null for a DSP segment that contains a non-null <i>DSP-4-Logical break
point</i>.  This field may be broken into components by local agreement.  A
common example might be to include placer order number, filler order number,
and universal service identifier.  Whenever such fields are used as components
of the result ID, their components will be sent as subcomponents.
</p>

<h3>
<A NAME="Heading62">5.5.2 QAK- query acknowledgment segment</A></h3>

<p>The
QAK segment contains information sent with responses to a query.  Although the
QAK segment is required in the responses to the enhanced queries (see section
5.10.4), it may appear as an optional segment placed after the (optional) ERR
segment in any query response (message) to any original mode query.<br>
<center>HL7 Attribute Table - QAK
<a name="QAK"></a>
- Query Acknowledgment</center><br>
</p>
<TABLE BORDER>
<TR align="center">
<TH><p><b>SEQ</b></p></TH>
<TH><p><b>LEN</b></p></TH>
<TH><p><b>DT</b></p></TH>
<TH><p><b>OPT</b></p></TH>
<TH><p><b>RP/#</b></p></TH>
<TH><p><b>TBL#</b></p></TH>
<TH><p><b>ITEM#</b></p></TH>
<TH><p>ELEMENT
NAME
</p></TH>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>1</p></TD>
<TD colspan=1 align="center"><p>32</p></TD>
<TD colspan=1 align="center"><p>ST</p></TD>
<TD colspan=1 align="center"><p>C</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>00696</p></TD>
<TD colspan=1 align="center"><p>Query
Tag
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>2</p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
<TD colspan=1 align="center"><p>ID</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p><u>0208</u></p></TD>
<TD colspan=1 align="center"><p>00708</p></TD>
<TD colspan=1 align="center"><p>Query
Response Status
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>3</p></TD>
<TD colspan=1 align="center"><p>250</p></TD>
<TD colspan=1 align="center"><p>CE</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>01375</p></TD>
<TD colspan=1 align="center"><p>Message
Query Name
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>4</p></TD>
<TD colspan=1 align="center"><p>10</p></TD>
<TD colspan=1 align="center"><p>NM</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>01434</p></TD>
<TD colspan=1 align="center"><p>Hit
Count
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>5</p></TD>
<TD colspan=1 align="center"><p>10</p></TD>
<TD colspan=1 align="center"><p>NM</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>01622</p></TD>
<TD colspan=1 align="center"><p>This
payload
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>6</p></TD>
<TD colspan=1 align="center"><p>10</p></TD>
<TD colspan=1 align="center"><p>NM</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>01623</p></TD>
<TD colspan=1 align="center"><p>Hits
remaining
</p></TD>
</TR>
</TABLE>
<h4>
<A NAME="Heading63">5.5.2.0 QAK field definitions</A></h4>


<h4>
<A NAME="Heading64">5.5.2.1 QAK-1   Query tag   (ST)   00696 </A></h4>

<p>Definition:
 This field may be valued by the initiating system to identify the query, and
may be used to match response messages to the originating query.  If it is
valued, the responding system is required to echo it back as the first field in
the query acknowledgment segment (QAK).  This field differs from<i>
MSA-2-message control ID</i> in that its value remains constant for each
message (i.e., all continuation messages) associated with the query, whereas
<i>MSA-2-Message control ID</i> may vary with each continuation message, since
it is associated with each individual message, not the query as a whole.
<i>QAK-1-Query tag</i> is not conditional on the presence of the <i>QRD-1-Query
ID</i> field in the original mode queries: in the original mode queries
<i>QAK-1-Query tag</i> is not used.
</p>

<h4>
<A NAME="Heading65">5.5.2.2 QAK-2   Query response status   (ID)   00708 </A></h4>

<p>Definition:
 This field allows the responding system to return a precise response status.
It is especially useful in the case where no data is found that matches the
query parameters, but where there is also no error.  It is defined with
<cite>HL7 Table 0208 - Query response status</cite>. 
<br>
<center>HL7 Table 0208 - Query response status
<a name="HL70208"></a></center><br>
</p>
<TABLE BORDER>
<TR align="center">
<TH><p><b>Value</b></p></TH>
<TH><p><b>Description</b></p></TH>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>OK</p></TD>
<TD colspan=1 align="center"><p>Data
found, no errors (this is the default)
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>NF</p></TD>
<TD colspan=1 align="center"><p>No
data found, no errors
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>AE</p></TD>
<TD colspan=1 align="center"><p>Application
error
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>AR</p></TD>
<TD colspan=1 align="center"><p>Application
reject
</p></TD>
</TR>
</TABLE>
<h4>
<A NAME="Heading66">5.5.2.3 QAK-3   Message query name   (CE)   01375 </A></h4>

<p><tt>Components:
&lt;identifier (ST)&gt; ^ &lt;text (ST)&gt; ^ &lt;name of coding system
(IS)&gt; ^ &lt;alternate identifier (ST)&gt; ^ &lt;alternate text (ST)&gt; ^
&lt;name of alternate coding system (IS)&gt;</tt><br>
Definition:  This field contains the name of the query.  These names are
assigned by the function-specific chapters of this specification.
Site-specific event replay query names begin with the letter "Z." Refer to
<cite>User defined table 0471 - Query name</cite> for suggested values.
</p>

<h4>
<A NAME="Heading67">5.5.2.4 QAK-4   Hit count total  (NM)   01434</A></h4>

<p>Definition:
This field, when used, contains the total number of records found by the Server
that matched the query.  For tabular responses, this is the number of rows
found.  For other response types, the Conformance Statement defines the meaning
of a "hit."
</p>

<h4>
<A NAME="Heading68">5.5.2.5 QAK-5   This payload (NM)   01622</A></h4>

<p>Definition:
 This field, when used, contains the total number of matching records that the
Server sent in the current response.  Where the continuation protocol is used
to transmit the response in partial installments, this number will differ from
the value sent in <i>QAK-4-Hit count total</i>.
</p>

<h4>
<A NAME="Heading69">5.5.2.6 QAK-6   Hits remaining (NM)   01623</A></h4>

<p>Definition:
 This field, when used, contains the number of matching records found by the
Server that have yet to be sent.  It is only meaningful when the Server uses
the continuation protocol to transmit partial responses.
</p>

<h3>
<A NAME="Heading70">5.5.3 QID- query identification segment</A></h3>

<p>The
QID segment contains the information necessary to uniquely identify a query.
Its primary use is in query cancellation or subscription cancellation.<br>
<center>HL7 Attribute Table - QID
<a name="QID"></a>
- Query Identification</center><br>
</p>
<TABLE BORDER>
<TR align="center">
<TH><p><b>SEQ</b></p></TH>
<TH><p><b>LEN</b></p></TH>
<TH><p><b>DT</b></p></TH>
<TH><p><b>OPT</b></p></TH>
<TH><p><b>RP/#</b></p></TH>
<TH><p><b>TBL#</b></p></TH>
<TH><p><b>ITEM#</b></p></TH>
<TH><p>ELEMENT
NAME
</p></TH>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>1</p></TD>
<TD colspan=1 align="center"><p>32</p></TD>
<TD colspan=1 align="center"><p>ST</p></TD>
<TD colspan=1 align="center"><p>R</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>00696</p></TD>
<TD colspan=1 align="center"><p>Query
Tag
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>2</p></TD>
<TD colspan=1 align="center"><p>250</p></TD>
<TD colspan=1 align="center"><p>CE</p></TD>
<TD colspan=1 align="center"><p>R</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>0471</p></TD>
<TD colspan=1 align="center"><p>01375</p></TD>
<TD colspan=1 align="center"><p>Message
Query Name
</p></TD>
</TR>
</TABLE>
<h4>
<A NAME="Heading71">5.5.3.0 QID field definitions</A></h4>


<h4>
<A NAME="Heading72">5.5.3.1 QID-1   Query tag   (ST)   00696</A></h4>

<p>Definition:
 This field identifies the instance of a query.
</p>

<h4>
<A NAME="Heading73">5.5.3.2 QID-2   Message query name (CE)  01375</A></h4>

<p><tt>Components:
&lt;identifier (ST)&gt; ^ &lt;text (ST)&gt; ^ &lt;name of coding system
(IS)&gt; ^ &lt;alternate identifier (ST)&gt; ^ &lt;alternate text (ST)&gt; ^
&lt;name of alternate coding system (IS)&gt;</tt><br>
Definition:  This field contains the name of the query.  These names are
assigned by the function-specific chapters of this specification.
Site-specific query names begin with the letter "Z."  Refer to <cite>User defi
ned
table 0471 - Query name</cite> for suggested values.
<br>
QPD - query parameter definition<br>
The QPD segment defines the parameters of the query.<br>
<center>HL7 Attribute Table - QPD
<a name="QPD"></a>
- Query Parameter Definition</center><br>
</p>
<TABLE BORDER>
<TR align="center">
<TH><p><b>SEQ</b></p></TH>
<TH><p><b>LEN</b></p></TH>
<TH><p><b>DT</b></p></TH>
<TH><p><b>OPT</b></p></TH>
<TH><p><b>RP/#</b></p></TH>
<TH><p><b>TBL#</b></p></TH>
<TH><p><b>ITEM#</b></p></TH>
<TH><p>ELEMENT
NAME
</p></TH>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>1</p></TD>
<TD colspan=1 align="center"><p>250</p></TD>
<TD colspan=1 align="center"><p>CE</p></TD>
<TD colspan=1 align="center"><p>R</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>0471</p></TD>
<TD colspan=1 align="center"><p>01375</p></TD>
<TD colspan=1 align="center"><p>Message
Query Name 
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>2</p></TD>
<TD colspan=1 align="center"><p>32</p></TD>
<TD colspan=1 align="center"><p>ST</p></TD>
<TD colspan=1 align="center"><p>C</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>00696</p></TD>
<TD colspan=1 align="center"><p>Query
Tag
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>3-n</p></TD>
<TD colspan=1 align="center"><p>256</p></TD>
<TD colspan=1 align="center"><p>varies</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>01435</p></TD>
<TD colspan=1 align="center"><p>User
Parameters (in successive fields) 
</p></TD>
</TR>
</TABLE>
<h4>
<A NAME="Heading74">5.5.3.0 QPD field definitions</A></h4>


<h4>
<A NAME="Heading75">5.5.3.1 QPD-1   Message query name   (CE)   01375 </A></h4>

<p><tt>Components:
&lt;identifier (ST)&gt; ^ &lt;text (ST)&gt; ^ &lt;name of coding system
(IS)&gt; ^ &lt;alternate identifier (ST)&gt; ^ &lt;alternate text (ST)&gt; ^
&lt;name of alternate coding system (IS)&gt;</tt><br>
Definition:  This field contains the name of the query.  These names are
assigned by the function-specific chapters of this specification.  It is one to
one with the conformance statement for this query name, and it is in fact an
identifier for that conformance statement. Site-specific query names begin with
the letter "Z." Refer to <cite>User defined table 0471 - Q
uery
name</cite> for suggested values.<br>
<center>User-defined Table 0471 - Query name
<a name="HL70471"></a></center><br>
</p>
<TABLE BORDER>
<TR align="center">
<TH><p><b>Value</b></p></TH>
<TH><p><b>Description</b></p></TH>
</TR>
<TR align="center">
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>No
suggested values defined
</p></TD>
</TR>
</TABLE>
<h4>
<A NAME="Heading76">5.5.3.2 QPD-2   Query tag   (ST)   00696 </A></h4>

<p>Definition:
 This field may be valued by the initiating system to identify the query, and
may be used to match response messages to the originating query.  If this field
is valued, the responding system is required to echo it back as the first field
in the query acknowledgement segment (QAK).  <br>
This field differs from <i>MSA-2-Message control ID</i> in that its value
remains constant for each message (i.e. all continuation messages) associated
with the query, whereas <i>MSA-2-Message control ID</i> may vary with each
continuation message, since it is associated with each individual message, not
the query as a whole.<br>
[<b><i>Implementation considerations:  </i></b>It is not necessary to value
this field in implementations where the only return message on the socket will
be the response to the query that was just sent.  Conversely, in an
"asynchronous" implementation where many queries, responses, and other messages
may be communicated bidirectionally over the same socket, it is essential that
this field be valued so that the Client knows to which query the Server is
responding.]
</p>

<h4>
<A NAME="Heading77">5.5.3.3 QPD-3   User parameters   (Varies)   01435 </A></h4>

<p>Definition:
These successive parameter fields hold the values that the Client passes to the
Server. <br>
The client data is presented as a sequence of HL7 fields. Beginning at
<i>QPD-3-User parameters</i>, the remaining fields of the QPD segment carry
user parameter data.  Each QPD user parameter field corresponds to one
parameter defined in the Conformance Statement, where each name, type,
optionality, and repetition of each parameter has been specified. While these
parameters are understood to be usually "anded" together, the user must inspect
the required Conformance Statement to properly understand each. Except in the
QSC variant, the parameter names do not need to be stated in the query; they
are understood to be positional based on the Conformance Statement.<br>
Each parameter field may be specified in the Conformance Statement to be of any
single data type, including the complex QIP and QSC types.  Parameter fields
may also contain the sort control (SRT) field or the segment group (ID) field
defined in Sections 5.4.5.3.1 and 5.4.5.3.2 below.<br>
Parameter fields in the QPD segment appear in the same order as in the
Conformance Statement.
<a name="HL70391"></a></p>

<h5>
<A NAME="Heading78">5.5.3.3.1 Note on QPD usage for query by example variant.</A></h5>

<p><b>Note:
Query By Example: </b>The query by example is an extension of Query By
Parameter (QBP) in which search parameters are passed by sending them in the
segment which naturally carries them.  Thus if one wanted to perform a
"find_candidates" query using query by example, one would send the demographics
information on which to search in the PID and/or PD1 segments leaving blank
those fields in the segment sent which are not query parameters.  If, for
example, religion were not one of the query parameters, PID-17 would be left
blank when the PID was sent in the query.  Parameters which do not occur
naturally in an HL7 message, such as search algorithm, confidence level, etc,
would continue to be carried in the QPD segment as they are in the Query by
Parameter.  The segments and fields available for use as query parameters would
be specified in the Conformance Statement for the query.
</p>

<h3>
<A NAME="Heading79">5.5.4 QRI - query response instance segment </A></h3>

<p>The
QRI segment is used to indicate the weight match for a returned record (where
the responding system employs a numeric algorithm) and/or the match reason code
(where the responding system uses rules or other match options).<br>
Examples of the use of this segment appear in Section 3.6, "MPI Queries."<br>
<center>HL7 Attribute Table - QRI
<a name="QRI"></a>
- Query Response Instance</center><br>
</p>
<TABLE BORDER>
<TR align="center">
<TH><p><b>SEQ</b></p></TH>
<TH><p><b>LEN</b></p></TH>
<TH><p><b>DT</b></p></TH>
<TH><p><b>OPT</b></p></TH>
<TH><p><b>RP/#</b></p></TH>
<TH><p><b>TBL#</b></p></TH>
<TH><p><b>ITEM#</b></p></TH>
<TH><p>ELEMENT
NAME
</p></TH>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>1</p></TD>
<TD colspan=1 align="center"><p>10</p></TD>
<TD colspan=1 align="center"><p>NM</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>01436</p></TD>
<TD colspan=1 align="center"><p>Candidate
Confidence
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>2</p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
<TD colspan=1 align="center"><p>IS</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><p>Y</p></TD>
<TD colspan=1 align="center"><p><u>0392</u></p></TD>
<TD colspan=1 align="center"><p>01437</p></TD>
<TD colspan=1 align="center"><p>Match
Reason Code
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>3</p></TD>
<TD colspan=1 align="center"><p>250</p></TD>
<TD colspan=1 align="center"><p>CE</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p><u>0393</u></p></TD>
<TD colspan=1 align="center"><p>01438</p></TD>
<TD colspan=1 align="center"><p>Algorithm
Descriptor
</p></TD>
</TR>
</TABLE>
<h4>
<A NAME="Heading80">5.5.4.0 QRI field definitions</A></h4>


<h4>
<A NAME="Heading81">5.5.4.1 QRI-1   Candidate confidence   (NM)   01436 </A></h4>

<p>Definition:
This field contains a numeric value indicating the match weight or confidence
level associated with the record.<br>
Example: |0.88| or |12.32|<br>
One use of this optional field is in Patient Look-up transactions where the
searching system employs a numeric algorithm for determining potential matches
to patient/person look-ups.
</p>

<h4>
<A NAME="Heading82">5.5.4.2 QRI-2   Match reason code   (IS)   01437 </A></h4>

<p>Definition:
This field contains a coded value indicating what search components (e.g.,
name, birth date, social security number) of the record returned matched the
original query where the responding system does not assign numeric match
weights or confidence levels. In short, it provides a method for passing a
descriptive indication of why a particular record was found.<br>
.Refer to <cite>User-defined Table 0392  - Match reason</cite><i> </i>for
suggested values.<br>
<center>User-defined Table 0392 - Match reason 
<a name="HL70392"></a></center><br>
</p>
<TABLE BORDER>
<TR align="center">
<TH><p><b>Value</b></p></TH>
<TH><p><b>Description</b></p></TH>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>DB</p></TD>
<TD colspan=1 align="center"><p>Match
on Date of Birth
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>NA</p></TD>
<TD colspan=1 align="center"><p>Match
on Name (Alpha Match)
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>NP</p></TD>
<TD colspan=1 align="center"><p>Match
on Name (Phonetic Match)
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>SS</p></TD>
<TD colspan=1 align="center"><p>Match
on Social Security Number
</p></TD>
</TR>
</TABLE>
<h4>
<A NAME="Heading83">5.5.4.3 QRI-3   Algorithm descriptor   (CE)   01438 </A></h4>

<p><tt>Components:
&lt;identifier (ST)&gt; ^ &lt;text (ST)&gt; ^ &lt;name of coding system
(IS)&gt; ^ &lt;alternate identifier (ST)&gt; ^ &lt;alternate text (ST)&gt; ^
&lt;name of alternate coding system (IS)&gt;</tt><br>
Definition: This field contains a text value indicating the name or identity of
the specific search algorithm to which the <i>RCP-5 Search confidence
threshold</i> and the <i>QRI-1 Candidate confidence</i> refer. Note that there
are sometimes significant differences among the algorithms in their numeric
scales (e.g., one is 0-100, another might be 10 - 20) as well as their meanings
of the same value (two algorithms with an 80% match might not return the same
records). Refer to <cite>User-defined Table 0393  - Match algorithms</cite><i>
</i>for suggested values.<br>
<center>User-defined Table 0393 - Match algorithms 
<a name="HL70393"></a></center><br>
</p>
<TABLE BORDER>
<TR align="center">
<TH><p><b>Value</b></p></TH>
<TH><p><b>Description</b></p></TH>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>LINKSOFT_2.01</p></TD>
<TD colspan=1 align="center"><p>Proprietary
algorithm for LinkSoft v2.01
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>MATCHWARE_1.2</p></TD>
<TD colspan=1 align="center"><p>Proprietary
algorithm for MatchWare v1.2
</p></TD>
</TR>
</TABLE>
<p>Example:
|MATCHWARE_1.2^^HL7nnnn| or |LINKSOFT_2.01^HL7nnnn|<br>
One use of this optional field is in Patient Look-up transactions where the
searching system employs a numeric algorithm for determining potential matches
to patient/person look-ups.
</p>

<h3>
<A NAME="Heading84">5.5.5 RCP - response control parameter segment </A></h3>

<p>The
RCP segment is used to restrict the amount of data that should be returned in
response to query.<br>
<center>HL7 Attribute Table - RCP
<a name="RCP"></a>
- Response Control Parameter</center><br>
</p>
<TABLE BORDER>
<TR align="center">
<TH><p><b>SEQ</b></p></TH>
<TH><p><b>LEN</b></p></TH>
<TH><p><b>DT</b></p></TH>
<TH><p><b>OPT</b></p></TH>
<TH><p><b>RP/#</b></p></TH>
<TH><p><b>TBL#</b></p></TH>
<TH><p><b>ITEM#</b></p></TH>
<TH><p>ELEMENT
NAME
</p></TH>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>1</p></TD>
<TD colspan=1 align="center"><p>1</p></TD>
<TD colspan=1 align="center"><p>ID</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p><u>0091</u></p></TD>
<TD colspan=1 align="center"><p>00027</p></TD>
<TD colspan=1 align="center"><p>Query
Priority
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>2</p></TD>
<TD colspan=1 align="center"><p>10</p></TD>
<TD colspan=1 align="center"><p>CQ</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p><u>0126</u></p></TD>
<TD colspan=1 align="center"><p>00031</p></TD>
<TD colspan=1 align="center"><p>Quantity
Limited Request
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>3</p></TD>
<TD colspan=1 align="center"><p>250</p></TD>
<TD colspan=1 align="center"><p>CE</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p><u>0394</u></p></TD>
<TD colspan=1 align="center"><p>01440</p></TD>
<TD colspan=1 align="center"><p>Response
Modality
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>4</p></TD>
<TD colspan=1 align="center"><p>26</p></TD>
<TD colspan=1 align="center"><p>TS</p></TD>
<TD colspan=1 align="center"><p>C</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>01441</p></TD>
<TD colspan=1 align="center"><p>Execution
and Delivery Time
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>5</p></TD>
<TD colspan=1 align="center"><p>1</p></TD>
<TD colspan=1 align="center"><p>ID</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p><u>0395</u></p></TD>
<TD colspan=1 align="center"><p>01443</p></TD>
<TD colspan=1 align="center"><p>Modify
Indicator
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>6</p></TD>
<TD colspan=1 align="center"><p>512</p></TD>
<TD colspan=1 align="center"><p>SRT</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><p>Y</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>01624</p></TD>
<TD colspan=1 align="center"><p>Sort-by
Field
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>7</p></TD>
<TD colspan=1 align="center"><p>256</p></TD>
<TD colspan=1 align="center"><p>ID</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>Y</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>01594</p></TD>
<TD colspan=1 align="center"><p>Segment
group inclusion 
</p></TD>
</TR>
</TABLE>
<h4>
<A NAME="Heading85">5.5.5.0 RCP field definitions</A></h4>


<h4>
<A NAME="Heading86">5.5.5.1 RCP-1   Query priority   (ID)   00027 </A></h4>

<p>Definition:
 This field contains the time frame in which the response is expected.  Refer
to <cite>HL7 Table 0091 - Query priority</cite> for valid values.  Table values
and subsequent fields specify time frames for response. <br>
<center>HL7 Table 0091 - Query priority
<a name="HL70091"></a></center><br>
</p>
<TABLE BORDER>
<TR align="center">
<TH><p><b>Value</b></p></TH>
<TH><p><b>Description</b></p></TH>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>D</p></TD>
<TD colspan=1 align="center"><p>Deferred</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>I</p></TD>
<TD colspan=1 align="center"><p>Immediate</p></TD>
</TR>
</TABLE>
<h4>
<A NAME="Heading87">5.5.5.2 RCP-2   Quantity limited request   (CQ)   00031  </A></h4>

<p><tt>Components:
 &lt;quantity (NM)&gt; ^ &lt;units (CE)&gt;</tt><br>
Definition:  This field contains the maximum length of the response that can be
accepted by the requesting system.  Valid entries are numerical values (in the
first component) given in the units specified in the second component. Default
is LI (lines). <br>
Refer to<i> </i><cite>HL7 Table 0126 - Quantity limited request</cite> for
valid entries for the second component.  In a segment pattern response, a line
is defined as a single segment. <br>
<center>HL7 Table 0126 - Quantity limited request
<a name="HL70126"></a></center><br>
</p>
<TABLE BORDER>
<TR align="center">
<TH><p><b>Value</b></p></TH>
<TH><p><b>Description</b></p></TH>
<TH><p><b>Message
Usage
</b></p></TH>
<TH><p><b>Comment</b></p></TH>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>CH</p></TD>
<TD colspan=1 align="center"><p>Characters</p></TD>
<TD colspan=1 align="center"><p>RSP/RTB/RDY</p></TD>
<TD colspan=1 align="center"><p>Used
where size of input buffer has limitations
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>LI</p></TD>
<TD colspan=1 align="center"><p>Lines
</p></TD>
<TD colspan=1 align="center"><p>RTB/RDY</p></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>PG</p></TD>
<TD colspan=1 align="center"><p>Pages</p></TD>
<TD colspan=1 align="center"><p>RDY</p></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>RD</p></TD>
<TD colspan=1 align="center"><p>Records</p></TD>
<TD colspan=1 align="center"><p>RSP/RTB/RDY</p></TD>
<TD colspan=1 align="center"><p>In
RSP record = hit
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>ZO</p></TD>
<TD colspan=1 align="center"><p>Locally
defined
</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
</TABLE>
<h4>
<A NAME="Heading88">5.5.5.3 RCP-3   Response modality   (CE)   01440 </A></h4>

<p><tt>Components:
 	&lt;identifier (ST)&gt; ^ &lt;text (ST)&gt; ^ &lt;name of coding system
(IS)&gt; ^ &lt;alternate identifier (ST)&gt; ^ &lt;alternate text (ST)&gt; ^
&lt;alternate coding system (IS)&gt;</tt><br>
Definition:  This field specifies the timing and grouping of the response
message(s).  Refer to <cite>HL7 Table 0394 - Response modality</cite> for valid
values.<br>
<center>HL7 Table 0394 - Response modality 
<a name="HL70394"></a></center><br>
</p>
<TABLE BORDER>
<TR align="center">
<TH><p><b>Value</b></p></TH>
<TH><p><b>Description</b></p></TH>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>R</p></TD>
<TD colspan=1 align="center"><p>Real
Time
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>T</p></TD>
<TD colspan=1 align="center"><p>Bolus
(a series of responses sent at the same time without use of batch formatting)
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>B</p></TD>
<TD colspan=1 align="center"><p>Batch</p></TD>
</TR>
</TABLE>
<h4>
<A NAME="Heading89">5.5.5.4 RCP-4   Execution and delivery time   (TS)   01441 </A></h4>

<p>Specifies
the time the response is to be returned.  This field is only valued when
<i>RCP-1-Query priority</i> contains the value <b>D</b> (Deferred).
</p>

<h4>
<A NAME="Heading90">5.5.5.5 RCP-5   Modify indicator (ID)   01443 </A></h4>

<p>Definition:
 This field specifies whether the subscription is new or is being modified.
Refer to <cite>HL7 Table 0395 - Modify indicator</cite><i> </i>for valid
values.<br>
<center>Table 0395 - Modify indicator 
<a name="HL70395"></a></center><br>
</p>
<TABLE BORDER>
<TR align="center">
<TH><p><b>Value</b></p></TH>
<TH><p><b>Description</b></p></TH>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>N</p></TD>
<TD colspan=1 align="center"><p>New
Subscription
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>M</p></TD>
<TD colspan=1 align="center"><p>Modified
Subscription
</p></TD>
</TR>
</TABLE>
<h4>
<A NAME="Heading91">5.5.5.6 RCP-6   Sort-by field (SRT)   01624 </A></h4>

<p><tt>Components:
&lt;sort-by field/parameter (varies)&gt; ^ &lt;sequencing (ID)&gt; </tt><br>
Definition:  For queries requesting a tabular response, this field specifies by
which fields the response is to be sorted, and the order(s) in which sorting is
to be performed. When the QSC variant is not in use, the values specified for
the first component in this field are derived from the ColName field of the
Output Specification and Commentary; see Section 5.3.3.1.  When the QSC variant
is used, the values are derived from the ColName field of the Input/Output
Specification and Commentary; see Section 5.9.4.1 for an example.  <br>
Each repetition of this field specifies a single sort field.  Thus, the first
repetition of this field specifies the primary sort field; the second
repetition specifies the secondary sort field; etc.
</p>

<h4>
<A NAME="Heading92">5.5.5.7 RCP-7   Segment group inclusion (ID)  01594 </A></h4>

<p>Definition:
Specifies those optional segment groups which are to be included in the
response. Refer to <cite>HL7 Table 0391--Segment group</cite> for values for
Segment Group.  This is a repeating field, to accommodate inclusion of multiple
segment groups.  The default for this field, not present, means that all
relevant groups are included. <br>
<b>Note</b>:	Although the codes for segment groups are taken from <cite>HL7
Table 0391</cite>, the exact segment-level definition of a segment group (e.g.
PIDG) is given only in the conformance statement of the query in which this
segment group appears. <br>
For example, <br>
<center>HL7 Table 0391 - Segment group </center><br>
</p>
<TABLE BORDER>
<TR align="center">
<TH><p><b>Value</b></p></TH>
<TH><p><b>Description</b></p></TH>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>PIDG</p></TD>
<TD colspan=1 align="center"><p>PID
group
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>OBRG</p></TD>
<TD colspan=1 align="center"><p>OBR
group
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>ORCG</p></TD>
<TD colspan=1 align="center"><p>ORC
group
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>RXAG</p></TD>
<TD colspan=1 align="center"><p>RXA
group
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>RXDG</p></TD>
<TD colspan=1 align="center"><p>RXD
group
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>RXEG</p></TD>
<TD colspan=1 align="center"><p>RXE
group
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>RXOG</p></TD>
<TD colspan=1 align="center"><p>RXO
group
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>etc</p></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
</TABLE>
<p><b>Note</b>:
<i>HL7 Table 0391 - Segment group </i>currently includes no values defined by
HL7.  As values are agreed upon in conformance statements balloted by HL7
Technical Committees, they will be included in this table.
</p>

<h3>
<A NAME="Heading93">5.5.6 RDF - table row definition segment</A></h3>

<p>The
RDF segment defines the content of the row data segments (RDT) in the tabular
response (RTB).<br>
*	As an optional segment in a query either a QBP or QBS, this segment can be
used to limit the number of columns returned and to specify what column
positions the fields occupy (where supported, these features can be used to
override the defaults for the particular query).  If omitted, all fields
defined for the query are returned in their default column order.<br>
*	As a required segment in a tabular response (RTB) to either a QBP or QBS,
this segment defines the contents of the table row data (RDT) segments that
follows. It is not necessarily an echo back of the segment as it appeared in
the query.<br>
<center>HL7 Attribute Table - RDF
<a name="RDF"></a>
- Table Row Definition</center><br>
</p>
<TABLE BORDER>
<TR align="center">
<TH><p><b>SEQ</b></p></TH>
<TH><p><b>LEN</b></p></TH>
<TH><p><b>DT</b></p></TH>
<TH><p><b>OPT</b></p></TH>
<TH><p><b>RP/#</b></p></TH>
<TH><p><b>TBL#</b></p></TH>
<TH><p><b>ITEM#</b></p></TH>
<TH><p>ELEMENT
NAME
</p></TH>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>1</p></TD>
<TD colspan=1 align="center"><p>3</p></TD>
<TD colspan=1 align="center"><p>NM</p></TD>
<TD colspan=1 align="center"><p>R</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>00701</p></TD>
<TD colspan=1 align="center"><p>Number
of Columns per Row
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>2</p></TD>
<TD colspan=1 align="center"><p>40</p></TD>
<TD colspan=1 align="center"><p>RCD
</p></TD>
<TD colspan=1 align="center"><p>R</p></TD>
<TD colspan=1 align="center"><p>Y</p></TD>

<TD colspan=1 align="center"><p>0440</p></TD>
<TD colspan=1 align="center"><p>00702</p></TD>
<TD colspan=1 align="center"><p>Column
Description
</p></TD>
</TR>
</TABLE>
<h4>
<A NAME="Heading94">5.5.6.0 RDF field definitions</A></h4>


<h4>
<A NAME="Heading95">5.5.6.1 RDF-1   Number of columns per row   (NM)   00701</A></h4>

<p>Definition:
This field specifies the number of data columns (and therefore the number of
fields) contained within each row of returned data.
</p>

<h4>
<A NAME="Heading96">5.5.6.2 RDF-2   Column description   (RCD)   00702</A></h4>

<p><tt>Components:
&lt;segment field name (ST)&gt; ^ &lt;HL7 data type (ID)&gt; ^ &lt;maximum
column width (NM)&gt;</tt><br>
Definition: Each repetition of this field consists of three components:<br>
*	The segment field name that identifies the field occupying the column.  The
segment field name must agree with the column name as it appears in the
Conformance Statement. Use of the @ sign as prefix to the column name is
optional.<br>
*	The 2 or 3 character HL7 data type, as defined in chapter 2.  Refer to <i>HL7
Table 0440 - Data types </i>for valid values.
<a name="HL70440"></a><br>
*	The maximum width of the column, as dictated by the responding system.  (This
may vary from the HL7-defined maximum field length.)
</p>

<h3>
<A NAME="Heading97">5.5.7 RDT - table row data segment</A></h3>

<p>The
RDT segment contains the row data of the tabular data response message
(TBR).<br>
<center>HL7 Attribute Table - RDT
<a name="RDT"></a>
- Table Row Data</center><br>
</p>
<TABLE BORDER>
<TR align="center">
<TH><p><b>SEQ</b></p></TH>
<TH><p><b>LEN</b></p></TH>
<TH><p><b>DT</b></p></TH>
<TH><p><b>OPT</b></p></TH>
<TH><p><b>RP/#</b></p></TH>
<TH><p><b>TBL#</b></p></TH>
<TH><p><b>ITEM#</b></p></TH>
<TH><p>ELEMENT
NAME
</p></TH>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>1-n</p></TD>
<TD colspan=1 align="center"><p>Variable</p></TD>
<TD colspan=1 align="center"><p>Variable</p></TD>
<TD colspan=1 align="center"><p>R</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>00703</p></TD>
<TD colspan=1 align="center"><p>Column
Value
</p></TD>
</TR>
</TABLE>
<h4>
<A NAME="Heading98">5.5.7.0 RDT field definitions</A></h4>


<h4>
<A NAME="Heading99">5.5.7.1 RDT-1   Column value   (Variable)   00703</A></h4>

<p>Definition:
 This field is a requested field.  Fields occur in the position order defined
for the query or table (unless overridden by an optional RDF segment on a
stored procedure request or Virtual Table query message), separated by field
delimiters.
</p>

<h2>
<A NAME="Heading100">5.6 AUXILIARY QUERY PROTOCOLS</A></h2>

<p>This
section discusses properties of queries that can be described as global
properties.  These properties enable the Client and Server to deal with timing
and sizing issues and to handle exceptions.
</p>

<h3>
<A NAME="Heading101">5.6.1 Immediate vs. deferred response</A></h3>

<p>Responses
to queries can be either immediate or deferred. In the immediate mode, the
responding process gives the response immediately or in a short period during
which the requesting process will wait for the response. In the deferred mode,
the response is returned asynchronously, as a separate message pair. Also, a
time interval for the deferred transaction may be specified. <br>
In the case of immediate mode query, the Server does NOT send a General
Acknowledgement (ACK). The acknowledgement of the query is contained within the
response message. In the case of deferred mode, the query is acknowledged
immediately by an ACK. The Server sends the deferred response at the
appropriate time. The Client acknowledges the response with an ACK. In short,
the deferred query transaction consists of 2 "round trips". <br>
If an immediate mode query message is malformed, a negative ACK is immediately
sent. <br>
Use cases for Deferred include<br>
1)	evaluate the query conditions at a certain point in time and then return the
response. For example, At 9 AM tomorrow, evaluate query and return response.<br>
2)	produce a large report to be communicated to the Server at an off-peak hour.
For example, a response containing all admissions records for the month to be
sent at 4:00 a.m., or a reference lab results listing to be sent at noon.  A
deferred response can benefit both Server and Client in such cases, especially
where the generation, communication, and receipt of segments can all be done at
times of otherwise low-volume processing.<br>
If the Conformance Statement indicates that the Server will support both
immediate and deferred responses, then the Client may indicate the desired
value of this property by sending it in the <i>RCP-1 Response priority</i>
field. If the Server supports only one response type, then the value specified
by the Client must agree.<br>
<A href="ch0502.gif">Click here for Picture </A><br>
The following examples demonstrate how the same query could be invoked in
either immediate or deferred mode.</p>

<h4>
<A NAME="Heading102"> </A></h4>


<h4>
<A NAME="Heading103">5.6.1.1 Immediate response</A></h4>

<p>The
Client submits the following query and indicates that an immediate response is
desired by setting  <i>RCP-1-Response priority</i> to "I".<br>
MSH|^&amp;~\|PCR|Gen
Hosp|PIMS||199811201400-0800||QBP^Q42^QBP_Q13|ACK9901|P|2.4||||||||<br>
QPD|Q42^Tabular Dispense History^HL7nnn|Q0010|555444222111^^^MPI^MR|
|19980531|19990531|<br>
RCP|I|999^RD|<br>
RDF|3|PatientList^ST^20~PatientName^XPN^48~MedicationDispensed^ST^40~RXD.3^TS^26<br>
The Server responds one minute later.<br>
MSH|^&amp;~\|PIMS|Gen
Hosp|PCR||199811201401-0800||RTB^K42^RTB_K13|8858|P|2.3||||||||<br>
MSA|AA|8699|<br>
QAK|Q010|OK|Q42^Tabular Dispense History^HL7nnn|4<br>
QPD|Q42^Tabular Dispense
History^HL7nnn|Q0010|555444222111^^^MPI^MR||19980531|19990531|<br>
RDF|7|PatientId^CX^20~PatientName^XPN^48~OrderControlCode^ID^2~
MedicationDispensed^CE^100~DispenseDate^TS^26~QuantityDispensed^NM^20~
OrderingProvider^XCN^120<br>
RDT|555444222111^^^MPI^MR|Everyman^Adam|RE|525440345^Verapamil Hydrochloride
120 mg TAB^NDC |199805291115-0700|100|77^Hippocrates^Harold^H^III^DR^MD<br>
RDT|555444222111^^^MPI^MR|Everyman^Adam|RE|00182196901^VERAPAMIL HCL ER TAB
180MG ER^NDC |19980821-0700|100|77^Hippocrates^Harold^H^III^DR^MD<br>
RDT|555444222111^^^MPI^MR|Everyman^Adam|RE|00172409660^BACLOFEN 10MG TABS^NDC
|199809221415-0700|10|88^Semmelweis^Samuel^^^DR^MD<br>
RDT|555444222111^^^MPI^MR|Everyman^Adam|RE|00054384163^THEOPHYLLINE 80MG/15ML
SOLN^NDC|199810121145-0700|10|99^Lister^Lenora^^^DR^MD
</p>

<h4>
<A NAME="Heading104">5.6.1.2 Deferred response example</A></h4>

<p>The
Client submits the following query and indicates that a deferred response is
desired by setting <i>RCP-1-Response priority</i> to "D".<br>
MSH|^&amp;~\|PCR|Gen
Hosp|PIMS||199811201400-0800||QBP^Q42^QBP_Q13|ACK9901|P|2.4||||||||<br>
QPD|Q42^Tabular Dispense History^HL7nnn|Q0010|555444222111^^^MPI^MR|
|19980531|19990531|<br>
RCP|D|999^RD|<br>
RDF|3|PatientList^ST^20~PatientName^XPN^48~MedicationDispensed^ST^40~RXD.3^TS^26<br>
The Server responds one minute later with a general acknowledgement.<br>
MSH|^&amp;~\|PIMS|Gen Hosp|PCR||199811201401-0800||ACK|8875|P|2.4||||||||<br>
MSA|AA|8699|<br>
The Server responds the following morning with the desired data.<br>
MSH|^&amp;~\|PIMS|Gen
Hosp|PCR||199811210300-0800||RTB^K42^RTB_K13|9950|P|2.3||||||||<br>
QAK|Q010|OK|Q42^Tabular Dispense History^HL7nnn|4<br>
QPD|Q42^Tabular Dispense
History^HL7nnn|Q0010|555444222111^^^MPI^MR||19980531|19990531|<br>
RDF|7|PatientId^CX^20~PatientName^XPN^48~OrderControlCode^ID^2~
MedicationDispensed^CE^100~DispenseDate^TS^26~QuantityDispensed^NM^20~
OrderingProvider^XCN^120<br>
RDT|555444222111^^^MPI^MR|Everyman^Adam|RE|525440345^Verapamil Hydrochloride
120 mg TAB^NDC |199805291115-0700|100|77^Hippocrates^Harold^H^III^DR^MD<br>
RDT|555444222111^^^MPI^MR|Everyman^Adam|RE|00182196901^VERAPAMIL HCL ER TAB
180MG ER^NDC |19980821-0700|100|77^Hippocrates^Harold^H^III^DR^MD<br>
RDT|555444222111^^^MPI^MR|Everyman^Adam|RE|00172409660^BACLOFEN 10MG TABS^NDC
|199809221415-0700|10|88^Semmelweis^Samuel^^^DR^MD<br>
RDT|555444222111^^^MPI^MR|Everyman^Adam|RE|00054384163^THEOPHYLLINE 80MG/15ML
SOLN^NDC|199810121145-0700|10|99^Lister^Lenora^^^DR^MD<br>
The Client responds immediately with a general acknowledgement.<br>
MSH|^&amp;~\|PCR|Gen Hosp|PIMS||199811210300-0800||ACK|8750|P|2.4||||||||<br>
MSA|AA|9950|
</p>

<h3>
<A NAME="Heading105">5.6.2 Query cancellation</A></h3>

<p>Canceling
a query is equivalent to canceling an order in that it is asking the
discontinuation of a request for which a response may already be on its way.
In the case of an interactive query, a cancellation request is a courtesy on
the part of the Client, but not strictly required. How long the query will stay
open is an implementation issue. <br>
Although the effect to the Client is the same as if it had not sent any message
(no further query data is received), receipt of this message by the Server
enables it to discard any unsent continuation data that might be queued.<br>
MSH||||||||QCN^Jnn^QCN_J01|<br>
QID|Q001|Q99^SomeQuery^0003|
</p>

<h3>
<A NAME="Heading106">5.6.3 Interactive continuation of response messages</A></h3>

<p>The
Interactive Continuation Protocol defines the methodology for the intentional
transmission of a large query-response payload over multiple HL7 messages.
Without this protocol, the response would be returned in a single large logical
message. <br>
The protocol is called interactive because there is an ongoing dialog between
the Client and the Server. The dialog commences when the Client issues a query
for a potentially large amount of data, but specifies in the <i>RCP-2-Quantity
limited request,</i> that only a limited amount of data is to be returned in
each continued response.  The Server then returns one response message
containing data up to the requested quantity. The Client may continue to ask
for further subsets of the data until the entire set is exhausted or may choose
to cancel the query. <br>
This use of the term "continuation" responses in queries should not be confused
with its use in continuing an unsolicited fragmented message. In the case of
continuing a response to query the control is on the side of the querying
application and there is an explicit cancellation event. In the case of
continuation of an unsolicited message, the control is on the part of the
sending application and there is no concept of canceling the message
transmission. <br>
Segment fragmentation and message fragmentation are discussed in chapter 2.
</p>

<h4>
<A NAME="Heading107"> </A></h4>


<h4>
<A NAME="Heading108">5.6.3.1 Interactive continuation  algorithm and rules</A></h4>

<p>The
rules for the interactive continuation (of a query response) are as follows:<br>
*	If the Server is sending a subset of the data, the message is terminated with
a DSC segment with the <i>DSC-1-Continuation pointer</i> set to the appropriate
pointer value and the <i>DSC-2 -Continuation type </i>set to "L".<br>
*	If the Client wishes to receive the next installment, the query is sent again
with a DSC segment following the RCP.  The <i>DSC-1-Continuation pointer</i>
echoes the value sent by the Server.<br>
*	The Server continues to send installments in response to the Client's request
until there is no more data. The end of data is signified by the absence of the
DSC segment OR an empty value in <i>DSC-1-Continuation pointer.</i><br>
*	If the Client wishes to cancel the query before the end of the data is
reached, a Cancel query is sent.<br>
In addition to <i>DSC-1-Continuation pointer</i>, <i>QAK-1-Query tag</i> may be
used to confirm to the Client which query instance the Server is responding to,
since the Client may not be relied upon to have retained the text of each query
message and continuation request.<br>
The value of <i>MSH-10-Message control ID </i>will be different for every
message sent by the Client  (<i>i.e., </i>the initial query and each
continuation request).  Thus the value of <i>MSA-2-Message control ID</i> for
each message sent by the Server (which echoes the value of <i>MSH-10-Message
control ID</i> from the Client) will vary among multiple response payload
messages.  By contrast, <i>QAK-1-Query tag</i> will remain the same across all
response payload messages to a given query instance.
</p>

<h4>
<A NAME="Heading109">5.6.3.2 Use case</A></h4>

<p>One
use of queries is to retrieve data from one application for presentation to
users of another.  This approach might be used for users of a patient care
system retrieving data from lab or other ancillaries.  It also might permit
users of a pharmacy system to retrieve a patient's lab results from the lab
system or non-pharmacy order data from the patient care system.  Almost any
other application system could be the source of data or the system initiating
the query for its users.<br>
Of particular interest is the case where the inquiring user formulates the
query online at the terminal of one system and waits while that system sends
the query to another.  The inquiring user gets the response and displays it at
their terminal.  The user formulating such a query may only have limited
understanding of what data is available for a given patient.  Sometimes the
user's preference would be to make a simple query such as "give me recent data
in reverse chronological sequence" rather than "give me data for yesterday,"
since there may be some data available for today, or there may be data from two
days ago that is of interest.  The user will look at the data returned and
simply quit looking at it after finding the part that is of interest.  (The
time frames or the sort sequence may differ, or the user may wish to impose
some selectivity on the response, but the general principle remains the same.
The user would prefer to make a vague statement of the interest, have the data
presented in order of decreasing likelihood of interest, and quit when he or
she has seen enough.)<br>
While beneficial to the user, this way of requesting data could be very
burdensome when the resulting query takes place over an inter-application
interface.  If the Server were to retrieve, format, and send all the data the
user might like to see, the processing load would be extremely high and the
response time unacceptable.<br>
The interactive continuation protocol provides a way to permit the users to
formulate queries loosely while limiting the processing burden on the Server.
The Client specifies the general constraints of the query and an amount of data
to be returned.  (For example, the query might be for lab results for patient
#12379 and 44 lines would be requested.)  The Server retrieves and formats the
specified amount of data and returns it with a special key field,
<i>DSC-1-Continuation pointer</i>.  The Server presents the requested data to
the user and retains the continuation pointer field for use if another query is
needed.  The internal structure of the value is not known to the Client.  <br>
If, after viewing the data, the user requests more, the Client sends the query
again in a format that is identical with the first, except that
<i>DSC-1-Continuation pointer</i> value is included and the requested amount of
data may be changed.  The Server may use the continuation pointer field as a
key into its database to continue retrieval and formatting of the results.  If
the user does not request more data, no further messages are exchanged.<br>
The initiating system may also explicitly terminate the query by sending a
QCN^J01 (cancel query) message.  Prior to HL7 Version 2.4, a "cancel query"
message was formatted just like a continuation query, except that the
event-type (<i>MSH-9-message type</i>) was set equal to CNQ.  (The CNQ trigger
event is retained for backward compatibility only.)  Receipt of the QCN^J01
message by the responding system enables it to discard any unsent continuation
data that might be queued.
</p>

<h4>
<A NAME="Heading110">5.6.3.3 Example of interactive continuation protocol</A></h4>

<p>The
user wishes to know all the medications dispensed for the period between
January 1, 1998, and December 31, 1999 for the patient whose medical record
number is "555444222111".  The Client submits the following query and invokes
the interactive continuation protocol. Note that the quantity has been limited
to 8 lines.<br>
MSH|^&amp;~\|PCR|Gen
Hosp|IE||200009171400-0800||QBP^Q41^QBP_Q15|8699|P|2.4||||||||<br>
QPD|Q41^DispenseHistory^HL7nnnn|Q001|555444222111^^^MPI
^MR||19980101|19991231|<br>
RCP|I|8^LI|<br>
The pharmacy system identifies medical record number "555444222111" as
belonging to Adam Everyman and locates 7 prescription dispenses meeting the
criteria. As shown in the following response, eight lines of data are returned
as requested. The response ends with a DSC segment showing the continuation
pointer and the indication that this is a logical breaking point.  <br>
MSH|^&amp;~\|PIMS|Gen
Hosp|PCR||200009171401-0800||RDY^R41^RDY_R15|8858|P|2.3||||||||<br>
MSA|AA|8699|<br>
QAK|Q001|OK|Q41^DispenseHistory^HL7nnnn|^8<br>
QPD|Q41^DispenseHistory^HL7nnnn|Q001|555444222111^^^MPI^MR||19980101|19991231|<br>
DSP||        GENERAL HOSPITAL - PHARMACY DEPARTMENT          DATE:09-17-00<br>
DSP||        DISPENSE HISTORY REPORT                               PAGE  1<br>
DSP||MRN          Patient Name       MEDICATION DISPENSED        DISP-DATE<br>
DSP||555444222111 Everyman,Adam      VERAPAMIL HCL 120 mg TAB   10/12/1999<br>
DSP||555444222111 Everyman,Adam      VERAPAMIL HCL ER TAB 180MG 09/21/1999<br>
DSP||555444222111 Everyman,Adam      BACLOFEN 10MG TABS         08/22/1999<br>
DSP||555444222111 Everyman,Adam      THEOPHYLLINE 80MG/15ML SOL 05/29/1999<br>
DSP||       &lt;&lt; END OF Screen&gt;&gt;<br>
DSC|77|L|<br>
The Client wishes to receive another payload. <a name="fnB0"
href="#fn0">[1]</a><br>
MSH|^&amp;~\|PCR|Gen
Hosp|IE||199811201405-0800||QBP^Q41^QBP_Q15|8890|P|2.4||||||||<br>
QPD|Q41^DispenseHistory^HL7nnnn|Q001|555444222111^^^MPI^MR||19980101|19991231|<br>
RCP|I|8^LI|<br>
DSC|77|L|<br>
The Server returns the next payload and indicates in <i>QAK-4-Hit count</i>
that this is the last of the data..<br>
MSH|^&amp;~\|PIMS|Gen
Hosp|PCR||199811201407-0800||RDY^R15|8898|P|2.3||||||||<br>
MSA|AA|8890|<br>
QAK|Q001|OK|Q41^DispenseHistory^HL7nnnn|^7^^Y|<br>
QPD|Q41^DispenseHistory^HL7nnnn|Q001|555444222111^^^MPI^MR||19980101|19991231|<br>
DSP||        GENERAL HOSPITAL - PHARMACY DEPARTMENT          DATE:09-17-99<br>
DSP||        DISPENSE HISTORY REPORT                               PAGE  1<br>
DSP||MRN          Patient Name       MEDICATION DISPENSED        DISP-DATE<br>
DSP||555444222111 Everyman,Adam      VERAPAMIL HCL 120 mg TAB   05/29/1998<br>
DSP||555444222111 Everyman,Adam      VERAPAMIL HCL ER TAB 180MG 04/21/1998<br>
DSP||555444222111 Everyman,Adam      BACLOFEN 10MG TABS         04/22/1998<br>
DSP||       &lt;&lt; END OF REPORT&gt;&gt;<br>
The query/response is now completed.
</p>

<h4>
<A NAME="Heading111">5.6.3.4 Message fragmentation example </A></h4>

<p>Query
responses, like unsolicited updates, may need to force the continuation of a
message, or even a segment, across multiple physical messages. This is more
precisely described as fragmenting. Fragmentation is discussed in detail in
chapter 2. Those aspects pertaining to how this would apply to a query response
are repeated here for the reader's convenience.<br>
The Client requests the last chest x-ray for the patient whose medical record
number is 555444222111. The following query is submitted.<br>
MSH||CIS||RAD||199910180900-0700||QBP^Q61^QBP_Q11|7777|P|2.4|<br>
QPD|Q61^Radiology Result^HL7nnnn|Q98|555444222111^^^^MR|<br>
RCP|I|<br>
The Server returns the following response but the OBX segment that contains a
DICOM image overflows its buffer. The segment is fragmented as follows:<br>
MSH||RAD||CIS||||RSP^K61^RSP_K61|5555|P|2.4|<br>
MSA|AA|7777|<br>
QAK|Q98|OK|Q61^Radiology Result^HL7nnnn|<br>
QPD|Q61^Radiology Result^HL7nnnn|Q98|555444222111^^^^MR|<br>
PID|||5554442221111^^^^MR|<br>
ORC<br>
OBR<br>
OBX||ED|13^^L||abcdefghij|<br>
ADD|<br>
DSC|99|F|<br>
The Client returns an ACK upon receipt of the response.<br>
MSH||CIS||RAD||||ACK|7780|P|2.4|<br>
MSA|AA|5555|<br>
The Server sends the following continued response. Note that the ADD segment
will contain the remainder of the data from the fragmented segment. The
response then continues on as normal.<br>
MSH||RAD||CIS||||RSP^K61^RSP_K61|5560|P|2.4||99|<br>
ADD|klmnop|<br>
OBX|<br>
...<br>
The Client returns an ACK upon receipt of the response.<br>
MSH||CIS||RAD||||ACK|7782|P|2.4|<br>
MSA|AA|5560|
</p>

<h3>
<A NAME="Heading112">5.6.4 Batch message as a query response</A></h3>

<p>The
HL7 query also can be used to query for a batch in the following manner:<br>
a)	Use the value B of <i>RCP-3-Response modality </i>to specify a batch
response.<br>
<b>Note:</b> 	If using old style query mode, the value BB or BL of
<i>QRD-5-Deferred response type</i> may be used to specify a batch response.
The query will be acknowledged with a general acknowledgment as in the Deferred
Access example above <br>
b)	in addition, insert into the batch file the query defining  and RCP segments
as follows:<br>
</p>
<TABLE>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[FHS]</tt></p></TD>
<TD colspan=1 align="left"><p><tt>(file
header segment)
</tt></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>{
[BHS]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>(batch
header segment)
</tt></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 QPD
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
defining segment Note: if using old style query mode, the QRD and QRF segments
may be used.
</tt></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 [RCP]
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 { MSH
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>(one
or more HL7 messages)
</tt></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
   ....
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
   ....
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
   ....
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
  }
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
  [BTS]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>(batch
trailer segment)
</tt></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
  }
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[FTS]</tt></p></TD>
<TD colspan=1 align="left"><p><tt>(file
trailer segment)
</tt></p></TD>
</TR>
</TABLE>
<p>c)
the acknowledgment of a batch is described in chapter 2.<br>
d)	The Conformance Statement should stipulate if the batch modality is supported.
</p>

<h3>
<A NAME="Heading113">5.6.5 Query error response</A></h3>

<p>A
query/response error can occur at 3 levels:<br>
*	Communication failure (broken connection, timeout) <br>
*	Malformed message (message reject) <br>
*	Malformed query (application error)<br>
If the application receiving the query detects an error while processing the
query, the preferred method of response is to return an Application Error (AE)
or Application Reject (AR) condition in the <i>MSA-1-Acknowledgement code</i>
of the applicable query response message. Further description of the error code
is to be included in <i>ERR-1-Error code and location</i>. Note that
<i>MSA-6-Error condition</i> is retained for backward compatibility for those
applications not using the ERR segment. Thus far, this method is consistent
with the methods used elsewhere for reporting errors in acknowledgement
messages, irrespective of the type of message being acknowledged. In addition,
because this is a query response, it is important to include the QAK segment
because it specifies the query tag that will identify the particular query
instance that was in error.  This is of particular importance where a query
response may span more than one message. <br>
In summary, use the ERR segment to describe the error if the message fails
because of <br>
*	a malformed message<br>
*	a malformed query - problem with query tag, problems with parameters<br>
The ERR segment supercedes <i>QAK-2-Query response status</i>.<br>
There are 3 common situations that can arise in a query error response:<br>
<b>Situation 1: Malformed Message</b><br>
The query message itself is bad. The parser does not get to the actual query
content. Something is wrong with the envelope, i.e., the message is
malformed.<br>
The only response is a negative ACK message containing the MSH, MSA and the
ERR. That is, the Server creates an ACK message with AR in
<i>MSA-1-Acknowledgement code</i> in the above sentence. The dialogue is
ended.<br>
<b>Situation 2: Malformed Query</b><br>
The query message got to the Server and is legitimate, but the Server cannot
process the query for some reason, i.e., the query is malformed.<br>
The Response message indicates a negative acknowledgement and shows the problem
in the ERR. The response message contains the MSH, MSA, ERR, QAK and the query
defining segment if available. That is, the Server creates an ACK message with
AE in <i>MSA-1-Acknowledgement code</i> in the above sentence. The rest of the
message is absent.<br>
Note that the continuation (DSC) segment is not sent or, if it is, its
continuation pointer field (<i>DSC-1</i>-C<i>ontinuation pointer</i>) is null.
<br>
<b>Note:</b>	The use of AE (application error) and AR (application reject)
codes in <i>QAK-2-Query response status</i> has been deprecated in favor of the
ERR segment. <br>
<b>Situation 3: No data found</b><br>
The query is well formed, but there is no data to be returned by the query.
This is not strictly an error condition. This example clarifies the protocol to
be followed. <br>
The Response message contains MSH, MSA, QAK, and query defining segment. The
QAK would indicate "no records found". The rest of the message is absent, i.e.,
no blank rows or segments are sent.<br>
<b>Note:</b>  	If the responding application successfully processes the query,
but is unable to find any qualifying data, this is not an error condition.  The
responding application returns an Application Accept (AA) in the MSA segment of
the query response message, but does not return any data segments (DSP, RDT, or
iterations of the items that are counted in hit counts).  The continuation
(DSC) segment is not sent or, if it is, its continuation pointer field
(<i>DSC-1- Continuation pointer</i>) is null.  If the QAK segment is being
used, the field <i>QAK-2-Query response</i> status is valued with NF (no data
found, no errors).
</p>

<h2>
<A NAME="Heading114">5.7 PUBLISH AND SUBSCRIBE</A></h2>

<p>This
section outlines the framework/process of the publish and subscribe machinery.
</p>

<h3>
<A NAME="Heading115">5.7.1 Introduction</A></h3>

<p>"Publish
and subscribe" refers to the ability of one system, the &#180;Publisher', to
offer a data stream that can be sent to recipient systems upon subscription.
In one sense, the entire HL7 unsolicited update paradigm, in which the sender
sends out a stream of messages to recipients, is a kind of publish and
subscribe mechanism.  Subscriptions to unsolicited updates are established at
interface set-up time when analysts on both sides agree to start sending a
stream of data.<br>
This section describes a mechanism by which the Publisher defines a stream of
data, but also agrees to selectively subset the message stream based on
query-like data constraints. In the normal case, the right of the Subscriber to
subscribe is decided at interface setup time. At runtime, the Subscriber
controls the data rules under which it sends messages.<br>
Runtime subscription has existed in earlier versions of HL7, but little
attention has been drawn to it. Original mode queries could define an open
ended time interval in <i>QRF-9-When quantity/timing qualifier</i>.  The
unexplained semantics of this field had been interpreted to mean: If the QRF-9
specified an end time in the future, then the source system would keep sending
results using the query continuation protocol.<br>
This section elaborates on such a mechanism, and more cleanly ties the
selective filtering into the whole query facility.
</p>

<h3>
<A NAME="Heading116">5.7.2 Details</A></h3>

<p>Subscription
is a process/protocol that allows one system to request that prospective data
be sent for a specified period of time, or for an open-ended period of time
until further notice. It allows a message stream to be selectively filtered by
a query-like mechanism. Specific messages have been defined for subscription
and the canceling of a subscription.<br>
A Publisher is one who possesses and transmits streams of data. The Publisher
might be a mediator or a broker, such as an interface engine. The Publisher is
not necessarily the system that collected the data, but it is the system
willing to transmit it<br>
With traditional "unsolicited update subscriptions", a Publisher sends the
entire data stream to the recipients.  A Publisher normally transmits
unfiltered data. However, the Publisher may agree to selectively filter the
stream of data within parameters as defined by analysts. For each filterable
stream, the Publisher defines a Conformance Statement that lists the data
values that may be used in the filter expression, and defines the segment
pattern for the messages that are selected.<br>
If supported in the Conformance Statement, a subscription may be modified at a
later date. <i>RCP-6-Modify indicator </i>is set to "M", and the Action Code
parameter is set to "A" or "D" as appropriate. If modification is allowed, the
Server bears responsibility for maintaining the filter list. If, as is usually
the case, the onus of retaining the filters is on the Client, modification is
not allowed and would not be part of the Conformance statement.
</p>

<h3>
<A NAME="Heading117">5.7.3 Examples</A></h3>

<p>A
lab system normally sends all reports to the central archive. To provide better
service to other departments, the Lab decides to offer a filtered stream in
addition to the full stream going to the archive.<br>
The lab decides that it will allow recipients to select based on the MRN of the
patient, on the type of study (OBR-4), and on the ordering provider (OBR-16).
It names this filtered stream "ORU-Subscription", and writes a conformance
specification.<br>
At interface setup time, permission is given for four systems, CommunityNorth,
CommunitySouth, CommunityEast and CommunityWest to receive this filtered
stream.<br>
The Conformance Statement for this published filtered stream might be:</p>

<h4>
<A NAME="Heading118"> </A></h4>


<h4>
<A NAME="Heading119">5.7.3.1 Example of a publish and subscribe Conformance Statement</A></h4>

<p><center><b>Conformance
Statement</b></center><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Publication
ID (Query ID=Z83):
</b></p></TD>
<TD colspan=1 align="left"><p>Z83</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Type:</b></p></TD>
<TD colspan=1 align="left"><p>Publish</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Publication
Name:
</b></p></TD>
<TD colspan=1 align="left"><p>ORU
Subscription
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Trigger (= MSH-9):
</b></p></TD>
<TD colspan=1 align="left"><p>QSB^Z83^QSB_Q16</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Mode:
</b></p></TD>
<TD colspan=1 align="left"><p>Both</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Response
Trigger (= MSH-9):
</b></p></TD>
<TD colspan=1 align="left"><p>ORU^R01^ORU_R01</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Characteristics:
</b></p></TD>
<TD colspan=1 align="left"><p>Returns
lab results reports for the patient(s) as constrained in the input parameters.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Purpose:</b></p></TD>
<TD colspan=1 align="left"><p>Sends
Lab Results, either filtered or unfiltered, as specified in the input parameters.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Response
Characteristics:
</b></p></TD>
<TD colspan=1 align="left"><p>A
standard query response is not received from the server.  Instead, actual ORU
messages are returned corresponding to the constraints expressed in the input
parameters.<br>
The input parameters are ANDed when selecting data to be returned.  That is,
all input parameters that are specified must be satisfied in order for a result
report to be sent.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Based
on Segment Pattern:
</b></p></TD>
<TD colspan=1 align="left"><p>R01</p></TD>
</TR>
</TABLE>
<p><br>
</p>
<TABLE>
<TR align="left">
<TD colspan=1 align="left"><p><tt><b><u>QSB^Z83^QSB_Q16</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Query
Grammar:  QSB Message 
</u></b></tt></p></TD>
<TD colspan=1 align="center"><p>Section
Reference
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header Segment
</tt></p></TD>
<TD colspan=1 align="center"><p>2.16.9</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QPD</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Parameter Definition
</tt></p></TD>
<TD colspan=1 align="center"><p>5.5.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>RCP</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Response
Control Parameter
</tt></p></TD>
<TD colspan=1 align="center"><p>5.5.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="center"><p>2.16.4</p></TD>
</TR>
</TABLE>
<p><br>
</p>
<TABLE>
<TR align="left">
<TD colspan=1 align="left"><p><tt><b><u>ORU^R01^ORU_R01</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Response
Grammar:  ORU Message
</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Group
Control
</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Comment</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Support
Indicator
</u></b></tt></p></TD>
<TD colspan=1 align="center"><p>Sec
Ref
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.9</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>{</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>Begin
Patient Result 
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
[
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>PIDG</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Begin
PID Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
  PID
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Patient
Identification
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>3.4.2</p>
<BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
  [ PD1 ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Additional
Demographics
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>3.4.10</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
  [ { NK1 } ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Next
of Kin/Associated Parties
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>3.3.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
  [ { NTE } ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Notes
and comments
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.10</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
  [ PV1
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Patient
Visit
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>PV1G</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Begin
PV1 Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>3.4.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
    [ PV2 ] ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Patient
Visit - Additional Info.
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>Close
PV1 Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>3.4.4</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 ]
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>Close
PID Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 {
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>OBRG</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Begin
OBR Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
   [ ORC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Order
Common
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>4.5.1</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
    OBR
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Observations
Report ID
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>7.4.1</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
     [ { NTE } ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Notes
and Comments
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.10</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
     {
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>OBXG</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Begin
OBX Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
       [ OBX ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Observation/Result</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>7.4.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
         [ { NTE } ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Notes
and Comments
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
      }
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>Close
OBX Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 { [ CTI ] }
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Clinical
Trial Identification
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>7.8.4</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 }
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>Close
OBR Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>}</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>Close
Patient Result
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.4</p></TD>
</TR>
</TABLE>
<p><b>QPD
Input Parameter Specification</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Field
Seq (Query ID=Z83)
</b></p></TD>
<TD colspan=1 align="left"><p><b>ColName</b></p></TD>
<TD colspan=1 align="left"><p><b>Key/</b><br>
<b>Search
</b></p></TD>
<TD colspan=1 align="left"><p><b>Sort</b></p></TD>
<TD colspan=1 align="left"><p><b>LEN</b></p></TD>
<TD colspan=1 align="left"><p><b>DT</b></p></TD>
<TD colspan=1 align="left"><p><b>Opt</b></p></TD>
<TD colspan=1 align="left"><p><b>RP/#</b></p></TD>
<TD colspan=1 align="left"><p><b>Match
Op
</b></p></TD>
<TD colspan=1 align="left"><p><b>TBL
#
</b></p></TD>
<TD colspan=1 align="left"><p><b>Segment
Field Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>Service
Identifier Code
</b></p></TD>
<TD colspan=1 align="left"><p><b>ElementName</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>1</p></TD>
<TD colspan=1 align="left"><p>MessageQueryName</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>60</p></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>R</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Message
Query Name
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>2</p></TD>
<TD colspan=1 align="left"><p>QueryTag</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>32</p></TD>
<TD colspan=1 align="left"><p>ST</p></TD>
<TD colspan=1 align="left"><p>R</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Query
Tag
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>3</p></TD>
<TD colspan=1 align="left"><p>MRN</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CX</p></TD>
<TD colspan=1 align="left"><p>O</p></TD>
<TD colspan=1 align="left"><p>Y</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID.3</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>4</p></TD>
<TD colspan=1 align="left"><p>ActionCode</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ID</p></TD>
<TD colspan=1 align="left"><p>O</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>0323</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>5</p></TD>
<TD colspan=1 align="left"><p>PatientLocation</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PL</p></TD>
<TD colspan=1 align="left"><p>O</p></TD>
<TD colspan=1 align="left"><p>Y</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PV1.3</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>6</p></TD>
<TD colspan=1 align="left"><p>HospitalService</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>IS</p></TD>
<TD colspan=1 align="left"><p>O</p></TD>
<TD colspan=1 align="left"><p>Y</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PV1.10</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>7</p></TD>
<TD colspan=1 align="left"><p>SRVC</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>O</p></TD>
<TD colspan=1 align="left"><p>Y</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>OBR.4</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>8</p></TD>
<TD colspan=1 align="left"><p>PVDR</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CN</p></TD>
<TD colspan=1 align="left"><p>O</p></TD>
<TD colspan=1 align="left"><p>Y</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>OBR.16</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
</TABLE>
<p><b>QPD
Input Parameter Field Description and Commentary</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Input
Parameter (Query ID=Z83)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Comp.
Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>DT</b></p></TD>
<TD colspan=1 align="left"><p><b>Description</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>MessageQueryName</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>Must
be valued <b>Z83^ORU Subscription^HL7nnnn</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>QueryTag</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ST</p></TD>
<TD colspan=1 align="left"><p>Unique
to each query message instance.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>MRN</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CX</p></TD>
<TD colspan=1 align="left"><p>One
or more patient identifiers may be sent. When a list is provided, results will
be sent if any parameter matches any ID known for a patient.  Sending no value
matches all patients
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>ActionCode</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ID</p></TD>
<TD colspan=1 align="left"><p>If
the subscription is being modified, the desired action e.g., Add or Delete is
carried in this field.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>PatientLocation</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PL</p></TD>
<TD colspan=1 align="left"><p>When
a list is provided, results will be sent if any parameter matches PV1.3 for any
result.  Sending no value matches all results.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>HospitalService</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>IS</p></TD>
<TD colspan=1 align="left"><p>When
a list is provided, results will be sent if any parameter matches PV1.10 for
any result.  Sending no value matches all results.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>SRVC</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>When
a list is provided, results will be sent if any parameter matches OBR.4 for any
result..  Sending no value matches all results.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>PVDR</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CN</p></TD>
<TD colspan=1 align="left"><p>When
a list is provided, results will be sent if any parameter matches OBR.16 for
any result..  Sending no value matches all results.
</p></TD>
</TR>
</TABLE>
<p><b>RCP
Response Control Parameter Field Description and Commentary</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Field
Seq (Query ID=Z99)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Name</b></p></TD>
<TD colspan=1 align="left"><p><b>Component
Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>LEN</b></p></TD>
<TD colspan=1 align="left"><p><b>DT</b></p></TD>
<TD colspan=1 align="left"><p><b>Description</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>1</p></TD>
<TD colspan=1 align="left"><p>Query
Priority
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>1</p></TD>
<TD colspan=1 align="left"><p>ID</p></TD>
<TD colspan=1 align="left"><p>(<b>D</b>)eferred
or (<b>I</b>)mmediate.  Default is <b>I</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>2</p></TD>
<TD colspan=1 align="left"><p>Quantity
Limited Request
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>10</p></TD>
<TD colspan=1 align="left"><p>CQ</p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Quantity</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>NM</p></TD>
<TD colspan=1 align="left"><p>Number
of units (specified by the following component) that will be returned in each
increment of the response.  If no value is given, the entire response will be
returned in a single increment.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Units</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p><b>CH</b>aracters,
<b>LI</b>nes, <b>P</b>a<b>G</b>es, or <b>R</b>ecor<b>D</b>s.  Default is
<b>LI</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>3</p></TD>
<TD colspan=1 align="left"><p>Response
Modality
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>60</p></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p><b>R</b>eal
time or <b>B</b>atch.  Default is <b>R</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>7</p></TD>
<TD colspan=1 align="left"><p>Segment
group inclusion
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>256</p></TD>
<TD colspan=1 align="left"><p>ID</p></TD>
<TD colspan=1 align="left"><p>What
segment group(s) are to be included.  If this field is not valued, all segment
groups will be included.
</p></TD>
</TR>
</TABLE>
<h3>
<A NAME="Heading120">5.7.4 Establishing a subscription</A></h3>

<p>To
establish the subscription to see lab results for two patients, an authorized
Subscriber (e.g. CommunityWest) would send a query message with event code
Q99<br>
MSH||CPR|COMWEST|PS^LAB||||QSB^Q99^QSB_Q16|8888|P|2.4|<br>
QPD|Q99^ORU_Subscription^HL7nnnn|Q0044|1234^^^MPI^MR~4567^^^MPI^MR|<br>
RCP||||||N|<br>
As results are generated by the Lab, they are all sent to the archive. In
addition, the Lab has a list of all subscription requests (such as the message,
above).  For each message, it checks the query filters associated with the
subscription against the message being considered. If the message matches the
query, it is sent to the recipient.<br>
For example, a hit on patient 4567 would result in the message:<br>
MSH||PS^LAB||CPR|COMWEST||||ORU^R01^ORU_R01|4409|P|2.4|<br>
PID|||4567^^^MPI^MR|....<br>
OBR|....<br>
OBX|...<br>
<b>Note:  	</b>The result message has message type ORU^R01^ORU_R01 (as
specified by the Conformance Statement).
</p>

<h3>
<A NAME="Heading121">5.7.5 Canceling a subscription</A></h3>

<p>Canceling
a subscription is analogous to canceling a query. See sections 5.4.6 and 0.<br>
The template would be as follows.<br>
MSH||||||||QSX^Jnn^QSX_J01|<br>
QID<br>
To cancel the subscription cited in the previous section, CommunityWest would
send a <strike>query</strike> cancel message with event code J99.<br>
MSH||CPR|COMWEST|PS^LAB||||QSX^J99^QSX_J01|<br>
QID|Q0044|Q99^ORU_Subscription^HL70003|
</p>

<h2>
<A NAME="Heading122">5.8 QUERY IMPLEMENTATION CONSIDERATIONS</A></h2>

<p>Implementation
issues are discussed in section 5.1.
</p>

<h2>
<A NAME="Heading123">5.9 QUERY/RESPONSE MESSAGE EXAMPLES</A></h2>


<h3>
<A NAME="Heading124">5.9.1 Query by parameter (QBP) / segment pattern response (RSP) </A></h3>


<h4>
<A NAME="Heading125"> </A></h4>


<h4>
<A NAME="Heading126">5.9.1.1 Proposed dispense history example and Conformance Statement</A></h4>

<p>The
following is the structure of the Pharmacy Dispense Information (RDR) message,
an original-mode query that was defined in Chapter 4.<br>
</p>
<TABLE>
<TR align="left">
<TH colspan=1 align="left"><p><tt><b><u>RDR^RDR</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Pharmacy/treatment
Dispense Information
</u></b></tt></p></TH>
<TH><BR></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSA</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Acknowledgment
</tt></p></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[ERR]</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Error</tt></p></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>{
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
   QRD
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Definition
</tt></p></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
  [QRF]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Filter
</tt></p></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
  [PID
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Patient
Identification
</tt></p></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
     {[NTE]}]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Notes
and Comments (for PID)
</tt></p></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 { 
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
   ORC
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Common
Order
</tt></p></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
   [
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
    RXE
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Pharmacy/Treatment
Encoded Order
</tt></p></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
      {RXR}
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Pharmacy/Treatment
Route
</tt></p></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
     {[RXC]}
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Pharmacy/Treatment
Component
</tt></p></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
   ]
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
   {RXD
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Pharmacy/Treatment
Dispense
</tt></p></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
      {RXR}
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Pharmacy/Treatment
Route
</tt></p></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
     [{RXC}]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Pharmacy/Treatment
Component
</tt></p></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
   }
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 }
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>}</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[DSC]</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
</TABLE>
<p>The
function served by that query can be more clearly defined within the new query
functionality.  In the RDR message, the full meaning of the filter elements in
the QRD and QRF segments could be discerned only by inference.  By contrast,
needed parameters can be explicitly defined in the Conformance Statement for
the new Dispense History query, as shown in the following example.<br>
Example:  The user wishes to know all the medications dispensed for the patient
whose medical record number is "555444222111" for the period beginning 5/31/98
and ending 5/31/99.  The following QBP message is generated.<br>
MSH|^&amp;~\|PCR|Gen
Hosp|PIMS||199811201400-0800||QBP^Z81^QBP_Q11|ACK9901|P|2.4||||||||<br>
QPD|Z81^Dispense
History^HL7nnnn|Q001|555444222111^^^MPI^MR||19980531|19990531|<br>
RCP|I|999^RD|<br>
The pharmacy system identifies medical record number "555444222111" as
belonging to Adam Everyman and locates 4 prescription dispenses for the period
beginning 5/31/98 and ending 5/31/99and returns the following RSP message:<br>
MSH|^&amp;~\|PIMS|Gen
hosp|PCR||199811201400-0800||RSP^Z82^RSP_Z82|8858|P|2.4||||||||<br>
MSA|AA|ACK9901|<br>
QAK|Q001|OK|Z81^Dispense History^HL7nnnn|4|<br>
QPD|Z81^Dispense
History^HL7nnnn|Q001|555444222111^^^MPI^MR||19980531|19990531|<br>
PID|||555444222111^^^MPI^MR||Everyman^Adam||19600614|M||C|2101 Webster #
106^^Oakland^CA^94612||^^^^^510^6271111|^^^^^510^6277654|||||343132266|||N|||||||||<br>
ORC|RE||89968665||||||199805121345-0700|||77^Hippocrates^Harold^H^III^DR^MD||^^^^^510^
2673600||||||<br>
RXE|1^BID^^19980529|00378112001^Verapamil Hydrochloride 120 mg TAB^NDC
|120||mgm||||||||||||||||||||||||||<br>
RXD|1|00378112001^Verapamil Hydrochloride 120 mg TAB^NDC
|199805291115-0700|100|||1331665|3|||||||||||||||||<br>
RXR|PO||||<br>
ORC|RE||89968665||||||199805291030-0700|||77^Hippocrates^Harold^H^III^DR^MD||^^^^^510^
2673600||||||<br>
RXE|1^^D100^^20020731^^^TAKE 1 TABLET DAILY --GENERIC FOR CALAN
SR|00182196901^VERAPAMIL HCL ER TAB 180MG ER^NDC |100||180MG|TABLET
SA|||G|||0|BC3126631^CHU^Y^L||213220929|0|0|19980821|||<br>
RXD|1|00182196901^VERAPAMIL HCL ER TAB 180MG ER^NDC
|19980821|100|||213220929|0|TAKE 1 TABLET DAILY --GENERIC FOR CALAN
SR||||||||||||<br>
RXR|PO||||<br>
ORC|RE||235134037||||||199809221330-0700|||88^Semmelweis^Samuel^^^DR^MD||^^^^^510^
2673900||||||<br>
RXD|1|00172409660^BACLOFEN 10MG TABS^NDC|199809221415-0700|10|||235134037|5|AS
DIRECTED||||||||||||<br>
RXR|PO||||<br>
ORC|RE||235134030||||||199810121030-0700|||99^Lister^Lenora^^^DR^MD||^^^^^510^
2673700||||||<br>
RXD|1|00054384163^THEOPHYLLINE 80MG/15ML
SOLN^NDC|199810121145-0700|10|||235134030|5|AS DIRECTED||||||||||||<br>
RXR|PO
</p>

<h5>
<A NAME="Heading127">5.9.1.1.1 Associated dispense history Conformance Statement</A></h5>

<p><center><b>Conformance
Statement</b></center><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Statement ID (Query ID=Z81):
</b></p></TD>
<TD colspan=1 align="left"><p>Z81</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Type:</b></p></TD>
<TD colspan=1 align="left"><p>Query</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Name:
</b></p></TD>
<TD colspan=1 align="left"><p>Dispense
History
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Trigger (= MSH-9):
</b></p></TD>
<TD colspan=1 align="left"><p>QBP^Z81^QBP_Q11</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Mode:
</b></p></TD>
<TD colspan=1 align="left"><p>Both</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Response
Trigger (= MSH-9):
</b></p></TD>
<TD colspan=1 align="left"><p>RSP^Z82^RSP_Z82</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Characteristics:
</b></p></TD>
<TD colspan=1 align="left"><p>May
specify patient, medication, a date range, and how the response is to be sorted.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Purpose:</b></p></TD>
<TD colspan=1 align="left"><p>To
retrieve patient pharmacy dispense history information from the Server.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Response
Characteristics:
</b></p></TD>
<TD colspan=1 align="left"><p>Sorted
by Medication Dispensed unless otherwise specified in<b> SortControl.
</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Based
on Segment Pattern:
</b></p></TD>
<TD colspan=1 align="left"><p>RDS_O01</p></TD>
</TR>
</TABLE>
<p><br>
</p>
<TABLE>
<TR align="left">
<TD colspan=1 align="left"><p><tt><b><u>QBP^Z81^QBP_Q11</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Query
Grammar:  QBP Message 
</u></b></tt></p></TD>
<TD colspan=1 align="center"><p>Section
Reference
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header Segment
</tt></p></TD>
<TD colspan=1 align="center"><p>2.16.9</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QPD</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Parameter Definition
</tt></p></TD>
<TD colspan=1 align="center"><p>5.5.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>RCP</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Response
Control Parameter
</tt></p></TD>
<TD colspan=1 align="center"><p>5.5.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="center"><p>2.16.4</p></TD>
</TR>
</TABLE>
<p><br>
</p>
<TABLE>
<TR align="left">
<TD colspan=1 align="left"><p><tt><b><u>RSP^Z82^RSP_Z82</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Response
Grammar:  Pharmacy Dispense Message
</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Group
Control
</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Comment</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Support
Indicator
</u></b></tt></p></TD>
<TD colspan=1 align="center"><p>Sec
Ref
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.9</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSA</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Acknowledgement
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.8</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[ERR]</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Error</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QAK</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Acknowledgement
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>5.5.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QPD</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Parameter Definition
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>5.5.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>RCP</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Response
Control Parameter
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>5.5.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>{</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>Query
Result Cluster 
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
[
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>PIDG</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Begin
PID Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 PID
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Patient
Identification
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>3.4.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
  [PD1]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Additional
Demographics
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>3.4.9</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
   [{NTE}]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Notes
and Comments (for PID)
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.10</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
   [{AL1}
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Allergy
Information
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>3.4.6</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
   [PV1
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Patient
Visit
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>3.4.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
   [PV2]]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Patient
Visit - Additional Info
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>3.4.4</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
]
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>End
PID Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
{
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>ORCG</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Begin
ORC Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 ORC
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Common
Order
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>Each
ORC/RXD combination constitutes a "hit."
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 [
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>RXOG</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Begin
RXO Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 RXO
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Pharmacy/Treatment
Order
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
   [{NTE}]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Notes
and Comments (for RXO)
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>We
changed the syntax because we believe there is an error. The RXR should not be
optional.
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.10</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
   {RXR}
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Pharmacy/Treatment
Route
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
   [
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>RXCG</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Begin
RXC Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
     {RXC}
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Pharmacy/Treatment
Component
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
       [{NTE}]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Notes
and Comments (for RXC)
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.10</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
    ]
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>End
RXC Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 ]
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>End
RXO Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 [
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>RXEG</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Begin
RXE Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 RXE
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Pharmacy/Treatment
Encoded Order
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
  {RXR}
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Pharmacy/Treatment
Route
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
  [{RXC}]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Pharmacy/Treatment
Component
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 ]
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>End
RXE Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 RXD
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Pharmacy/Treatment
Dispense
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>RXDG</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Begin
RXD Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
  {RXR}
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Pharmacy/Treatment
Route
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
  [{RXC}]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Pharmacy/Treatment
Component
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>End
RXD Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 {
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>OBXG</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Begin
OBX Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
   [OBX]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Results</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
   [{NTE}]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Notes
and Comments (for OBX)
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.10</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
  }
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>End
OBX Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
}
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>End
ORC Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>}</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>End
Query Results
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.4</p></TD>
</TR>
</TABLE>
<b>Input Parameter Specification
</b>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Field
Seq (Query ID=Z81)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Name</b></p></TD>
<TD colspan=1 align="left"><p><b>Key/</b><br>
<b>Search
</b></p></TD>
<TD colspan=1 align="left"><p><b>Sort</b></p></TD>
<TD colspan=1 align="left"><p><b>LEN</b></p></TD>
<TD colspan=1 align="left"><p><b>TYPE</b></p></TD>
<TD colspan=1 align="left"><p><b>Opt</b></p></TD>
<TD colspan=1 align="left"><p><b>Rep</b></p></TD>
<TD colspan=1 align="left"><p><b>Match
Op
</b></p></TD>
<TD colspan=1 align="left"><p><b>TBL</b></p></TD>
<TD colspan=1 align="left"><p><b>Segment
Field Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>Service
Identifier Code
</b></p></TD>
<TD colspan=1 align="left"><p><b>ElementName</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>1</p></TD>
<TD colspan=1 align="left"><p>MessageQueryName</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>60</p></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>R</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>2</p></TD>
<TD colspan=1 align="left"><p>QueryTag</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>32</p></TD>
<TD colspan=1 align="left"><p>ST</p></TD>
<TD colspan=1 align="left"><p>R</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PatientList</p></TD>
<TD colspan=1 align="left"><p>S</p></TD>
<TD colspan=1 align="left"><p>Y</p></TD>
<TD colspan=1 align="left"><p>20</p></TD>
<TD colspan=1 align="left"><p>CX</p></TD>
<TD colspan=1 align="left"><p>O</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID.3</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID-3:
Patient  Identifier List
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>MedicationDispensed</p></TD>
<TD colspan=1 align="left"><p>S</p></TD>
<TD colspan=1 align="left"><p>Y</p></TD>
<TD colspan=1 align="left"><p>100</p></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>O</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>=</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RXD.2</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RXD-2:
Dispense/Give Code
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>DispenseDate.LL</p></TD>
<TD colspan=1 align="left"><p>S</p></TD>
<TD colspan=1 align="left"><p>Y</p></TD>
<TD colspan=1 align="left"><p>26</p></TD>
<TD colspan=1 align="left"><p>TS</p></TD>
<TD colspan=1 align="left"><p>O</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>&gt;<br>=</p>
<BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RXD.3</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RXD-3:
Date/Time Dispensed
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>DispenseDate.UL</p></TD>
<TD colspan=1 align="left"><p>S</p></TD>
<TD colspan=1 align="left"><p>Y</p></TD>
<TD colspan=1 align="left"><p>26</p></TD>
<TD colspan=1 align="left"><p>TS</p></TD>
<TD colspan=1 align="left"><p>O</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>&lt;<br>=</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RXD.3</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RXD-3:
Date/Time Dispensed
</p></TD>
</TR>
</TABLE>
<p><b>Input
Parameter Field Description and Commentary</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Input
Parameter (Query ID=Z81)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Comp.
Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>DT</b></p></TD>
<TD colspan=1 align="left"><p><b>Description</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>MessageQueryName</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>Must
be valued <b>Z81^Dispense History^HL7nnnn</b>.
</p>
<BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>QueryTag</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ST</p></TD>
<TD colspan=1 align="left"><p>Unique
to each query message instance.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>PatientList</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CX</p></TD>
<TD colspan=1 align="left"><p>The
combination of values for <i>PatientList.ID, and
PatientList.AssigningAuthority, </i> are intended to identify a unique entry on
the PATIENT_MASTER table. The  <i>PatientList.IdentifierTypeCode</i> is useful
for further filtering or to supply uniqueness in the event that the assigning
authority may have more than one coding system. (The PATIENT_MASTER table
contains a constraint that prevents multiple patients from being identified by
the same combination of field values.)  This PATIENT_MASTER entry will be
searched against on the PHARMACY_DISPENSE_TRANSACTION table to retrieve the
rows fulfilling the query conditions. <br><br>If this field is not valued, all
values for this field are considered to be a match.<br><br>If one PID.3 is
specified, only 1 segment pattern will be returned.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><b>ID</b></p></TD>
<TD colspan=1 align="left"><p>ID</p></TD>
<TD colspan=1 align="left"><p>If
this field, PID.3.1, is not valued, all values for this field are considered to
be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><b>Assigning
Authority
</b></p></TD>
<TD colspan=1 align="left"><p>HD</p></TD>
<TD colspan=1 align="left"><p>If
this field, PID.3.4, is not valued, all values for this field are considered to
be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><b>Identifier
type code
</b></p></TD>
<TD colspan=1 align="left"><p>IS</p></TD>
<TD colspan=1 align="left"><p>If
this field, PID.3.5, is not valued, all values for this field are considered to
be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>MedicationDispensed</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>If
this field is not valued, all values for this field are considered to be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>DispenseDate.LL</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>TS</p></TD>
<TD colspan=1 align="left"><p>This
is the earliest value to be returned for Date/Time Dispensed. If this field is
not valued, all values for this field are considered to be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>DispenseDate.UL</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>TS</p></TD>
<TD colspan=1 align="left"><p>This
is the latest value to be returned for Date/Time Dispensed. If this field is
not valued, all values for this field are considered to be a match.
</p></TD>
</TR>
</TABLE>
<h4>
<A NAME="Heading128">5.9.1.2 Comprehensive pharmacy information examples and Conformance Statement</A></h4>

<p>The
user wishes to know all the medications dispensed for the patient whose medical
record number is "555444222111" for the period beginning 5/31/98 and ending
5/31/99.  The following QBP message is generated.<br>
MSH|^&amp;~\|PCR|Gen
Hosp|PIMS||199811201400-0800||QBP^Z85^QBP_Q11|8332|P|2.4||||||||<br>
QPD|Z85^Pharmacy Information Comprehensive^HL7nnnn|Q002|555444222111^^^MPI^MR
||||19980531|19990531||RXO~RXG~RXA|<br>
RCP|I|999^RD|<br>
The pharmacy system identifies medical record number "555444222111" as
belonging to Adam Everyman and locates 4 prescription dispenses and an
electrolytes panel for the period beginning 5/31/98 and ending 5/31/99and
returns the following RSP message:<br>
MSH|^&amp;~\|PIMS|Gen
hosp|PCR||199811201400-0800||RSP^Z86^RSP_Z86|8858|P|2.4||||||||<br>
MSA|AA|8332|<br>
QAK|Q002|OK|Z85^Pharmacy Information Comprehensive^HL70003|4|<br>
QPD|Z85^Pharmacy Information Comprehensive^HL7nnnn|Q002|555444222111^^^MPI^MR
||||19980531|19990531||RXO~RXG~RXA|<br>
PID|||555444222111^^^MPI^MR||Everyman^Adam||19600614|M||C|2101 Webster #
106^^Oakland^CA^94612||^^^^^510^6271111|^^^^^510^6277654|||||343132266|||N|||||||||<br>
ORC|RE||89968665||||||199805121345-0700|||77^Hippocrates^Harold^H^III^DR^MD||^^^^^510^
2673600||||||<br>
RXE|1^BID^^19980529|00378112001^Verapamil Hydrochloride 120 mg TAB^NDC
|120||mgm||||||||||||||||||||||||||<br>
RXD|1|00378112001^Verapamil Hydrochloride 120 mg TAB^NDC
|199805291115-0700|100|||1331665|3|||||||||||||||||<br>
RXR|PO||||<br>
ORC|RE||89968665||||||199805291030-0700|||77^Hippocrates^Harold^H^III^DR^MD||^^^^^510^
2673600||||||<br>
RXE|1^^D100^^20020731^^^TAKE 1 TABLET DAILY --GENERIC FOR CALAN
SR|00182196901^VERAPAMIL HCL ER TAB 180MG ER^NDC |100||180MG|TABLET
SA|||G|||0|BC3126631^CHU^Y^L||213220929|0|0|19980821|||<br>
RXD|1|00182196901^VERAPAMIL HCL ER TAB 180MG ER^NDC
|19980821|100|||213220929|0|TAKE 1 TABLET DAILY --GENERIC FOR CALAN
SR||||||||||||<br>
RXR|PO||||<br>
ORC|RE||235134037||||||199809221330-0700|||88^Semmelweis^Samuel^^^DR^MD||^^^^^510^
2673900||||||<br>
RXD|1|00172409660^BACLOFEN 10MG TABS^NDC|199809221415-0700|10|||235134037|5|AS
DIRECTED||||||||||||<br>
RXR|PO||||<br>
ORC|RE||235134030||||||199810121030-0700|||99^Lister^Lenora^^^DR^MD||^^^^^510^
2673700||||||<br>
RXD|1|00054384163^THEOPHYLLINE 80MG/15ML
SOLN^NDC|199810121145-0700|10|||235134030|5|AS DIRECTED||||||||||||<br>
RXR|PO<br>
OBX|1|ST|2951-2^SODIUM^LN||150|mmol/l|136-148|H||A|F|19850301||199811180700-0800 <br>
OBX|2|ST|2823-3^POTASSIUM^LN||4.5|mmol/l|3.5-5|N||N|F|19850301||199811180700-0800<br>
OBX|3|ST|2075-0^CHLORIDE^LN||102|mmol/l|94-105|N||N|F|19850301||199811180700-0800
<br>
OBX|4|ST|2028-9^CARBON
DIOXIDE^LN||27|mmol/l|24-31|N||N|F|19850301||199811180700-0800<br>
...<br>
Note the use of <i>OBX-14-Date/time of the observation</i> to time the
laboratory observations.
</p>

<h5>
<A NAME="Heading129">5.9.1.2.1 Comprehensive pharmacy information Conformance Statement</A></h5>

<p>The
following is a highly experimental approach to establishing a super segment
pattern response to a general purpose query structure. It contains all of the
pharmacy information segments as possible inclusions in the response. It
differs from previously defined segment pattern queries in that it cuts across
multiple related standard HL7 messages although there is a logical hierarchy
that can be determined.<br>
<center><b>Conformance Statement</b></center><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Statement ID (Query ID=Z85):
</b></p></TD>
<TD colspan=1 align="left"><p>Z85</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Type:</b></p></TD>
<TD colspan=1 align="left"><p>Query</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Name:
</b></p></TD>
<TD colspan=1 align="left"><p>Pharmacy
Information Comprehensive
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Trigger (= MSH-9):
</b></p></TD>
<TD colspan=1 align="left"><p>QBP^Z85^QBP_Q11</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Mode:
</b></p></TD>
<TD colspan=1 align="left"><p>Both</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Response
Trigger (= MSH-9):
</b></p></TD>
<TD colspan=1 align="left"><p>RSP^Z86^RSP_Z86</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Characteristics:
</b></p></TD>
<TD colspan=1 align="left"><p>May
specify patient, medication, a date range, how the response is to be sorted,
and what segment groups are to be returned.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Purpose:</b></p></TD>
<TD colspan=1 align="left"><p>To
retrieve patient pharmacy history information from the Server.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Response
Characteristics:
</b></p></TD>
<TD colspan=1 align="left"><p>Sorted
by Medication Dispensed unless otherwise specified in<b> SortControl.
</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Based
on Segment Pattern:
</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
</TABLE>
<p><br>
</p>
<TABLE>
<TR align="left">
<TD colspan=1 align="left"><p><tt><b><u>QBP^Z85^QBP_Q11</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Query
Grammar:  QBP Message 
</u></b></tt></p></TD>
<TD colspan=1 align="center"><p>Section
Reference
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header Segment
</tt></p></TD>
<TD colspan=1 align="center"><p>2.16.9</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QPD</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Parameter Definition
</tt></p></TD>
<TD colspan=1 align="center"><p>5.5.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>RCP</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Response
Control Parameter
</tt></p></TD>
<TD colspan=1 align="center"><p>5.5.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="center"><p>2.16.4</p></TD>
</TR>
</TABLE>
<p><br>
</p>
<TABLE>
<TR align="left">
<TD colspan=1 align="left"><p><tt><b><u>RSP^Z86^RSP_Z86</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Response
Grammar:  Pharmacy Information Comprehensive
</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Group
Control
</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Comment</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Support
Indicator
</u></b></tt></p></TD>
<TD colspan=1 align="center"><p>Sec
Ref
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.9</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSA</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Acknowledgement
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.8</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[ERR]</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Error</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QAK</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Acknowledgement
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>5.5.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QPD</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Parameter Definition
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>5.5.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>{</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>RESG</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Begin
Results Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
[
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>PIDG</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Begin
PID Group [PIDG]
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 PID
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Patient
Identification
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>3.4.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
  [PD1]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Additional
Demographics
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>3.4.9</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
   [{NTE}]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Notes
and Comments (for PID)
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.10</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
   [{AL1}
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Allergy
Information
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>3.4.6</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
]
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>End
PID Group [PIDG]
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
{
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>ORCG</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Begin
ORC Group [ORCG...***fill in all these ...]
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 ORC
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Common
Order
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>Each
ORC/RXD combination constitutes a "hit."
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>4.5.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 [
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>RXOG</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Begin
RXO Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 RXO
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Pharmacy/Treatment
Order
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>4.14.1</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
  {RXR}
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Pharmacy/Treatment
Route
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>4.14.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
  [{RXC}]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Pharmacy/Treatment
Component
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>[PTC1]....</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>4.14.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 ]
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>End
RXO Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 [
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>RXEG</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Begin
RXE Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 RXE
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Pharmacy/Treatment
Encoded Order
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>4.14.4</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
  {RXR}
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Pharmacy/Treatment
Route
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>4.14.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
  [{RXC}]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Pharmacy/Treatment
Component
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>[PTC2]...</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>4.14.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 ]
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>End
RXE Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 [
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>RXDG</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Begin
RXD Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 RXD
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Pharmacy/Treatment
Dispense
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>4.14.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
  {RXR}
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Pharmacy/Treatment
Route
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>4.14.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
  [{RXC}]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Pharmacy/Treatment
Component
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>4.14.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 ]
</tt></p>
<BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>End
RXD Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 [
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>Begin
RXG Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 RXG
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Pharmacy/Treatment
Give
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>RXGG</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>4.14.6</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
  {RXR}
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Pharmacy/Treatment
Route
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>4.14.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
  [{RXC}]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Pharmacy/Treatment
Component
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>4.14.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 ]
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>End
RXG Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 [
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>RXAG</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Begin
RXA Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 RXA
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Pharmacy/Treatment
Administration
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>4.14.7</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
  {RXR}
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Pharmacy/Treatment
Route
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>4.14.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
  [{RXC}]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Pharmacy/Treatment
Component
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>Was
this intentionally omitted?
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>4.14.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 ]
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>End
RXA Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 {
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>OBXG</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Begin
OBX Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
   [OBX]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Results</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>7.4.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
   [{NTE}]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Notes
and Comments (for OBX)
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.10</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
  }
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>End
OBX Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
}
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>End
ORC Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>}</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>End
Results Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[DSC]</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.4</p></TD>
</TR>
</TABLE>
<p><b>QPD
Input Parameter Specification</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Field
Seq (Query ID=Z85)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Name</b></p></TD>
<TD colspan=1 align="left"><p><b>Key/</b><br>
<b>Search
</b></p></TD>
<TD colspan=1 align="left"><p><b>Sort</b></p></TD>
<TD colspan=1 align="left"><p><b>LEN</b></p></TD>
<TD colspan=1 align="left"><p><b>TYPE</b></p></TD>
<TD colspan=1 align="left"><p><b>Opt</b></p></TD>
<TD colspan=1 align="left"><p><b>Rep</b></p></TD>
<TD colspan=1 align="left"><p><b>Match
Op
</b></p></TD>
<TD colspan=1 align="left"><p><b>TBL</b></p></TD>
<TD colspan=1 align="left"><p><b>Segment
Field Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>Service
Identifier Code
</b></p></TD>
<TD colspan=1 align="left"><p><b>ElementName</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>1</p></TD>
<TD colspan=1 align="left"><p>MessageQueryName</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>60</p></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>R</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>2</p></TD>
<TD colspan=1 align="left"><p>QueryTag</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>32</p></TD>
<TD colspan=1 align="left"><p>ST</p></TD>
<TD colspan=1 align="left"><p>R</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>3</p></TD>
<TD colspan=1 align="left"><p>PatientList</p></TD>
<TD colspan=1 align="left"><p><b>S</b></p></TD>
<TD colspan=1 align="left"><p><b>Y</b></p></TD>
<TD colspan=1 align="left"><p><b>20</b></p></TD>
<TD colspan=1 align="left"><p><b>CX</b></p></TD>
<TD colspan=1 align="left"><p><b>O</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID.3</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID-3:
Patient  Identifier List
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>4</p></TD>
<TD colspan=1 align="left"><p>OrderControlCode</p></TD>
<TD colspan=1 align="left"><p>S</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>2</p></TD>
<TD colspan=1 align="left"><p>ID</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Y</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>0119</p></TD>
<TD colspan=1 align="left"><p>ORC.1</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ORC-1:
Order Control
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>5</p></TD>
<TD colspan=1 align="left"><p>OrderingProvider</p></TD>
<TD colspan=1 align="left"><p>S</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>120</p></TD>
<TD colspan=1 align="left"><p>XCN</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ORC.12</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ORC-12:
Ordering Provider
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>6</p></TD>
<TD colspan=1 align="left"><p>MedicationDispensed</p></TD>
<TD colspan=1 align="left"><p>S</p></TD>
<TD colspan=1 align="left"><p>Y</p></TD>
<TD colspan=1 align="left"><p>100</p></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>O</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>=</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RXD.2</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RXD-2:
Dispense/Give Code
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>7</p></TD>
<TD colspan=1 align="left"><p>DispenseDate.LL</p></TD>
<TD colspan=1 align="left"><p>S</p></TD>
<TD colspan=1 align="left"><p>Y</p></TD>
<TD colspan=1 align="left"><p>26</p></TD>
<TD colspan=1 align="left"><p>TS</p></TD>
<TD colspan=1 align="left"><p>O</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>&gt;<br>=</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RXD.3</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RXD-3:
Date/Time Dispensed
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>8</p></TD>
<TD colspan=1 align="left"><p>DispenseDate.UL</p></TD>
<TD colspan=1 align="left"><p>S</p></TD>
<TD colspan=1 align="left"><p>Y</p></TD>
<TD colspan=1 align="left"><p>26</p></TD>
<TD colspan=1 align="left"><p>TS</p></TD>
<TD colspan=1 align="left"><p>O</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>&lt;<br>=</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RXD.3</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RXD-3:
Date/Time Dispensed
</p></TD>
</TR>
</TABLE>
<p><b>QPD
Input Parameter Field Description and Commentary</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Input
Parameter (Query ID=Z85)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Comp.
Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>DT</b></p></TD>
<TD colspan=1 align="left"><p><b>Description</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>MessageQueryName</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>Must
be valued <b>Z85^Pharmacy Information Comprehensive^HL7nnnn</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>QueryTag</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ST</p></TD>
<TD colspan=1 align="left"><p>Unique
to each query message instance.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>PatientList</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CX</p></TD>
<TD colspan=1 align="left"><p>The
combination of values for <i>PatientList.ID, and
PatientList.AssigningAuthority, </i>are intended to identify a unique entry on
the PATIENT_MASTER table. The <i>PatientList.IdentifierTypeCode</i> is useful
for further filtering or to supply uniqueness in the event that the assigning
authority may have more than one coding system. (The PATIENT_MASTER table
contains a constraint that prevents multiple patients from being identified by
the same combination of field values.)  This PATIENT_MASTER entry will be
searched against on the PHARMACY_DISPENSE_TRANSACTION table to retrieve the
rows fulfilling the query conditions. <br><br>If this field is not valued, all
values for this field are considered to be a match.<br><br>If one PID.3 is
specified, only 1 segment pattern will be returned.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><b>ID</b></p></TD>
<TD colspan=1 align="left"><p>ID</p></TD>
<TD colspan=1 align="left"><p>If
this field, PID.3.1, is not valued, all values for this field are considered to
be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><b>Assigning
Authority
</b></p></TD>
<TD colspan=1 align="left"><p>HD</p></TD>
<TD colspan=1 align="left"><p>If
this field, PID.3.4, is not valued, all values for this field are considered to
be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><b>Identifier
type code
</b></p></TD>
<TD colspan=1 align="left"><p>IS</p></TD>
<TD colspan=1 align="left"><p>If
this field, PID.3.5, is not valued, all values for this field are considered to
be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>OrderControlCode</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ID</p></TD>
<TD colspan=1 align="left"><p>If
this field, ORC.1, is not valued, all values for this field are considered to
be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>OrderingProvider</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>XCN</p></TD>
<TD colspan=1 align="left"><p>If
this field, ORC.12, is not valued, all values for this field are considered to
be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>MedicationDispensed</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>If
this field is not valued, all values for this field are considered to be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>DispenseDate.LL</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>TS</p></TD>
<TD colspan=1 align="left"><p>This
is the earliest value to be returned for Date/Time Dispensed. If this field is
not valued, all values for this field are considered to be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>DispenseDate.UL</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>TS</p></TD>
<TD colspan=1 align="left"><p>This
is the latest value to be returned for Date/Time Dispensed. If this field is
not valued, all values for this field are considered to be a match.
</p></TD>
</TR>
</TABLE>
<p><b>RCP
Response Control Parameter Field Description and Commentary</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Field
Seq (Query ID=Z85)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Name</b></p></TD>
<TD colspan=1 align="left"><p><b>Component
Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>LEN</b></p></TD>
<TD colspan=1 align="left"><p><b>DT</b></p></TD>
<TD colspan=1 align="left"><p><b>Description</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>1</p></TD>
<TD colspan=1 align="left"><p>Query
Priority
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>1</p></TD>
<TD colspan=1 align="left"><p>ID</p></TD>
<TD colspan=1 align="left"><p>(<b>D</b>)eferred
or (<b>I</b>)mmediate.  Default is <b>I</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>2</p></TD>
<TD colspan=1 align="left"><p>Quantity
Limited Request
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>10</p></TD>
<TD colspan=1 align="left"><p>CQ</p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Quantity</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>NM</p></TD>
<TD colspan=1 align="left"><p>Number
of units (specified by the following component) that will be returned in each
increment of the response.  If no value is given, the entire response will be
returned in a single increment.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Units</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p><b>CH</b>aracters,
<b>LI</b>nes, <b>P</b>a<b>G</b>es, or <b>R</b>ecor<b>D</b>s.  Default is
<b>LI</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>3</p></TD>
<TD colspan=1 align="left"><p>Response
Modality
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>60</p></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p><b>R</b>eal
time or <b>B</b>atch.  Default is <b>R</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>7</p></TD>
<TD colspan=1 align="left"><p>Segment
group inclusion
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>256</p></TD>
<TD colspan=1 align="left"><p>ID</p></TD>
<TD colspan=1 align="left"><p>What
segment group(s) are to be included.  If this field is not valued, all segment
groups will be included.
</p></TD>
</TR>
</TABLE>
<h3>
<A NAME="Heading130">5.9.2 Query using QSC variant / segment pattern response examples</A></h3>


<h4>
<A NAME="Heading131"> </A></h4>


<h4>
<A NAME="Heading132">5.9.2.1 Dispense information example and Conformance Statement</A></h4>

<p>The
following example demonstrates that the same results, as shown in the example
in 5.9.1.1, can be obtained using the QSC variant. The difference is how the
input parameters are expressed.<br>
The user wishes to know all the medications dispensed for the patient whose
medical record number is "555444222111" for the period beginning 5/31/98 and
ending 5/31/99.  The following message is generated.<br>
MSH|^&amp;~\|PCR|Gen
Hosp|PIMS||199811201300-0800||QBP^Z87^QBP_Q11|8698|P|2.4||||||||<br>
QPD|Z87^Dispense
Information^HL7nnnn|Q001|@PID.3^EQ^55544422211^AND~@ORC.1^EQ^RE^
AND~@RXD.3^GE^199805310000-0800^AND~@RXD.3^LE^199905310000-0800<br>
RCP|I|999^RD|<br>
The pharmacy system identifies medical record number "555444222111" as
belonging to Adam Everyman and locates 4 prescription dispenses for the period
beginning 5/31/98 and ending 5/31/99 and returns the following RSP message:<br>
MSH|^&amp;~\|PIMS|Gen
Hosp|PCR||199811201300-0800||RSP^Z88^RSP_Z88|8857|P|2.4||||||||<br>
MSA|AA|8698|<br>
QAK|Q001|OK|Z87^Dispense Information^HL7nnnn|4<br>
QPD|Z87^Dispense
Information^HL7nnnn|Q001|@PID.3^EQ^55544422211^AND~ORC.1^EQ^RE^
AND~@RXD.3^GE^199805310000-0800^AND~@RXD.3^LE^199905310000-0800<br>
PID|||555444222111^^^MPI^MR||Everyman^Adam||19600614|M||C|2101 Webster #
106^^Oakland^CA^94612||^^^^^510^6271111|^^^^^510^6277654|||||343132266|||N|||||||||<br>
ORC|RE||89968665||||||199905121345-0700|||77^Hippocrates^Harold^H^III^DR^MD||^^^^^510^
2673600||||||<br>
RXE|1^BID^^19990529|00378112001^Verapamil Hydrochloride 120 mg TAB^NDC
|120||mgm||||||||||||||||||||||||||<br>
RXD|1|00378112001^Verapamil Hydrochloride 120 mg
TAB^NDC|199905291115-0700|100|||1331665|3|||||||||||||||||<br>
RXR|PO||||<br>
ORC|RE||89968665||||||199905291030-0700|||77^Hippocrates^Harold^H^III^DR^MD||^^^^^510^
2673600||||||<br>
RXE|1^^D100^^20020731^^^TAKE 1 TABLET DAILY --GENERIC FOR CALAN
SR|00182196901^VERAPAMIL HCL ER TAB 180MG ER^NDC|100||180MG|TABLET
SA|||G|||0|BC3126631^CHU^Y^L||213220929|0|0|19990821|||<br>
RXD|1|00182196901^VERAPAMIL HCL ER TAB 180MG
ER^NDC|19990821|100|||213220929|0|TAKE 1 TABLET DAILY --GENERIC FOR CALAN
SR||||||||||||<br>
RXR|PO||||<br>
ORC|RE||235134037||||||199809221330-0700|||88^Semmelweis^Samuel^^^DR^MD||^^^^^510^
2673900||||||<br>
RXD|1|00172409660^BACLOFEN 10MG TABS^NDC|199809221415-0700|10|||235134037|5|AS
DIRECTED||||||||||||<br>
RXR|PO||||<br>
ORC|RE||235134030||||||199810121030-0700|||99^Lister^Lenora^^^DR^MD||^^^^^510^
2673700||||||<br>
RXD|1|00054384163^THEOPHYLLINE 80MG/15ML
SOLN^NDC|199810121145-0700|10|||235134030|5|AS DIRECTED||||||||||||<br>
RXR|PO
</p>

<h5>
<A NAME="Heading133">5.9.2.1.1 Associated dispense information Conformance Statement</A></h5>

<p>Note
that the following Conformance Statement contains many more input parameters.
The user is allowed to populate as many of these as desired. <br>
<center><b>Conformance Statement</b></center><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Statement ID (Query ID=Z87):
</b></p></TD>
<TD colspan=1 align="left"><p>Z87</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Type:</b></p></TD>
<TD colspan=1 align="left"><p>Query</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Name:
</b></p></TD>
<TD colspan=1 align="left"><p>Dispense
Information
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Trigger (= MSH-9):
</b></p></TD>
<TD colspan=1 align="left"><p>QBP^Z87^QBP_Q11</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Mode:
</b></p></TD>
<TD colspan=1 align="left"><p>Both</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Response
Trigger (= MSH-9):
</b></p></TD>
<TD colspan=1 align="left"><p>RSP^Z88^RSP_Z88</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Characteristics:
</b></p></TD>
<TD colspan=1 align="left"><p>Selection
criteria are chosen from a Virtual Table.  May specify patient, medication, and
a date range.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Purpose:</b></p></TD>
<TD colspan=1 align="left"><p>To
retrieve patient pharmacy dispense history information from the Server.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Response
Characteristics:
</b></p></TD>
<TD colspan=1 align="left"><p>Sorted
by Medication Dispensed unless otherwise specified in<b> SortControl.
</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Based
on Segment Pattern:
</b></p></TD>
<TD colspan=1 align="left"><p>RDS_O01</p></TD>
</TR>
</TABLE>
<p><br>
</p>
<TABLE>
<TR align="left">
<TD colspan=1 align="left"><p><tt><b><u>QBP^Z87^QBP_Q11</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Query
Grammar:  QBS Message 
</u></b></tt></p></TD>
<TD colspan=1 align="center"><p>Section
Reference
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header Segment
</tt></p></TD>
<TD colspan=1 align="center"><p>2.16.9</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QPD</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Parameter Definition
</tt></p></TD>
<TD colspan=1 align="center"><p>5.5.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>RCP</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Response
Control Parameter
</tt></p></TD>
<TD colspan=1 align="center"><p>5.5.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="center"><p>2.16.4</p></TD>
</TR>
</TABLE>
<p><br>
</p>
<TABLE>
<TR align="left">
<TD colspan=1 align="left"><p><tt><b><u>RSP^Z88^RSP_Z88</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Response
Grammar:  Pharmacy Information Comprehensive
</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Group
Control
</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Comment</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Support
Indicator
</u></b></tt></p></TD>
<TD colspan=1 align="center"><p>Sec
Ref
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.9</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSA</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Acknowledgement
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.8</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[ERR]</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Error</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QAK</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Acknowledgement
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>5.5.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QPD</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Parameter Definition
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>5.5.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>RCP</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Response
Control Parameter
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>5.5.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>{</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>Query
Result Cluster 
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
[
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>PIDG</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Begin
PID Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 PID
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Patient
Identification
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>3.4.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
  [PD1]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Additional
Demographics
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>3.4.10</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
   [{NTE}]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Notes
and Comments (for PID)
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.10</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
   [{AL1}
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Allergy
Information
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>3.4.5</p>
<BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
   [PV1
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Patient
Visit
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>3.4.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
   [PV2]]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Patient
Visit - Additional Info
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>3.4.4</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
]
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>End
PID Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
{
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>ORCG</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Begin
ORC Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 ORC
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Common
Order
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>Each
ORC/RXD combination constitutes a "hit."
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>4.5.1</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 [
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>Begin
RXO Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 RXO
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Pharmacy/Treatment
Order
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>4.8.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
   [{NTE}]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Notes
and Comments (for RXO)
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>We
changed the syntax because we believe there is an error. The RXR should not be
optional.
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.10</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
   {RXR}
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Pharmacy/Treatment
Route
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>4.14.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
   [
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>RXCG</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Begin
RXC Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
     {RXC}
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Pharmacy/Treatment
Component
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>4.14.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
       [{NTE}]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Notes
and Comments (for RXC)
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.10</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
    ]
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>End
RXC Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 ]
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>End
RXO Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 [
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>RXEG</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Begin
RXE Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 RXE
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Pharmacy/Treatment
Encoded Order
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>4.8.7</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
  {RXR}
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Pharmacy/Treatment
Route
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>4.14.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
  [{RXC}]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Pharmacy/Treatment
Component
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>4.14.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 ]
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>End
RXE Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 RXD
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Pharmacy/Treatment
Dispense
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>RXDG</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Begin
RXD Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>4.8.10</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
  {RXR}
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Pharmacy/Treatment
Route
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>4.14.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
  [{RXC}]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Pharmacy/Treatment
Component
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>End
RXD Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>4.14.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 {
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>OBXG</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Begin
OBX Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
   [OBX]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Results</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>7.4.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
   [{NTE}]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Notes
and Comments (for OBX)
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.10</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
  }
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>End
OBX Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
}
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>End
ORC Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>}</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>End
Query Results
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>DSC</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.4</p></TD>
</TR>
</TABLE>
<p><b>QPD
Input Parameter Specification</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Field
Seq (Query ID=Z87)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Name</b></p></TD>
<TD colspan=1 align="left"><p><b>Key/</b><br>
<b>Search
</b></p></TD>
<TD colspan=1 align="left"><p><b>Sort</b></p></TD>
<TD colspan=1 align="left"><p><b>LEN</b></p></TD>
<TD colspan=1 align="left"><p><b>TYPE</b></p></TD>
<TD colspan=1 align="left"><p><b>Opt</b></p></TD>
<TD colspan=1 align="left"><p><b>Rep</b></p></TD>
<TD colspan=1 align="left"><p><b>Match
Op
</b></p></TD>
<TD colspan=1 align="left"><p><b>TBL</b></p></TD>
<TD colspan=1 align="left"><p><b>Segment
Field Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>Service
Identifier Code
</b></p></TD>
<TD colspan=1 align="left"><p><b>ElementName</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>1</p></TD>
<TD colspan=1 align="left"><p>MessageQueryName</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>60</p></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>R</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>2</p></TD>
<TD colspan=1 align="left"><p>QueryTag</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>32</p></TD>
<TD colspan=1 align="left"><p>ST</p></TD>
<TD colspan=1 align="left"><p>R</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>3</p></TD>
<TD colspan=1 align="left"><p>SelectionCriteria</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><b>255</b></p></TD>
<TD colspan=1 align="left"><p><b>ST</b></p></TD>
<TD colspan=1 align="left"><p><b>R</b></p></TD>
<TD colspan=1 align="left"><p><b>Y</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
</TABLE>
<p><b>QPD
Input Parameter Field Description and Commentary</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Input
Parameter (Query ID=Z87)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Comp.
Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>DT</b></p></TD>
<TD colspan=1 align="left"><p><b>Description</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>MessageQueryName</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>Must
be valued <b>Z87^Dispense Information^HL7nnnn</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>QueryTag</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ST</p></TD>
<TD colspan=1 align="left"><p>Unique
to each query message instance.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>SelectionCriteria</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ST</p></TD>
<TD colspan=1 align="left"><p>A
query expression whose operands are derived from the "ColName" column in the
"Input Specification:  Virtual Table" given below.
</p></TD>
</TR>
</TABLE>
<p><b>Input
Specification: Virtual Table</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>ColName
(Query ID=Z87)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Key/</b><br>
<b>Search
</b></p></TD>
<TD colspan=1 align="left"><p><b>Sort</b></p></TD>
<TD colspan=1 align="left"><p><b>LEN</b></p></TD>
<TD colspan=1 align="left"><p><b>TYPE</b></p></TD>
<TD colspan=1 align="left"><p><b>Opt</b></p></TD>
<TD colspan=1 align="left"><p><b>Rep</b></p></TD>
<TD colspan=1 align="left"><p><b>Match
Op
</b></p></TD>
<TD colspan=1 align="left"><p><b>TBL</b></p></TD>
<TD colspan=1 align="left"><p><b>Segment
Field Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>Service
Identifier Code
</b></p></TD>
<TD colspan=1 align="left"><p><b>ElementName</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>PatientList</p></TD>
<TD colspan=1 align="left"><p>S</p></TD>
<TD colspan=1 align="left"><p>Y</p></TD>
<TD colspan=1 align="left"><p>20</p></TD>
<TD colspan=1 align="left"><p>CX</p></TD>
<TD colspan=1 align="left"><p>O</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID.3</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID-3:
Patient  Identifier List
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>PatientName</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>48</p></TD>
<TD colspan=1 align="left"><p>XPN</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID.5</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID-5
Patient Name
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>OrderControlCode</p></TD>
<TD colspan=1 align="left"><p>S</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>2</p></TD>
<TD colspan=1 align="left"><p>ID</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>0119</p></TD>
<TD colspan=1 align="left"><p>ORC.1</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ORC-1
Order Control
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>MedicationDispensed</p></TD>
<TD colspan=1 align="left"><p>S</p></TD>
<TD colspan=1 align="left"><p>Y</p></TD>
<TD colspan=1 align="left"><p>100</p></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RXD.2</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RXD-2
Dispense/Give Code
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>DispenseDate</p></TD>
<TD colspan=1 align="left"><p>S</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>26</p></TD>
<TD colspan=1 align="left"><p>TS</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RXD.3</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RXD-2
Date/Time Dispensed
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>QuantityDispensed</p></TD>
<TD colspan=1 align="left"><p>L</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>20</p></TD>
<TD colspan=1 align="left"><p>NM</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RXD.4</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RXD-4
Actual Dispense Amount
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>OrderingProvider</p></TD>
<TD colspan=1 align="left"><p>S</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>120</p></TD>
<TD colspan=1 align="left"><p>XCN</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ORC.12</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ORC-12
Ordering Provider
</p></TD>
</TR>
</TABLE>
<p><b>Virtual
Table Field Description and Commentary</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>ColName
(Query ID=Z87)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Comp.
Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>DT</b></p></TD>
<TD colspan=1 align="left"><p><b>Description</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>PatientList</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CX</p></TD>
<TD colspan=1 align="left"><p>The
combination of values for <i>PatientList.ID, and
PatientList.AssigningAuthority, </i> are intended to identify a unique entry on
the PATIENT_MASTER table. The  <i>PatientList.IdentifierTypeCode</i> is useful
for further filtering or to supply uniqueness in the event that the assigning
authority may have more than one coding system. (The PATIENT_MASTER table
contains a constraint that prevents multiple patients from being identified by
the same combination of field values.)  This PATIENT_MASTER entry will be
searched against on the PHARMACY_DISPENSE_TRANSACTION table to retrieve the
rows fulfilling the query conditions. <br><br>
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>If
this field is not valued, all values for this field are considered to be a
match.<br>
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>If
one PID.3 is specified, only 1 segment pattern will be returned
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><b>ID</b></p></TD>
<TD colspan=1 align="left"><p>ID</p></TD>
<TD colspan=1 align="left"><p>If
this field, PID.3.1, is not valued, all values for this field are considered to
be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><b>Assigning
Authority
</b></p></TD>
<TD colspan=1 align="left"><p>HD</p></TD>
<TD colspan=1 align="left"><p>If
this field, PID.3.4, is not valued, all values for this field are considered to
be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><b>Identifier
type code
</b></p></TD>
<TD colspan=1 align="left"><p>IS</p></TD>
<TD colspan=1 align="left"><p>If
this field, PID.3.5, is not valued, all values for this field are considered to
be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>OrderControlCode</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ID</p></TD>
<TD colspan=1 align="left"><p>If
this field, ORC.1, is not valued, all values for this field are considered to
be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>MedicationDispensed</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>If
this field, RXD.2, is not valued, all values for this field are considered to
be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>DispenseDate</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>TS</p></TD>
<TD colspan=1 align="left"><p>If
this field, RXD.3, is not valued, all values for this field are considered to
be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>QuantityDispensed</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>NM</p></TD>
<TD colspan=1 align="left"><p>If
this field, RXD.4, is not valued, all values for this field are considered to
be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>OrderingProvider</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>XCN</p></TD>
<TD colspan=1 align="left"><p>If
this field, ORC.12, is not valued, all values for this field are considered to
be a match.
</p></TD>
</TR>
</TABLE>
<p><b>RCP
Response Control Parameter Field Description and Commentary</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Field
Seq (Query ID=Z87)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Name</b></p></TD>
<TD colspan=1 align="left"><p><b>Component
Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>LEN</b></p></TD>
<TD colspan=1 align="left"><p><b>DT</b></p></TD>
<TD colspan=1 align="left"><p><b>Description</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>1</p></TD>
<TD colspan=1 align="left"><p>Query
Priority
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>1</p></TD>
<TD colspan=1 align="left"><p>ID</p></TD>
<TD colspan=1 align="left"><p>(<b>D</b>)eferred
or (<b>I</b>)mmediate.  Default is <b>I</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>2</p></TD>
<TD colspan=1 align="left"><p>Quantity
Limited Request
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>10</p></TD>
<TD colspan=1 align="left"><p>CQ</p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Quantity</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>NM</p></TD>
<TD colspan=1 align="left"><p>Number
of units (specified by the following component) that will be returned in each
increment of the response.  If no value is given, the entire response will be
returned in a single increment.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Units</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p><b>CH</b>aracters,
<b>LI</b>nes, <b>P</b>a<b>G</b>es, or <b>R</b>ecor<b>D</b>s.  Default is
<b>LI</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>3</p></TD>
<TD colspan=1 align="left"><p>Response
Modality
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>60</p></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p><b>R</b>eal
time or <b>B</b>atch.  Default is <b>R</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>7</p></TD>
<TD colspan=1 align="left"><p>Segment
group inclusion
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>256</p></TD>
<TD colspan=1 align="left"><p>ID</p></TD>
<TD colspan=1 align="left"><p>What
segment group(s) are to be included.  If this field is not valued, all segment
groups will be included.
</p></TD>
</TR>
</TABLE>
<h4>
<A NAME="Heading134">5.9.2.2 Dispense information query showing different instantiation</A></h4>

<p>The
following example shows how the same QSC  style query can be invoked in a very
different way producing very different results. <br>
The user wishes to know all the medications ever dispensed for the patient
whose medical record number is "555444222111" prescribed by Dr Lister (provider
number 99). The following message is generated. Note that the same Query has
been used, but different input specifications were used.<br>
MSH|^&amp;~\|PCR|Gen
Hosp|PIMS||199811201300-0800||QBP^Z87^QBP_Q11|8698|P|2.4||||||||<br>
QPD|Q33^Dispense Information^HL7nnnn|Q005|
@PID.3^EQ^55544422211^AND~@ORC.1^EQ^RE^AND~@ORC.12.1^EQ^99<br>
RCP|I|999^RD| <br>
The pharmacy system identifies medical record number "555444222111" as
belonging to Adam Everyman and locates 2 prescription dispenses as prescribed
by Dr. Lister. The response is clearly different than the response to the first
query.<br>
MSH|^&amp;~\|PIMS|Gen
Hosp|PCR||199811201300-0800||RSP^Z88^RSP_Z88|8857|P|2.4||||||||<br>
MSA|AA|8698|<br>
QAK|Q005|OK|Q33^Dispense Information^HL7nnnn|2|<br>
QPD|Q33^Dispense Information^HL7nnnn|Q005|
@PID.3^EQ^55544422211^AND~@ORC.1^EQ^RE^AND~@ORC.12.1^EQ^99<br>
PID|||555444222111^^^MPI^MR||Everyman^Adam||19600614|M||C|2101 Webster #
106^^Oakland^CA^94612||^^^^^510^6271111|^^^^^510^6277654|||||343132266|||N|||||||||<br>
ORC|RE||89968665||||||199603121345-0700|||99^Lister^Lenora^^^DR^MD ||^^^^^510^
2673600||||||<br>
RXE|1^BID^^19980529|00182196901^VERAPAMIL HCL ER TAB 180MG ER^NDC
|120||mgm||||||||||||||||||||||||||<br>
RXD|1|00182196901^VERAPAMIL HCL ER TAB 180MG
ER^NDC|199603122000-0700|100|||1331665|3|||||||||||||||||<br>
RXR|PO||||<br>
ORC|RE||235134030||||||199810121030-0700|||99^Lister^Lenora^^^DR^MD||^^^^^510^
2673700||||||<br>
RXD|1|00054384163^THEOPHYLLINE 80MG/15ML
SOLN^NDC|199810121145-0700|10|||235134030|5|AS DIRECTED||||||||||||<br>
RXR|PO
</p>

<h4>
<A NAME="Heading135">5.9.2.3 Lab results history example</A></h4>

<p>The
user wishes to know all the lab results for the patient whose medical record is
80302641876 and where the result report date/time is between March 21, 1999 and
June 24, 1999 and the Lab department is chemistry. This Query Name might be
invoked once with a query tag of 123 in the following manner: <br>
MSH|^&amp;~\| PCR|Gen
Hosp|LIS.RMS||199907131030-0800||QBP^Z89^QBP_Q11|4460|D|2.4|<br>
QPD|Z89^Lab Results History^HL7nnnn|123|@PID.3.1.1^EQ^80302641876^AND~
@OBR.22^GE^19990321^AND~@OBR.22^LE^19990624^AND~@OBR.24^EQ^"CHEMISTRY"<br>
RCP|I||R|
</p>

<h5>
<A NAME="Heading136">5.9.2.3.1 Lab results history Conformance Statement</A></h5>

<p>The
"Lab Results History" query returns laboratory results information in the form
of the Segment Pattern Response corresponding to the ORU^R01 - unsolicited
transmission of an observation message.  It returns all of the results which
meet the criteria defined in the QPD - Query Parameter Definition Segment of
the RSP^R11 - Segment Pattern Response message.  <br>
<center><b>Conformance Statement</b></center><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Statement ID (Query ID=Z89):
</b></p></TD>
<TD colspan=1 align="left"><p>Z89</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Type:</b></p></TD>
<TD colspan=1 align="left"><p>Query</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Name:
</b></p></TD>
<TD colspan=1 align="left"><p>Lab
Results History
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Trigger (= MSH-9):
</b></p></TD>
<TD colspan=1 align="left"><p>QBP^Z89^QBP_Q11</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Mode:
</b></p></TD>
<TD colspan=1 align="left"><p>Both</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Response
Trigger (= MSH-9):
</b></p></TD>
<TD colspan=1 align="left"><p>RSP^Z90^RSP_Z90</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Characteristics:
</b></p></TD>
<TD colspan=1 align="left"><p>May
specify patient, report time, laboratory department, and LOINC code of result
to be returned.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Purpose:</b></p></TD>
<TD colspan=1 align="left"><p>To
retrieve patient laboratory results information from the Server.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Response
Characteristics:
</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Based
on Segment Pattern:
</b></p></TD>
<TD colspan=1 align="left"><p>ORU_O01</p></TD>
</TR>
</TABLE>
<p><br>
</p>
<TABLE>
<TR align="left">
<TD colspan=1 align="left"><p><tt><b><u>QBP^Z89^QBP_Q11</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Query
Grammar:  QBS Message 
</u></b></tt></p></TD>
<TD colspan=1 align="center"><p>Section
Reference
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header Segment
</tt></p></TD>
<TD colspan=1 align="center"><p>2.16.9</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QPD</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Parameter Definition
</tt></p></TD>
<TD colspan=1 align="center"><p>5.5.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>RCP</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Response
Control Parameter
</tt></p></TD>
<TD colspan=1 align="center"><p>5.5.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="center"><p>2.16.4</p></TD>
</TR>
</TABLE>
<p></p>
<TABLE>
<TR align="left">
<TD colspan=1 align="left"><p><tt><b><u>RSP^Z90^RSP_Z90</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Response
Grammar:  Pharmacy Information Comprehensive
</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Group
Control
</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Comment</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Support
Indicator
</u></b></tt></p></TD>
<TD colspan=1 align="center"><p>Sec
Ref
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.9</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSA</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Acknowledgement
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.8</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[ERR]</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Error</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QAK</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Acknowledgement
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>5.5.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QPD</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Parameter Definition
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>5.5.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>RCP</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Response
Control Parameter
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>5.5.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>{</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>Query
Result Cluster 
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
[
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>PIDG</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Begin
PID Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 PID
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Patient
Identification
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>3.4.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
  [PD1]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Additional
Demographics
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>3.4.10</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
   [{NK1}]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Next
of Kin/Associated Parties
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>3.4.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
   [{NTE}]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Notes
and Comments (for PID)
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.10</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
   [PV1
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Patient
Visit
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>3.4.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
     [PV2]]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Patient
Visit - Additional Info
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>3.4.4</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
]
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>End
PID Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
{
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>ORCG</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Begin
ORC Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 ORC
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Common
Order
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>Each
ORC/OBR combination constitutes a "hit."
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>4.5.1</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 OBR
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Observations
Report ID
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>4.5.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 [{NTE}]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Notes
and Comments (for ORC/OBR)
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.10</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 [CTD]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Contact
Data
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>11.6.4</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
   {
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>OBXG</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Begin
OBX Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
     [OBX]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Observation/Result</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>7.4.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
     [{NTE}]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Notes
and Comments (for OBX)
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.10</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
   }
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>End
OBX Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 }
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>End
ORC Group
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>}</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>End
Query Results
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>DSC</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.4</p></TD>
</TR>
</TABLE>
<p><b>QPD
Input Parameter Specification</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Field
Seq (Query ID=Z89)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Name</b></p></TD>
<TD colspan=1 align="left"><p><b>Key/</b><br>
<b>Search
</b></p></TD>
<TD colspan=1 align="left"><p><b>Sort</b></p></TD>
<TD colspan=1 align="left"><p><b>LEN</b></p></TD>
<TD colspan=1 align="left"><p><b>TYPE</b></p></TD>
<TD colspan=1 align="left"><p><b>Opt</b></p></TD>
<TD colspan=1 align="left"><p><b>Rep</b></p></TD>
<TD colspan=1 align="left"><p><b>Match
Op
</b></p></TD>
<TD colspan=1 align="left"><p><b>TBL</b></p></TD>
<TD colspan=1 align="left"><p><b>Segment
Field Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>Service
Identifier Code
</b></p></TD>
<TD colspan=1 align="left"><p><b>ElementName</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>1</p></TD>
<TD colspan=1 align="left"><p>MessageQueryName</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>60</p></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>R</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>2</p></TD>
<TD colspan=1 align="left"><p>QueryTag</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>32</p></TD>
<TD colspan=1 align="left"><p>ST</p></TD>
<TD colspan=1 align="left"><p>R</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>3</p></TD>
<TD colspan=1 align="left"><p>SelectionCriteria</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><b>255</b></p></TD>
<TD colspan=1 align="left"><p><b>ST</b></p></TD>
<TD colspan=1 align="left"><p><b>R</b></p></TD>
<TD colspan=1 align="left"><p><b>Y</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
</TABLE>
<p><b>QPD
Input Parameter Field Description and Commentary</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Input
Parameter (Query ID=Z89)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Comp.
Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>DT</b></p></TD>
<TD colspan=1 align="left"><p><b>Description</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>MessageQueryName</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>Must
be valued <b>Z89^Lab Results History^HL7nnnn</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>QueryTag</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ST</p></TD>
<TD colspan=1 align="left"><p>Unique
to each query message instance.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>SelectionCriteria</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ST</p></TD>
<TD colspan=1 align="left"><p>A
query expression whose operands are derived from the "ColName" column in the
"Input Specification: Virtual Table" given below.
</p></TD>
</TR>
</TABLE>
<p><b>Input
Specification: Virtual Table</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>ColName
(Query ID=Z89)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Key/</b><br>
<b>Search
</b></p></TD>
<TD colspan=1 align="left"><p><b>Sort</b></p></TD>
<TD colspan=1 align="left"><p><b>LEN</b></p></TD>
<TD colspan=1 align="left"><p><b>TYPE</b></p></TD>
<TD colspan=1 align="left"><p><b>Opt</b></p></TD>
<TD colspan=1 align="left"><p><b>Rep</b></p></TD>
<TD colspan=1 align="left"><p><b>Match
Op
</b></p></TD>
<TD colspan=1 align="left"><p><b>TBL</b></p></TD>
<TD colspan=1 align="left"><p><b>Segment
Field Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>Service
Identifier Code
</b></p></TD>
<TD colspan=1 align="left"><p><b>ElementName</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>PatientList</p></TD>
<TD colspan=1 align="left"><p><b>S</b></p></TD>
<TD colspan=1 align="left"><p><b>Y</b></p></TD>
<TD colspan=1 align="left"><p><b>20</b></p></TD>
<TD colspan=1 align="left"><p><b>CX</b></p></TD>
<TD colspan=1 align="left"><p><b>O</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID.3</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID-3:
Patient  Identifier List
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>ResultReportTime.LL</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>26</p></TD>
<TD colspan=1 align="left"><p>TS</p></TD>
<TD colspan=1 align="left"><p>O</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>OBR.22</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>OBR-22:
 Results rpt/status chng - date/time - lower limit
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>ResultReportTime.UL</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>26</p></TD>
<TD colspan=1 align="left"><p>TS</p></TD>
<TD colspan=1 align="left"><p>O</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>OBR.22</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>OBR-22:
 Results rpt/status chng - date/time - upper limit
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>LabDept</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>80</p></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>O</p></TD>
<TD colspan=1 align="left"><p>Y</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>0074</p></TD>
<TD colspan=1 align="left"><p>OBR.24</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>OBR-24:
 Diagnostic Serv Sect ID
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>LOINCCode</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>80</p></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>O</p></TD>
<TD colspan=1 align="left"><p>Y</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>OBX.3.4</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>OBX-3-4:
 Observation identifier - alternate identifier
</p></TD>
</TR>
</TABLE>
<p><b>Input
Parameter Field Description and Commentary</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Input
Parameter (Query ID=Z89)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Comp.
Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>DT</b></p></TD>
<TD colspan=1 align="left"><p><b>Description</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>PatientList</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CX</p></TD>
<TD colspan=1 align="left"><p>The
combination of values for <i>PatientList.ID, and
PatientList.AssigningAuthority, </i>are intended to identify a unique entry on
the PATIENT_MASTER table. The <i>PatientList.IdentifierTypeCode</i> is useful
for further filtering or to supply uniqueness in the event that the assigning
authority may have more than one coding system. (The PATIENT_MASTER table
contains a constraint that prevents multiple patients from being identified by
the same combination of field values.) <br>
<br>If this field is not valued, all values for this field are considered to be
a match.<br><br>If one PID.3 is specified, only 1 segment pattern will be
returned.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><b>ID</b></p></TD>
<TD colspan=1 align="left"><p>ID</p></TD>
<TD colspan=1 align="left"><p>If
this field, PID.3.1, is not valued, all values for this field are considered to
be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><b>Assigning
Authority
</b></p></TD>
<TD colspan=1 align="left"><p>HD</p></TD>
<TD colspan=1 align="left"><p>If
this field, PID.3.4, is not valued, all values for this field are considered to
be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><b>Identifier
type code
</b></p></TD>
<TD colspan=1 align="left"><p>IS</p></TD>
<TD colspan=1 align="left"><p>If
this field, PID.3.5, is not valued, all values for this field are considered to
be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Result
Report Time.LL
</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>TS</p></TD>
<TD colspan=1 align="left"><p>The
earliest date and time for which results are to be returned.  If this field is
not valued, the earliest results that conform to the other query parameters
will be returned.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Result
Report Time.UL
</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>TS</p></TD>
<TD colspan=1 align="left"><p>The
latest date and time for which results are to be returned.  If this field is
not valued, the latest results that conform to the other query parameters will
be returned.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>LabDept</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>The
section(s) or department(s) of the laboratory reporting the results.  As many
<b>LabDept</b> values may be specified as desired.  If this field is not
valued, results that conform to the other query parameters from all sections or
departments will be returned.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>LOINCCode</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>The
LOINC identifier for the results to be reported.  As many <b>LOINCCode
</b>values may be specified as desired. If this field is not valued, results
that conform to the other query parameters for all LOINC codes will be returned.
</p></TD>
</TR>
</TABLE>
<p><b>RCP
Response Control Parameter Field Description and Commentary</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Field
Seq (Query ID=Z89)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Name</b></p></TD>
<TD colspan=1 align="left"><p><b>Component
Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>LEN</b></p></TD>
<TD colspan=1 align="left"><p><b>DT</b></p></TD>
<TD colspan=1 align="left"><p><b>Description</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>1</p></TD>
<TD colspan=1 align="left"><p>Query
Priority
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>1</p></TD>
<TD colspan=1 align="left"><p>ID</p></TD>
<TD colspan=1 align="left"><p>(<b>D</b>)eferred
or (<b>I</b>)mmediate.  Default is <b>I</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>2</p></TD>
<TD colspan=1 align="left"><p>Quantity
Limited Request
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>10</p></TD>
<TD colspan=1 align="left"><p>CQ</p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Quantity</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>NM</p></TD>
<TD colspan=1 align="left"><p>Number
of units (specified by the following component) that will be returned in each
increment of the response.  If no value is given, the entire response will be
returned in a single increment.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Units</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p><b>CH</b>aracters,
<b>LI</b>nes, <b>P</b>a<b>G</b>es, or <b>R</b>ecor<b>D</b>s.  Default is
<b>LI</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>3</p></TD>
<TD colspan=1 align="left"><p>Response
Modality
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>60</p></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p><b>R</b>eal
time or <b>B</b>atch.  Default is <b>R</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>7</p></TD>
<TD colspan=1 align="left"><p>Segment
group inclusion
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>256</p></TD>
<TD colspan=1 align="left"><p>ID</p></TD>
<TD colspan=1 align="left"><p>What
segment group(s) are to be included.  If this field is not valued, all segment
groups will be included.
</p></TD>
</TR>
</TABLE>
<p>If
a LOINC code is used as one of the operands of the input specification
expression, all of the other OBX segments which are part of the same OBR as the
selected OBX will be returned along with the selected OBX.  In other words, if
an OBX segment that is part of a panel is selected by the query, the entire
panel will be returned.
</p>

<h4>
<A NAME="Heading137">5.9.2.4 Lab example different instantiation</A></h4>

<p>The
same Query Name might be invoked with a different query tag (456) as
follows:<br>
The user wishes to know all the lab results reported having a LOINC code of
6777-7 between March 21, 1999 and March 23, 1999.<br>
MSH|^&amp;~\|PCR|GenHosp|LIS||199907131040-0800||QBP^Z89^QBP_Z89|4495|D|2.4|<br>
QPD
|Z89^LabResultsHistory^HL7nnnn||@OBX.3.4^EQ^6777-7^AND~@OBR.22^GE^19990321^AND~@OBR.22^LE^19990323<br>
RCP|I||R|<br>
The second instance of the "Lab Results for Specified Criteria" query would
clearly return quite different results than the first even though both are
invocations of the same query.
</p>

<h3>
<A NAME="Heading138">5.9.3 Query by parameter (QBP) / tabular response (RTB)</A></h3>


<h4>
<A NAME="Heading139"> </A></h4>


<h4>
<A NAME="Heading140">5.9.3.1 MPI example</A></h4>

<p>The
user wishes to know the identity of the patient whose medical record number is
"555444222111".<br>
MSH|^&amp;~\|PCR|GenHosp|MPI||199811201400-0800||QBP^Z91^QBP_Q13|8699|P|2.4||||||||<br>
QPD|Z91^WhoAmI^HL7nnnn|Q0009|555444222111^^^MPI^MR<br>
RCP|I|999^RD|<br>
RDF|PatientList^CX^20~PatientName^XPN^48~Mother'sMaidenName^XPN^48~DOB^TS^26~Sex^IS^1~Race^CE^80|<br>
The MPI system returns the following RTB message:<br>
MSH|^&amp;~\|MPI|GenHosp|PCR||199811201400-0800||RTB^Z92^RTB_K13|8699|P|2.4||||||||<br>
MSA|AA|8699|<br>
QAK|Q0009|OK|Z91^WhoAmI^HL7nnnn|1^1|<br>
QPD|Z91^WhoAmI^HL7nnnn|Q0009|555444222111^^MPI^MR<br>
RDF|PatientList^CX^20~PatientName^XPN^48~Mother'sMaidenName^XPN^48~DOB^TS^26~Sex^IS^1~Race^CE^80|<br>
RDT|555444222111^^^MPI^MR|Everyman^Adam||19600614|M||
</p>

<h5>
<A NAME="Heading141">5.9.3.1.1 MPI Conformance Statement</A></h5>

<p><center><b>Conformance
Statement</b></center><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Statement ID (Query ID=Z89):
</b></p></TD>
<TD colspan=1 align="left"><p>Z91</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Type:</b></p></TD>
<TD colspan=1 align="left"><p>Query</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Name:
</b></p></TD>
<TD colspan=1 align="left"><p>Who
Am I
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Trigger (= MSH-9):
</b></p></TD>
<TD colspan=1 align="left"><p>QBP^Z91^QBP_Q13</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Mode:
</b></p></TD>
<TD colspan=1 align="left"><p>Both</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Response
Trigger (= MSH-9):
</b></p></TD>
<TD colspan=1 align="left"><p>RTB^Z92^RTB_K13</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Characteristics:
</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Purpose:</b></p></TD>
<TD colspan=1 align="left"><p>Find
the identity of the patient for specified medical record number(s)
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Response
Characteristics:
</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Based
on Segment Pattern:
</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
</TABLE>
<p><br>
</p>
<TABLE>
<TR align="left">
<TD colspan=1 align="left"><p><tt><b><u>QBP^Z91^QBP_Q13</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Query
Grammar:  QBP Message 
</u></b></tt></p></TD>
<TD colspan=1 align="center"><p>Section
Reference
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header Segment
</tt></p></TD>
<TD colspan=1 align="center"><p>2.16.9</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QPD</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Parameter Definition
</tt></p></TD>
<TD colspan=1 align="center"><p>0</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
RDF ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Table
Row Definition Segment
</tt></p></TD>
<TD colspan=1 align="center"><p>5.5.6</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>RCP</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Response
Control Parameter
</tt></p></TD>
<TD colspan=1 align="center"><p>5.5.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="center"><p>2.16.4</p></TD>
</TR>
</TABLE>
<p><br>
</p>
<TABLE>
<TR align="left">
<TD colspan=1 align="left"><p><tt><b><u>RTB^Z94^RTB_K13</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Response
Grammar:<br>Who Am I
</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Group
Control
</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Comment</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Support
Indicator
</u></b></tt></p></TD>
<TD colspan=1 align="center"><p>Sec
Ref
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.9</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSA</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Acknowledgement
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.8</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[ERR]</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Error</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QAK</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Acknowledgement
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>5.5.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QPD</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Parameter Definition
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>5.5.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
RDF
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Table
Row Definition Segment
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>5.5.6</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 [{ RDT }]]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Table
Row Data Segment
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>5.5.7</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.4</p></TD>
</TR>
</TABLE>
<p><br>
<b>QPD Input Parameter Specification</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Field
Seq (Query ID=Z91)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Name</b></p></TD>
<TD colspan=1 align="left"><p><b>Key/</b><br>
<b>Search
</b></p></TD>
<TD colspan=1 align="left"><p><b>Sort</b></p></TD>
<TD colspan=1 align="left"><p><b>LEN</b></p></TD>
<TD colspan=1 align="left"><p><b>TYPE</b></p></TD>
<TD colspan=1 align="left"><p><b>Opt</b></p></TD>
<TD colspan=1 align="left"><p><b>Rep</b></p></TD>
<TD colspan=1 align="left"><p><b>Match
Op
</b></p></TD>
<TD colspan=1 align="left"><p><b>TBL</b></p></TD>
<TD colspan=1 align="left"><p><b>Segment
Field Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>Service
Identifier Code
</b></p></TD>
<TD colspan=1 align="left"><p><b>ElementName</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>1</p></TD>
<TD colspan=1 align="left"><p>MessageQueryName</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>60</p></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>R</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>2</p></TD>
<TD colspan=1 align="left"><p>QueryTag</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>32</p></TD>
<TD colspan=1 align="left"><p>ST</p></TD>
<TD colspan=1 align="left"><p>R</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>3</p></TD>
<TD colspan=1 align="left"><p>PatientList</p></TD>
<TD colspan=1 align="left"><p><b>S</b></p></TD>
<TD colspan=1 align="left"><p><b>Y</b></p></TD>
<TD colspan=1 align="left"><p><b>20</b></p></TD>
<TD colspan=1 align="left"><p><b>CX</b></p></TD>
<TD colspan=1 align="left"><p><b>O</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID.3</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID-3:
Patient  Identifier List
</p></TD>
</TR>
</TABLE>
<p><b>QPD
Input Parameter Field Description and Commentary</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Input
Parameter (Query ID=Z91)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Comp.
Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>DT</b></p></TD>
<TD colspan=1 align="left"><p><b>Description</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>MessageQueryName</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>Must
be valued <b>Z91^Who Am I^HL7nnnn</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>QueryTag</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ST</p></TD>
<TD colspan=1 align="left"><p>Unique
to each query message instance.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>PatientList</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CX</p></TD>
<TD colspan=1 align="left"><p>The
combination of values for <i>PatientList.ID, and
PatientList.AssigningAuthority,</i> are intended to identify a unique entry on
the PATIENT_MASTER table. The <i>PatientList.IdentifierTypeCode</i> is useful
for further filtering or to supply uniqueness in the event that the assigning
authority may have more than one coding system. (The PATIENT_MASTER table
contains a constraint that prevents multiple patients from being identified by
the same combination of field values.) <br><br>If this field is not valued, all
values for this field are considered to be a match.<br><br>If one PID.3 is
specified, only 1 segment pattern will be returned.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ID</p></TD>
<TD colspan=1 align="left"><p>ID</p></TD>
<TD colspan=1 align="left"><p>If
this field, PID.3.1, is not valued, all values for this field are considered to
be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Assigning
Authority
</p></TD>
<TD colspan=1 align="left"><p>HD</p></TD>
<TD colspan=1 align="left"><p>If
this field, PID.3.4, is not valued, all values for this field are considered to
be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Identifier
type code
</p></TD>
<TD colspan=1 align="left"><p>IS</p></TD>
<TD colspan=1 align="left"><p>If
this field, PID.3.5, is not valued, all values for this field are considered to
be a match.
</p></TD>
</TR>
</TABLE>
<p><b>RCP
Response Control Parameter Field Description and Commentary</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Field
Seq (Query ID=Z91)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Name</b></p></TD>
<TD colspan=1 align="left"><p><b>Component
Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>LEN</b></p></TD>
<TD colspan=1 align="left"><p><b>DT</b></p></TD>
<TD colspan=1 align="left"><p><b>Description</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>1</p></TD>
<TD colspan=1 align="left"><p>Query
Priority
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>1</p></TD>
<TD colspan=1 align="left"><p>ID</p></TD>
<TD colspan=1 align="left"><p>(<b>D</b>)eferred
or (<b>I</b>)mmediate.  Default is <b>I</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>2</p></TD>
<TD colspan=1 align="left"><p>Quantity
Limited Request
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>10</p></TD>
<TD colspan=1 align="left"><p>CQ</p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Quantity</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>NM</p></TD>
<TD colspan=1 align="left"><p>Number
of units (specified by the following component) that will be returned in each
increment of the response.  If no value is given, the entire response will be
returned in a single increment.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Units</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p><b>CH</b>aracters,
<b>LI</b>nes, <b>P</b>a<b>G</b>es, or <b>R</b>ecor<b>D</b>s.  Default is
<b>LI</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>3</p></TD>
<TD colspan=1 align="left"><p>Response
Modality
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>60</p></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p><b>R</b>eal
time or <b>B</b>atch.  Default is <b>R</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>6</p></TD>
<TD colspan=1 align="left"><p>Sort-by
Field
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>256</p></TD>
<TD colspan=1 align="left"><p>SRT</p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Sort-by
Field
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ST</p></TD>
<TD colspan=1 align="left"><p>Segment
field name of an output column by which the response may be sorted.  Must
contain a <b>Y</b> in the Sort column of the output specification table.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Sequencing</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ID</p></TD>
<TD colspan=1 align="left"><p>As
specified in HL7 Table 0397- Sequencing.  Default is <b>A</b>scending.
</p></TD>
</TR>
</TABLE>
<p><b>Output
Specification and Commentary: Virtual Table</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>ColName
(Query ID=Z91)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Key/</b><br>
<b>Search
</b></p></TD>
<TD colspan=1 align="left"><p><b>Sort</b></p></TD>
<TD colspan=1 align="left"><p><b>LEN</b></p></TD>
<TD colspan=1 align="left"><p><b>TYPE</b></p></TD>
<TD colspan=1 align="left"><p><b>Opt</b></p></TD>
<TD colspan=1 align="left"><p><b>Rep</b></p></TD>
<TD colspan=1 align="left"><p><b>Match
Op
</b></p></TD>
<TD colspan=1 align="left"><p><b>TBL</b></p></TD>
<TD colspan=1 align="left"><p><b>Segment
Field Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>Service
Identifier Code
</b></p></TD>
<TD colspan=1 align="left"><p><b>ElementName</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>PatientList</p></TD>
<TD colspan=1 align="left"><p><b>S</b></p></TD>
<TD colspan=1 align="left"><p><b>Y</b></p></TD>
<TD colspan=1 align="left"><p><b>20</b></p></TD>
<TD colspan=1 align="left"><p><b>CX</b></p></TD>
<TD colspan=1 align="left"><p><b>O</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID.3</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID-3:
Patient  Identifier List
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>PatientName</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>48</p></TD>
<TD colspan=1 align="left"><p>XPN</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID.5</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID-5
Patient Name
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Mother'sMaidenName</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>48</p></TD>
<TD colspan=1 align="left"><p>XPN</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID.6</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID-6
Mother's Maiden Name
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>DOB</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>26</p></TD>
<TD colspan=1 align="left"><p>TS</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID.7</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID-7
Date/Time of Birth
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Sex</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>1</p></TD>
<TD colspan=1 align="left"><p>IS</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID.8</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID-8
Sex
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Race</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>80</p></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID.10</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID-10
Race
</p></TD>
</TR>
</TABLE>
<h4>
<A NAME="Heading142">5.9.3.2 Pharmacy example:</A></h4>

<p>The
user wishes to know all the medications dispensed for the patient whose medical
record number is "555444222111" for the period beginning 5/31/98 and ending
5/31/99. The following QBP message is generated.<br>
MSH|^&amp;~\|PCR|Gen
Hosp|PIMS||199811201400-0800||QBP^Q42^QBP_Q13|8699|P|2.4||||||||<br>
QPD|Q42^Tabular Dispense History^HL7nnn|Q0010|555444222111^^^MPI^MR|
|19980531|19990531|<br>
RCP|I|999^RD|<br>
RDF|3|PatientList^ST^20~PatientName^XPN^48~MedicationDispensed^ST^40~RXD.3^TS^26<br>
The pharmacy system identifies medical record number "555444222111" as
belonging to Adam Everyman and locates 4 prescription dispenses meeting the
criteria and returns the following RTB message:<br>
MSH|^&amp;~\|PIMS|Gen
Hosp|PCR||199811201400-0800||RTB^K42^RTB_K13|8858|P|2.4||||||||<br>
MSA|AA|8699|<br>
QAK|Q010|OK|Q42^Tabular Dispense History^HL7nnn|4<br>
QPD|Q42^Tabular Dispense
History^HL7nnn|Q0010|555444222111^^^MPI^MR||19980531|19990531|<br>
RDF|7|PatientId^CX^20~PatientName^XPN^48~OrderControlCode^ID^2~
MedicationDispensed^CE^100~DispenseDate^TS^26~QuantityDispensed^NM^20~
OrderingProvider^XCN^120<br>
RDT|555444222111^^^MPI^MR|Everyman^Adam|RE|525440345^Verapamil Hydrochloride
120 mg TAB^NDC |199805291115-0700|100|77^Hippocrates^Harold^H^III^DR^MD<br>
RDT|555444222111^^^MPI^MR|Everyman^Adam|RE|00182196901^VERAPAMIL HCL ER TAB
180MG ER^NDC |19980821-0700|100|77^Hippocrates^Harold^H^III^DR^MD<br>
RDT|555444222111^^^MPI^MR|Everyman^Adam|RE|00172409660^BACLOFEN 10MG TABS^NDC
|199809221415-0700|10|88^Semmelweis^Samuel^^^DR^MD<br>
RDT|555444222111^^^MPI^MR|Everyman^Adam|RE|00054384163^THEOPHYLLINE 80MG/15ML
SOLN^NDC|199810121145-0700|10|99^Lister^Lenora^^^DR^MD
</p>

<h5>
<A NAME="Heading143">5.9.3.2.1 QBP/RTB dispense history Conformance Statement</A></h5>

<p><center><b>Conformance
Statement</b></center><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Statement ID (Query ID=Z89):
</b></p></TD>
<TD colspan=1 align="left"><p>Z93</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Type:</b></p></TD>
<TD colspan=1 align="left"><p>Query</p>
<BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Name:
</b></p></TD>
<TD colspan=1 align="left"><p>Tabular
Dispense History
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Trigger (= MSH-9):
</b></p></TD>
<TD colspan=1 align="left"><p>QBP^Z93^QBP_Q13</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Mode:
</b></p></TD>
<TD colspan=1 align="left"><p>Both</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Response
Trigger (= MSH-9):
</b></p></TD>
<TD colspan=1 align="left"><p>RTB^Z94^RTB_K13</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Characteristics:
</b></p></TD>
<TD colspan=1 align="left"><p>Returns
response sorted by Date Dispensed unless otherwise specified.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Purpose:</b></p></TD>
<TD colspan=1 align="left"><p>Find
medications dispensed between specified date range for specified medical record
numbers.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Response
Characteristics:
</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Based
on Segment Pattern:
</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
</TABLE>
<p><br>
</p>
<TABLE>
<TR align="left">
<TD colspan=1 align="left"><p><tt><b><u>QBP^Z93^QBP_Q13</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Query
Grammar:  QBP Message 
</u></b></tt></p></TD>
<TD colspan=1 align="center"><p>Section
Reference
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header Segment
</tt></p></TD>
<TD colspan=1 align="center"><p>2.16.9</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QPD</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Parameter Definition
</tt></p></TD>
<TD colspan=1 align="center"><p>0</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
RDF ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Table
Row Definition Segment
</tt></p></TD>
<TD colspan=1 align="center"><p>5.5.6</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>RCP</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Response
Control Parameter
</tt></p></TD>
<TD colspan=1 align="center"><p>5.5.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="center"><p>2.16.4</p></TD>
</TR>
</TABLE>
<p><br>
</p>
<TABLE>
<TR align="left">
<TD colspan=1 align="left"><p><tt><b><u>RTB^Z94^RTB_K13</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Response
Grammar:<br>Who Am I
</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Group
Control
</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Comment</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Support
Indicator
</u></b></tt></p></TD>
<TD colspan=1 align="center"><p>Sec
Ref
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.9</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSA</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Acknowledgement
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.8</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[ERR]</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Error</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QAK</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Acknowledgement
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>5.5.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QPD</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Parameter Definition
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>5.5.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
RDF
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Table
Row Definition Segment
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>5.5.6</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 [{ RDT }]]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Table
Row Data Segment
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>5.5.7</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.4</p></TD>
</TR>
</TABLE>
<p><b>QPD
Input Parameter Specification</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Field
Seq (Query ID=Z93)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Name</b></p></TD>
<TD colspan=1 align="left"><p><b>Key/</b><br>
<b>Search
</b></p></TD>
<TD colspan=1 align="left"><p><b>Sort</b></p></TD>
<TD colspan=1 align="left"><p><b>LEN</b></p></TD>
<TD colspan=1 align="left"><p><b>TYPE</b></p></TD>
<TD colspan=1 align="left"><p><b>Opt</b></p></TD>
<TD colspan=1 align="left"><p><b>Rep</b></p></TD>
<TD colspan=1 align="left"><p><b>Match
Op
</b></p></TD>
<TD colspan=1 align="left"><p><b>TBL</b></p></TD>
<TD colspan=1 align="left"><p><b>Segment
Field Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>Service
Identifier Code
</b></p></TD>
<TD colspan=1 align="left"><p><b>ElementName</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>1</p></TD>
<TD colspan=1 align="left"><p>MessageQueryName</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>60</p></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>R</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>2</p></TD>
<TD colspan=1 align="left"><p>QueryTag</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>32</p></TD>
<TD colspan=1 align="left"><p>ST</p></TD>
<TD colspan=1 align="left"><p>R</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>3</p></TD>
<TD colspan=1 align="left"><p>PatientList</p></TD>
<TD colspan=1 align="left"><p><b>S</b></p></TD>
<TD colspan=1 align="left"><p><b>Y</b></p></TD>
<TD colspan=1 align="left"><p><b>20</b></p></TD>
<TD colspan=1 align="left"><p><b>CX</b></p></TD>
<TD colspan=1 align="left"><p><b>O</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID.3</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID-3:
Patient  Identifier List
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>4</p></TD>
<TD colspan=1 align="left"><p>MedicationDispensed</p></TD>
<TD colspan=1 align="left"><p>S</p></TD>
<TD colspan=1 align="left"><p>Y</p></TD>
<TD colspan=1 align="left"><p>100</p></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>O</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>=</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RXD.2</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RXD-2:
Dispense/Give Code
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>5</p></TD>
<TD colspan=1 align="left"><p>DispenseDate.LL</p></TD>
<TD colspan=1 align="left"><p>S</p></TD>
<TD colspan=1 align="left"><p>Y</p></TD>
<TD colspan=1 align="left"><p>26</p></TD>
<TD colspan=1 align="left"><p>TS</p></TD>
<TD colspan=1 align="left"><p>O</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>&gt;<br>=</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RXD.3</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RXD-3:
Date/Time Dispensed
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>6</p></TD>
<TD colspan=1 align="left"><p>DispenseDate.UL</p></TD>
<TD colspan=1 align="left"><p>S</p></TD>
<TD colspan=1 align="left"><p>Y</p></TD>
<TD colspan=1 align="left"><p>26</p></TD>
<TD colspan=1 align="left"><p>TS</p></TD>
<TD colspan=1 align="left"><p>O</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>&lt;<br>=</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RXD.3</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RXD-3:
Date/Time Dispensed
</p></TD>
</TR>
</TABLE>
<p><b>QPD
Input Parameter Field Description and Commentary</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Input
Parameter (Query ID=Z93)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Comp.
Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>DT</b></p></TD>
<TD colspan=1 align="left"><p><b>Description</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>MessageQueryName</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>Must
be valued <b>Z93^Tabular Dispense History^HL7nnnn</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>QueryTag</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ST</p></TD>
<TD colspan=1 align="left"><p>Unique
to each query message instance.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>PatientList</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CX</p></TD>
<TD colspan=1 align="left"><p>The
combination of values for <i>PatientList.ID, and
PatientList.AssigningAuthority,</i> are intended to identify a unique entry on
the PATIENT_MASTER table. The <i>PatientList.IdentifierTypeCode</i> is useful
for further filtering or to supply uniqueness in the event that the assigning
authority may have more than one coding system. (The PATIENT_MASTER table
contains a constraint that prevents multiple patients from being identified by
the same combination of field values.)  This PATIENT_MASTER entry will be
searched against on the PHARMACY_DISPENSE_TRANSACTION table to retrieve the
rows fulfilling the query conditions. <br><br>If this field is not valued, all
values for this field are considered to be a match.<br><br>If one PID.3 is
specified, only 1 segment pattern will be returned.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ID</p></TD>
<TD colspan=1 align="left"><p>ID</p></TD>
<TD colspan=1 align="left"><p>If
this field, PID.3.1, is not valued, all values for this field are considered to
be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Assigning
Authority
</p></TD>
<TD colspan=1 align="left"><p>HD</p></TD>
<TD colspan=1 align="left"><p>If
this field, PID.3.4, is not valued, all values for this field are considered to
be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Identifier
type code
</p></TD>
<TD colspan=1 align="left"><p>IS</p></TD>
<TD colspan=1 align="left"><p>If
this field, PID.3.5, is not valued, all values for this field are considered to
be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>MedicationDispensed</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>If
this field is not valued, all values for this field are considered to be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>DispenseDate.LL</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>TS</p></TD>
<TD colspan=1 align="left"><p>This
is the earliest value to be returned for Date/Time Dispensed. If this field is
not valued, all values for this field are considered to be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>DispenseDate.UL</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>TS</p></TD>
<TD colspan=1 align="left"><p>This
is the latest value to be returned for Date/Time Dispensed. If this field is
not valued, all values for this field are considered to be a match.
</p></TD>
</TR>
</TABLE>
<p><b>RCP
Response Control Parameter Field Description and Commentary</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Field
Seq (Query ID=Z93)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Name</b></p></TD>
<TD colspan=1 align="left"><p><b>Component
Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>LEN</b></p></TD>
<TD colspan=1 align="left"><p><b>DT</b></p></TD>
<TD colspan=1 align="left"><p><b>Description</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>1</p></TD>
<TD colspan=1 align="left"><p>Query
Priority
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>1</p></TD>
<TD colspan=1 align="left"><p>ID</p></TD>
<TD colspan=1 align="left"><p>(<b>D</b>)eferred
or (<b>I</b>)mmediate.  Default is <b>I</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>2</p></TD>
<TD colspan=1 align="left"><p>Quantity
Limited Request
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>10</p>
<BR></TD>
<TD colspan=1 align="left"><p>CQ</p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Quantity</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>NM</p></TD>
<TD colspan=1 align="left"><p>Number
of units (specified by the following component) that will be returned in each
increment of the response.  If no value is given, the entire response will be
returned in a single increment.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Units</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p><b>CH</b>aracters,
<b>LI</b>nes, <b>P</b>a<b>G</b>es, or <b>R</b>ecor<b>D</b>s.  Default is
<b>LI</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>3</p></TD>
<TD colspan=1 align="left"><p>Response
Modality
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>60</p></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p><b>R</b>eal
time or <b>B</b>atch.  Default is <b>R</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>6</p></TD>
<TD colspan=1 align="left"><p>Sort-by
Field
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>256</p></TD>
<TD colspan=1 align="left"><p>SRT</p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Sort-by
Field
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ST</p></TD>
<TD colspan=1 align="left"><p>Segment
field name of an output column by which the response may be sorted.  Must
contain a <b>Y</b> in the Sort column of the output specification table.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Sequencing</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ID</p></TD>
<TD colspan=1 align="left"><p>As
specified in HL7 Table 0397- Sequencing.  Default is <b>A</b>scending.
</p></TD>
</TR>
</TABLE>
<p><b>Output
Specification and Commentary: Virtual Table</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>ColName
(Query ID=Z93)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Key/</b><br>
<b>Search
</b></p></TD>
<TD colspan=1 align="left"><p><b>Sort</b></p></TD>
<TD colspan=1 align="left"><p><b>LEN</b></p></TD>
<TD colspan=1 align="left"><p><b>TYPE</b></p></TD>
<TD colspan=1 align="left"><p><b>Opt</b></p></TD>
<TD colspan=1 align="left"><p><b>Rep</b></p></TD>
<TD colspan=1 align="left"><p><b>Match
Op
</b></p></TD>
<TD colspan=1 align="left"><p><b>TBL</b></p></TD>
<TD colspan=1 align="left"><p><b>Segment
Field Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>Service
Identifier Code
</b></p></TD>
<TD colspan=1 align="left"><p><b>ElementName</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>PatientList</p></TD>
<TD colspan=1 align="left"><p><b>S</b></p></TD>
<TD colspan=1 align="left"><p><b>Y</b></p></TD>
<TD colspan=1 align="left"><p><b>20</b></p></TD>
<TD colspan=1 align="left"><p><b>CX</b></p></TD>
<TD colspan=1 align="left"><p><b>O</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID.3</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID-3:
Patient  Identifier List
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>PatientName</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>48</p></TD>
<TD colspan=1 align="left"><p>XPN</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID.5</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID-5
Patient Name
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>MedicationDispensed</p></TD>
<TD colspan=1 align="left"><p>S</p></TD>
<TD colspan=1 align="left"><p>Y</p></TD>
<TD colspan=1 align="left"><p>100</p></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>O</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>=</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RXD.2</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RXD-2
Dispense/Give Code
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>DispenseDate.LL</p></TD>
<TD colspan=1 align="left"><p>S</p></TD>
<TD colspan=1 align="left"><p>Y</p></TD>
<TD colspan=1 align="left"><p>26</p></TD>
<TD colspan=1 align="left"><p>TS</p></TD>
<TD colspan=1 align="left"><p>O</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>&gt;=</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RXD.3</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RXD-3
Date/Time Dispensed
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>DispenseDate.UL</p></TD>
<TD colspan=1 align="left"><p>S</p></TD>
<TD colspan=1 align="left"><p>Y</p></TD>
<TD colspan=1 align="left"><p>26</p></TD>
<TD colspan=1 align="left"><p>TS</p></TD>
<TD colspan=1 align="left"><p>O</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>&lt;=</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RXD.3</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RXD-3
Date/Time Dispensed
</p></TD>
</TR>
</TABLE>
<h3>
<A NAME="Heading144">5.9.4 Query using QSC variant / tabular response (RTB)</A></h3>


<h4>
<A NAME="Heading145"> </A></h4>


<h4>
<A NAME="Heading146">5.9.4.1 Pharmacy example</A></h4>

<p>The
user wishes to know all the medications dispensed for the patient whose medical
record number is "555444222111" for the period beginning 5/31/98 and ending
5/31/99.  The following message is generated.<br>
MSH|^&amp;~\|PCR|Gen
Hosp|PIMS||199811201400-0800||QBP^Z95^QBP_Q13|8699|P|2.4||||||||<br>
QPD|Z95^Dispense Information^HL7nnnn|Q504
|PID.3^EQ^55544422211^AND~RXD.3^GE^19980531^AND~RXD.3^LE^19990531<br>
RCP|Q001|I|999^RD|<br>
RDF|3|PatientList^ST^20~PatientName^XPN^48~OrderControlCode^ID^2~OrderingProvider^XCN^120~MedicationDispensed^ST^40~DispenseDate^TS^26~QuantityDispensed^NM^20|<br>
The pharmacy system identifies medical record number "555444222111" as
belonging to Adam Everyman and locates 4 prescription dispenses meeting the
criteria and returns the following RTB message:<br>
MSH|^&amp;~\|PIMS|Gen
Hosp|PCR||199811201400-0800||RTB^Z96^RTB_K13|8858|P|2.4||||||||<br>
MSA|AA|8699|<br>
QAK|Q001|OK|Z95^Dispense Information^HL7nnnn|4<br>
QPD|Z95^Dispense Information^HL7nnnn|Q504
|PID.3^EQ^55544422211^AND~RXD.3^GE^19980531^AND~RXD.3^LE^19990531<br>
RDF|3|PatientList^ST^20~PatientName^XPN^48~OrderControlCode^ID^2~OrderingProvider^XCN^120~MedicationDispensed^ST^40~DispenseDate^TS^26~QuantityDispensed^NM^20|<br>
RDT|555444222111^^^MPI^MR|Everyman^Adam|RE|77^Hippocrates^Harold^H^III^DR^MD
|525440345^Verapamil Hydrochloride 120 mg TAB^NDC |199805291115-0700|100<br>
RDT|555444222111^^^MPI^MR|Everyman^Adam|RE|77^Hippocrates^Harold^H^III^DR^MD
|00182196901^VERAPAMIL HCL ER TAB 180MG ER^NDC |19980821-0700|100<br>
RDT|555444222111^^^MPI^MR|Everyman^Adam|RE|88^Semmelweis^Samuel^^^DR^MD
|00172409660^BACLOFEN 10MG TABS^NDC |199809221415-0700|10<br>
RDT|555444222111^^^MPI^MR|Everyman^Adam|RE|99^Lister^Lenora^^^DR^MD
|00054384163^THEOPHYLLINE 80MG/15ML SOLN^NDC|199810121145-0700|10
</p>

<h5>
<A NAME="Heading147">5.9.4.1.1 QBP/RTB dispense history Conformance Statement using QSC variant</A></h5>

<p>Note
that this Conformance Statement includes no separate Output Description and
Commentary.  In the QBP/RTB combination using the QSC variant, the selection
criteria in <i>QPD-3-user parameters</i> and the desired return data in
<i>RDF-2-column description</i> are constructed from the same Virtual Table,
which appears in the Input Specification.<br>
<center><b>Conformance Statement</b></center><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Statement ID (Query ID=Z95):
</b></p></TD>
<TD colspan=1 align="left"><p>Z95</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Type:</b></p></TD>
<TD colspan=1 align="left"><p>Query</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Name:
</b></p></TD>
<TD colspan=1 align="left"><p>Tabular
Dispense History
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Trigger (= MSH-9):
</b></p></TD>
<TD colspan=1 align="left"><p>QBP^Z95^QBP_Q13</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Mode:
</b></p></TD>
<TD colspan=1 align="left"><p>Both</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Response
Trigger (= MSH-9):
</b></p></TD>
<TD colspan=1 align="left"><p>RTB^Z96^RTB_Q13</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Characteristics:
</b></p></TD>
<TD colspan=1 align="left"><p>Selection
criteria are chosen from a Virtual Table.  May specify patient, medication, and
a date range.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Purpose:</b></p></TD>
<TD colspan=1 align="left"><p>To
retrieve patient pharmacy dispense history information from the Server.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Response
Characteristics:
</b></p></TD>
<TD colspan=1 align="center"><p>Columns
from the <b>Virtual Table </b>listed in the Input/Output Specification are
specified for output in the RDF segment.<br>
<b>If no columns are specified in the RDF segment, all columns will be
returned.</b><br>
Response is sorted by Medication Dispensed unless otherwise specified in<b>
SortControl.
</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Based
on Segment Pattern:
</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
</TABLE>
<p><br>
</p>
<TABLE>
<TR align="left">
<TD colspan=1 align="left"><p><tt><b><u>QBP^Z95^QBP_Q13</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Query
Grammar:  QBP Message 
</u></b></tt></p></TD>
<TD colspan=1 align="center"><p>Section
Reference
</p>
<BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header Segment
</tt></p></TD>
<TD colspan=1 align="center"><p>2.16.9</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QPD</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Parameter Definition
</tt></p></TD>
<TD colspan=1 align="center"><p>0</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
RDF ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Table
Row Definition Segment
</tt></p></TD>
<TD colspan=1 align="center"><p>5.5.6</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>RCP</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Response
Control Parameter
</tt></p></TD>
<TD colspan=1 align="center"><p>5.5.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="center"><p>2.16.4</p></TD>
</TR>
</TABLE>
<p><br>
</p>
<TABLE>
<TR align="left">
<TD colspan=1 align="left"><p><tt><b><u>RTB^Z96^RTB_Q13</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Response
Grammar:<br>Who Am I
</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Group
Control
</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Comment</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Support
Indicator
</u></b></tt></p></TD>
<TD colspan=1 align="center"><p>Sec
Ref
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.9</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSA</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Acknowledgement
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.8</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[ERR]</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Error</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QAK</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Acknowledgement
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>5.5.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QPD</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Parameter Definition
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>5.5.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
RDF
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Table
Row Definition Segment
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>5.5.6</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 [{ RDT }]]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Table
Row Data Segment
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>5.5.7</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.4</p></TD>
</TR>
</TABLE>
<p><br>
<b>QPD Input Parameter Specification</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Field
Seq (Query ID=Z95)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Field
Description
</b></p></TD>
<TD colspan=1 align="left"><p><b>Key/</b><br>
<b>Search
</b></p></TD>
<TD colspan=1 align="left"><p><b>Sort</b></p></TD>
<TD colspan=1 align="left"><p><b>LEN</b></p></TD>
<TD colspan=1 align="left"><p><b>TYPE</b></p></TD>
<TD colspan=1 align="left"><p><b>Opt</b></p></TD>
<TD colspan=1 align="left"><p><b>Rep</b></p></TD>
<TD colspan=1 align="left"><p><b>Match
Op
</b></p></TD>
<TD colspan=1 align="left"><p><b>TBL</b></p></TD>
<TD colspan=1 align="left"><p><b>Segment
Field Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>Service
Identifier Code
</b></p></TD>
<TD colspan=1 align="left"><p><b>ElementName</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>1</p></TD>
<TD colspan=1 align="left"><p>MessageQueryName</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>60</p></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>R</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>2</p></TD>
<TD colspan=1 align="left"><p>QueryTag</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>32</p></TD>
<TD colspan=1 align="left"><p>ST</p></TD>
<TD colspan=1 align="left"><p>R</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>3</p></TD>
<TD colspan=1 align="left"><p>SelectionCriteria</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><b>255</b></p></TD>
<TD colspan=1 align="left"><p><b>ST</b></p></TD>
<TD colspan=1 align="left"><p><b>R</b></p></TD>
<TD colspan=1 align="left"><p><b>Y</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
</TABLE>
<p><b>QPD
Input Parameter Field Description and Commentary</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Input
Parameter (Query ID=Z95)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Comp.
Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>DT</b></p></TD>
<TD colspan=1 align="left"><p><b>Description</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>MessageQueryName</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>Must
be valued <b>Z95^Tabular Dispense History^HL7nnnn</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>QueryTag</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ST</p></TD>
<TD colspan=1 align="left"><p>Unique
to each query message instance.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>SelectionCriteria</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ST</p></TD>
<TD colspan=1 align="left"><p>A
query expression whose operands are derived from the "ColName" column in the
"Input/Output Specification: Virtual Table" given below.
</p></TD>
</TR>
</TABLE>
<p><b>Input/Output
Specification: Virtual Table</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>ColName
(Query ID=Z95)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Key/</b><br>
<b>Search
</b></p></TD>
<TD colspan=1 align="left"><p><b>Sort</b></p></TD>
<TD colspan=1 align="left"><p><b>LEN</b></p></TD>
<TD colspan=1 align="left"><p><b>TYPE</b></p></TD>
<TD colspan=1 align="left"><p><b>Opt</b></p></TD>
<TD colspan=1 align="left"><p><b>Rep</b></p></TD>
<TD colspan=1 align="left"><p><b>Match
Op
</b></p></TD>
<TD colspan=1 align="left"><p><b>TBL</b></p></TD>
<TD colspan=1 align="left"><p><b>Segment
Field Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>Service
Identifier Code
</b></p></TD>
<TD colspan=1 align="left"><p><b>ElementName</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>PatientList</p></TD>
<TD colspan=1 align="left"><p>S</p></TD>
<TD colspan=1 align="left"><p>Y</p></TD>
<TD colspan=1 align="left"><p>20</p></TD>
<TD colspan=1 align="left"><p>CX</p></TD>
<TD colspan=1 align="left"><p>O</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID.3</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID-3:
Patient  Identifier List
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>PatientName</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>48</p></TD>
<TD colspan=1 align="left"><p>XPN</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID.5</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID-5
Patient Name
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>OrderControlCode</p></TD>
<TD colspan=1 align="left"><p>S</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>2</p></TD>
<TD colspan=1 align="left"><p>ID</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>0119</p></TD>
<TD colspan=1 align="left"><p>ORC.1</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ORC-1
Order Control
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>MedicationDispensed</p></TD>
<TD colspan=1 align="left"><p>S</p></TD>
<TD colspan=1 align="left"><p>Y</p></TD>
<TD colspan=1 align="left"><p>100</p></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RXD.2</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RXD-2
Dispense/Give Code
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>DispenseDate</p></TD>
<TD colspan=1 align="left"><p>S</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>26</p></TD>
<TD colspan=1 align="left"><p>TS</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RXD.3</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RXD-2
Date/Time Dispensed
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>QuantityDispensed</p></TD>
<TD colspan=1 align="left"><p>L</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>20</p></TD>
<TD colspan=1 align="left"><p>NM</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RXD.4</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RXD-4
Actual Dispense Amount
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>OrderingProvider</p></TD>
<TD colspan=1 align="left"><p>S</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>120</p></TD>
<TD colspan=1 align="left"><p>XCN</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ORC.12</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ORC-12
Ordering Provider
</p></TD>
</TR>
</TABLE>
<p><b>Virtual
Table Field Description and Commentary</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>ColName
(Query ID=Z95)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Comp.
Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>DT</b></p></TD>
<TD colspan=1 align="left"><p><b>Description</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>PatientList</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CX</p></TD>
<TD colspan=1 align="left"><p>The
combination of values for <i>PatientList.ID, and
PatientList.AssigningAuthority,</i> are intended to identify a unique entry on
the PATIENT_MASTER table. The <i>PatientList.IdentifierTypeCode</i> is useful
for further filtering or to supply uniqueness in the event that the assigning
authority may have more than one coding system. (The PATIENT_MASTER table
contains a constraint that prevents multiple patients from being identified by
the same combination of field values.)  This PATIENT_MASTER entry will be
searched against on the PHARMACY_DISPENSE_TRANSACTION table to retrieve the
rows fulfilling the query conditions. <br><br>If this field is not valued, all
values for this field are considered to be a match.<br><br>If one PID.3 is
specified, only 1 segment pattern will be returned.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><b>ID</b></p></TD>
<TD colspan=1 align="left"><p>ID</p></TD>
<TD colspan=1 align="left"><p>If
this field, PID.3.1, is not valued, all values for this field are considered to
be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><b>Assigning
Authority
</b></p></TD>
<TD colspan=1 align="left"><p>HD</p></TD>
<TD colspan=1 align="left"><p>If
this field, PID.3.4, is not valued, all values for this field are considered to
be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><b>Identifier
type code
</b></p></TD>
<TD colspan=1 align="left"><p>IS</p></TD>
<TD colspan=1 align="left"><p>If
this field, PID.3.5, is not valued, all values for this field are considered to
be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>PatientName</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>XPN</p></TD>
<TD colspan=1 align="left"><p>If
this field, PID.5, is not valued, all values for this field are considered to
be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>OrderControlCode</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ID</p></TD>
<TD colspan=1 align="left"><p>If
this field, ORC.1, is not valued, all values for this field are considered to
be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>MedicationDispensed</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>If
this field, RXD.2, is not valued, all values for this field are considered to
be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>DispenseDate</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>TS</p></TD>
<TD colspan=1 align="left"><p>If
this field, RXD.3, is not valued, all values for this field are considered to
be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>QuantityDispensed</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>NM</p></TD>
<TD colspan=1 align="left"><p>If
this field, RXD.4, is not valued, all values for this field are considered to
be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>OrderingProvider</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>XCN</p></TD>
<TD colspan=1 align="left"><p>If
this field, ORC.12, is not valued, all values for this field are considered to
be a match.
</p></TD>
</TR>
</TABLE>
<p><b>RCP
Response Control Parameter Field Description and Commentary</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Field
Seq (Query ID=Z95)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Name</b></p></TD>
<TD colspan=1 align="left"><p><b>Component
Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>LEN</b></p></TD>
<TD colspan=1 align="left"><p><b>DT</b></p></TD>
<TD colspan=1 align="left"><p><b>Description</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>1</p></TD>
<TD colspan=1 align="left"><p>Query
Priority
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>1</p></TD>
<TD colspan=1 align="left"><p>ID</p></TD>
<TD colspan=1 align="left"><p>(<b>D</b>)eferred
or (<b>I</b>)mmediate.  Default is <b>I</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>2</p></TD>
<TD colspan=1 align="left"><p>Quantity
Limited Request
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>10</p></TD>
<TD colspan=1 align="left"><p>CQ</p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Quantity</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>NM</p></TD>
<TD colspan=1 align="left"><p>Number
of units (specified by the following component) that will be returned in each
increment of the response.  If no value is given, the entire response will be
returned in a single increment.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Units</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p><b>CH</b>aracters,
<b>LI</b>nes, <b>P</b>a<b>G</b>es, or <b>R</b>ecor<b>D</b>s.  Default is
<b>LI</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>3</p></TD>
<TD colspan=1 align="left"><p>Response
Modality
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>60</p></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p><b>R</b>eal
time or <b>B</b>atch.  Default is <b>R</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>6</p></TD>
<TD colspan=1 align="left"><p>Sort-by
Field
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>256</p></TD>
<TD colspan=1 align="left"><p>SRT</p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Sort-by
Field
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ST</p></TD>
<TD colspan=1 align="left"><p>Segment
field name of an output column by which the response may be sorted.  Must
contain a <b>Y</b> in the Sort column of the output specification table.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Sequencing</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ID</p></TD>
<TD colspan=1 align="left"><p>As
specified in HL7 Table 0397- Sequencing.  Default is <b>A</b>scending.
</p></TD>
</TR>
</TABLE>
<h3>
<A NAME="Heading148">5.9.5 Query by parameter (QBP) / display response (RDY)</A></h3>

<p>The
user wishes to know all the medications dispensed for the patient whose medical
record number is "555444222111" for the period beginning 5/31/98 and ending
5/31/99.  The following QBP message is generated.<br>
MSH|^&amp;~\|PCR|Gen
Hosp|PIMS||199909171400-0800||QBP^Z97^QBP_Q15|8699|P|2.4||||||||<br>
QPD|Z97^DispenseHistoryDisplay^HL7nnnn|Q005|555444222111^^^MPI^MR||19980531|19990531|<br>
RCP|I|999^RD|<br>
The pharmacy system identifies medical record number "555444222111" as
belonging to Adam Everyman and locates 4 prescription dispenses meeting the
criteria and returns the following RDY message:<br>
MSH|^&amp;~\|PIMS|Gen
Hosp|PCR||199909171401-0800||RDY^Z98^RDY_K15|8858|P|2.3||||||||<br>
MSA|AA|8699|<br>
QAK|Q005|OK|Z97^DispenseHistoryDisplay|4<br>
QPD|Z97^DispenseHistoryDisplay^HL7nnnn|Q005|555444222111^^^MPI^MR||19980531|19990531|<br>
DSP||        GENERAL HOSPITAL - PHARMACY DEPARTMENT          DATE:09-17-99<br>
DSP||        DISPENSE HISTORY REPORT                               PAGE  1<br>
DSP||MRN          Patient Name       MEDICATION DISPENSED        DISP-DATE<br>
DSP||555444222111 Everyman,Adam      VERAPAMIL HCL 120 mg TAB   05/29/1998<br>
DSP||555444222111 Everyman,Adam      VERAPAMIL HCL ER TAB 180MG 08/21/1998<br>
DSP||555444222111 Everyman,Adam      BACLOFEN 10MG TABS         09/22/1998<br>
DSP||555444222111 Everyman,Adam      THEOPHYLLINE 80MG/15ML SOL 10/12/1998<br>
DSP||       &lt;&lt; END OF REPORT &gt;&gt;</p>

<h4>
<A NAME="Heading149"> </A></h4>


<h4>
<A NAME="Heading150">5.9.5.1 Dispense history display Conformance Statement</A></h4>

<p>Note
that this Conformance Statement includes no separate Output Description and
Commentary.  In conformance statements that specify an RDY response message,
the display format follows the response grammar. <br>
<center><b>Conformance Statement</b></center><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Statement ID (Query ID=Z97):
</b></p></TD>
<TD colspan=1 align="left"><p>Z97</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Type:</b></p></TD>
<TD colspan=1 align="left"><p>Query</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Name:
</b></p></TD>
<TD colspan=1 align="left"><p>Dispense
History
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Trigger (= MSH-9):
</b></p></TD>
<TD colspan=1 align="left"><p>QBP^Z97^QBP_Q15</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Mode:
</b></p></TD>
<TD colspan=1 align="left"><p>Both</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Response
Trigger (= MSH-9):
</b></p></TD>
<TD colspan=1 align="left"><p>RDY^Z98^RDY_K15</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Characteristics:
</b></p></TD>
<TD colspan=1 align="left"><p>May
specify patient, medication, a date range, and how the response is to be sorted.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Purpose:</b></p></TD>
<TD colspan=1 align="left"><p>To
retrieve patient pharmacy dispense history information from the Server.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Response
Characteristics:
</b></p></TD>
<TD colspan=1 align="left"><p>Returns
data formatted for screen display.  Data are sorted by Medication Dispensed
unless otherwise specified in<b> SortControl.
</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Based
on Segment Pattern:
</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
</TABLE>
<p><br>
</p>
<TABLE>
<TR align="left">
<TD colspan=1 align="left"><p><tt><b><u>QBP^Z97^QBP_Q15</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Query
Grammar:  QBP Message 
</u></b></tt></p></TD>
<TD colspan=1 align="center"><p>Section
Reference
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header Segment
</tt></p></TD>
<TD colspan=1 align="center"><p>2.16.9</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QPD</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Parameter Definition
</tt></p></TD>
<TD colspan=1 align="center"><p>5.5.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>RCP</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Response
Control Parameter
</tt></p></TD>
<TD colspan=1 align="center"><p>5.5.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="center"><p>2.16.4</p></TD>
</TR>
</TABLE>
<p><br>
</p>
<TABLE>
<TR align="left">
<TH colspan=1 align="left"><p><tt><b><u>RDY^Z98^RDY_K15</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Response
Grammar:  Dispense History
</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Group
Control
</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Comment</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Support
Indicator
</u></b></tt></p></TH>
<TH><p>Sec
Ref
</p></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.9</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSA</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Acknowledgement
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.8</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[ERR]</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Error</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QAK</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Acknowledgement
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>5.5.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QPD</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Parameter Definition
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>0</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[{
DSP }]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Display
Data
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>5.5.1</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.4</p></TD>
</TR>
</TABLE>
<p><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><tt><b>The
data will display as follows: (Query ID=Z97)
</b></tt></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>DSP||
       GENERAL HOSPITAL - PHARMACY DEPARTMENT          DATE:mm-dd-yy
</tt></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>DSP||
       DISPENSE HISTORY REPORT                               PAGE  n
</tt></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>DSP||MRN
         Patient Name       MEDICATION DISPENSED        DISP-DATE
</tt></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>DSP||XXXXX
      XXXXXx, XXXXX       XXXXXXXXXXXXXXXX              mm/dd/ccyy
</tt></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>...</tt></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>DSP||
      &lt;&lt; END OF REPORT &gt;&gt;
</tt></p></TD>
</TR>
</TABLE>
<p><b>QPD
Input Parameter Specification</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Field
Seq (Query ID=Z97)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Name</b></p></TD>
<TD colspan=1 align="left"><p><b>Key/</b><br>
<b>Search
</b></p></TD>
<TD colspan=1 align="left"><p><b>Sort</b></p></TD>
<TD colspan=1 align="left"><p><b>LEN</b></p></TD>
<TD colspan=1 align="left"><p><b>TYPE</b></p></TD>
<TD colspan=1 align="left"><p><b>Opt</b></p></TD>
<TD colspan=1 align="left"><p><b>Rep</b></p></TD>
<TD colspan=1 align="left"><p><b>Match
Op
</b></p></TD>
<TD colspan=1 align="left"><p><b>TBL</b></p></TD>
<TD colspan=1 align="left"><p><b>Segment
Field Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>Service
Identifier Code
</b></p></TD>
<TD colspan=1 align="left"><p><b>ElementName</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>1</p></TD>
<TD colspan=1 align="left"><p>MessageQueryName</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>60</p></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>R</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>2</p></TD>
<TD colspan=1 align="left"><p>QueryTag</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>32</p></TD>
<TD colspan=1 align="left"><p>ST</p></TD>
<TD colspan=1 align="left"><p>R</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>3</p></TD>
<TD colspan=1 align="left"><p>PatientList</p></TD>
<TD colspan=1 align="left"><p>S</p></TD>
<TD colspan=1 align="left"><p>Y</p></TD>
<TD colspan=1 align="left"><p>20</p></TD>
<TD colspan=1 align="left"><p>CX</p>
<BR></TD>
<TD colspan=1 align="left"><p>O</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID.3</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID-3:
Patient  Identifier List
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>4</p></TD>
<TD colspan=1 align="left"><p>MedicationDispensed</p></TD>
<TD colspan=1 align="left"><p>S</p></TD>
<TD colspan=1 align="left"><p>Y</p></TD>
<TD colspan=1 align="left"><p>100</p></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>O</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>=</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RXD.2</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RXD-2:
Dispense/Give Code
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>5</p></TD>
<TD colspan=1 align="left"><p>DispenseDate.LL</p></TD>
<TD colspan=1 align="left"><p>S</p></TD>
<TD colspan=1 align="left"><p>Y</p></TD>
<TD colspan=1 align="left"><p>26</p></TD>
<TD colspan=1 align="left"><p>TS</p></TD>
<TD colspan=1 align="left"><p>O</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>&gt;<br>=</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RXD.3</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RXD-3:
Date/Time Dispensed
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>6</p></TD>
<TD colspan=1 align="left"><p>DispenseDate.UL</p></TD>
<TD colspan=1 align="left"><p>S</p></TD>
<TD colspan=1 align="left"><p>Y</p></TD>
<TD colspan=1 align="left"><p>26</p></TD>
<TD colspan=1 align="left"><p>TS</p></TD>
<TD colspan=1 align="left"><p>O</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>&lt;<br>=</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RXD.3</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RXD-3:
Date/Time Dispensed
</p></TD>
</TR>
</TABLE>
<p><b>QPD
Input Parameter Field Description and Commentary</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Input
Parameter (Query ID=Z97)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Comp.
Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>DT</b></p></TD>
<TD colspan=1 align="left"><p><b>Description</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>MessageQueryName</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>Must
be valued <b>Z97^Dispense History^HL7nnnn</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>QueryTag</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ST</p></TD>
<TD colspan=1 align="left"><p>Unique
to each query message instance.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>PatientList</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CX</p></TD>
<TD colspan=1 align="left"><p>The
combination of values for <i>PatientList.ID, and
PatientList.AssigningAuthority,</i> are intended to identify a unique entry on
the PATIENT_MASTER table. The <i>PatientList.IdentifierTypeCode</i> is useful
for further filtering or to supply uniqueness in the event that the assigning
authority may have more than one coding system. (The PATIENT_MASTER table
contains a constraint that prevents multiple patients from being identified by
the same combination of field values.)  This PATIENT_MASTER entry will be
searched against on the PHARMACY_DISPENSE_TRANSACTION table to retrieve the
rows fulfilling the query conditions. <br><br>If this field is not valued, all
values for this field are considered to be a match.<br><br>If one PID.3 is
specified, only 1 segment pattern will be returned.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><b>ID</b></p></TD>
<TD colspan=1 align="left"><p>ID</p></TD>
<TD colspan=1 align="left"><p>If
this field, PID.3.1, is not valued, all values for this field are considered to
be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><b>Assigning
Authority
</b></p></TD>
<TD colspan=1 align="left"><p>HD</p></TD>
<TD colspan=1 align="left"><p>If
this field, PID.3.4, is not valued, all values for this field are considered to
be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><b>Identifier
type code
</b></p></TD>
<TD colspan=1 align="left"><p>IS</p></TD>
<TD colspan=1 align="left"><p>If
this field, PID.3.5, is not valued, all values for this field are considered to
be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>MedicationDispensed</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>If
this field is not valued, all values for this field are considered to be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>DispenseDate.LL</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>TS</p></TD>
<TD colspan=1 align="left"><p>This
is the earliest value to be returned for Date/Time Dispensed. If this field is
not valued, all values for this field are considered to be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>DispenseDate.UL</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>TS</p></TD>
<TD colspan=1 align="left"><p>This
is the latest value to be returned for Date/Time Dispensed. If this field is
not valued, all values for this field are considered to be a match.
</p></TD>
</TR>
</TABLE>
<p><b>RCP
Response Control Parameter Field Description and Commentary</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Field
Seq (Query ID=Z97)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Name</b></p></TD>
<TD colspan=1 align="left"><p><b>Component
Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>LEN</b></p></TD>
<TD colspan=1 align="left"><p><b>DT</b></p></TD>
<TD colspan=1 align="left"><p><b>Description</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>1</p></TD>
<TD colspan=1 align="left"><p>Query
Priority
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>1</p></TD>
<TD colspan=1 align="left"><p>ID</p></TD>
<TD colspan=1 align="left"><p>(<b>D</b>)eferred
or (<b>I</b>)mmediate.  Default is <b>I</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>2</p></TD>
<TD colspan=1 align="left"><p>Quantity
Limited Request
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>10</p></TD>
<TD colspan=1 align="left"><p>CQ</p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Quantity</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>NM</p></TD>
<TD colspan=1 align="left"><p>Number
of units (specified by the following component) that will be returned in each
increment of the response.  If no value is given, the entire response will be
returned in a single increment.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Units</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p><b>CH</b>aracters,
<b>LI</b>nes, <b>P</b>a<b>G</b>es, or <b>R</b>ecor<b>D</b>s.  Default is
<b>LI</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>3</p></TD>
<TD colspan=1 align="left"><p>Response
Modality
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>60</p></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p><b>R</b>eal
time or <b>B</b>atch.  Default is <b>R</b>.
</p></TD>
</TR>
</TABLE>
<h3>
<A NAME="Heading151">5.9.6 Query using QSC variant (QBP) / display response (RDY)</A></h3>

<p>The
user wishes to know all the medications ever dispensed for the patient whose
medical record number is "555444222111" prescribed by Dr Lister (provider
number 99). The following message is generated. (Note the similarity between
the QPD segment here and that used in the query in Section 5.8.4.)<br>
MSH|^&amp;~\|PCR|Gen
Hosp|PIMS||199811201300-0800||QBP^Z79^QBP_Q15|8698|P|2.4||||||||<br>
QPD|Z79^Dispense Information^HL7nnnn|Q503
|PID.3^EQ^55544422211^AND~ORC.1^EQ^RE^AND~ORC.12.1^EQ^99<br>
RCP|I|999^RD| <br>
The pharmacy system identifies medical record number "555444222111" as
belonging to Adam Everyman and locates 2 prescription dispenses as prescribed
by Dr. Lister. The response is clearly different than the response to the first
query.<br>
MSH|^&amp;~\|PIMS|Gen
Hosp|PCR||199811201300-0800||RDY^Z80^RDY_K15|8857|P|2.3||||||||<br>
MSA|AA|8698|<br>
QAK|Q003|OK|Z79^Dispense Information^HL7nnnn|2<br>
QPD|Z79^Dispense Information^HL7nnnn|Q503
|@PID.3^EQ^55544422211^AND~ORC.1^EQ^RE^AND~@RXD.3^GE^199711200000-0800^AND~@RXD.3^LE^199811200000-0800<br>
DSP||        GENERAL HOSPITAL - PHARMACY DEPARTMENT          DATE:09-17-99<br>
DSP||        DISPENSE HISTORY REPORT                               PAGE  1<br>
DSP||MRN          Patient Name       MEDICATION DISPENSED        DISP-DATE<br>
DSP||555444222111 Everyman,Adam      VERAPAMIL HCL 120 mg TAB   05/29/1998<br>
DSP||555444222111 Everyman,Adam      THEOPHYLLINE 80MG/15ML SOL 10/12/1998<br>
DSP||       &lt;&lt; END OF REPORT &gt;&gt;</p>

<h4>
<A NAME="Heading152"> </A></h4>


<h4>
<A NAME="Heading153">5.9.6.1 Dispense history display Conformance Statement using QSC variant</A></h4>

<p>Note
that this Conformance Statement includes no separate Output Description and
Commentary.  In conformance statements that specify an RDY response message,
the display format follows the response grammar.<br>
<center><b>Conformance Statement</b></center><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Statement ID (Query ID=Z79):
</b></p></TD>
<TD colspan=1 align="left"><p>Z79</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Type:</b></p></TD>
<TD colspan=1 align="left"><p>Query</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Name:
</b></p></TD>
<TD colspan=1 align="left"><p>Dispense
Information
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Trigger (= MSH-9):
</b></p></TD>
<TD colspan=1 align="left"><p>QBP^Z79^QBP_Q15</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Mode:
</b></p></TD>
<TD colspan=1 align="left"><p>Both</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Response
Trigger (= MSH-9):
</b></p></TD>
<TD colspan=1 align="left"><p>RDY^Z80^RSP_K15</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Characteristics:
</b></p></TD>
<TD colspan=1 align="left"><p>Selection
criteria are chosen from a Virtual Table.  May specify patient, order control
code, medication, a date range, quantity dispensed, and ordering provider.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Purpose:</b></p></TD>
<TD colspan=1 align="left"><p>To
retrieve patient pharmacy dispense history information from the Server.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Response
Characteristics:
</b></p></TD>
<TD colspan=1 align="left"><p>Returns
data formatted for screen display.  Data are sorted by Medication Dispensed
unless otherwise specified in<b> SortControl.
</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Based
on Segment Pattern:
</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
</TABLE>
<p><br>
</p>
<TABLE>
<TR align="left">
<TD colspan=1 align="left"><p><tt><b><u>QBP^Z79^QBP_Q15</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Query
Grammar:  QBS Message 
</u></b></tt></p></TD>
<TD colspan=1 align="center"><p>Section
Reference
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header Segment
</tt></p></TD>
<TD colspan=1 align="center"><p>2.16.9</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QPD</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Parameter Definition
</tt></p></TD>
<TD colspan=1 align="center"><p>5.5.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>RCP</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Response
Control Parameter
</tt></p></TD>
<TD colspan=1 align="center"><p>5.5.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="center"><p>2.16.4</p></TD>
</TR>
</TABLE>
<p><br>
</p>
<TABLE>
<TR align="left">
<TH colspan=1 align="left"><p><tt><b><u>RDY^Z80^RSP_K15</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Response
Grammar:  Dispense History
</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Group
Control
</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Comment</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Support
Indicator
</u></b></tt></p></TH>
<TH><p>Sec
Ref
</p></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.9</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSA</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Acknowledgement
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.8</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[ERR]</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Error</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QAK</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Acknowledgement
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>5.5.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QPD</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Parameter Definition
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>0</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[{
DSP }]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Display
Data
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>5.5.1</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.4</p></TD>
</TR>
</TABLE>
<p><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><tt><b>The
data will display as follows: (Query ID=Z79)
</b></tt></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>DSP||
       GENERAL HOSPITAL - PHARMACY DEPARTMENT          DATE:mm-dd-yy
</tt></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>DSP||
       DISPENSE HISTORY REPORT                               PAGE  n
</tt></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>DSP||MRN
         Patient Name       MEDICATION DISPENSED        DISP-DATE
</tt></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>DSP||XXXXX
      XXXXXx, XXXXX       XXXXXXXXXXXXXXXX              mm/dd/ccyy
</tt></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>...</tt></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>DSP||
      &lt;&lt; END OF REPORT &gt;&gt;
</tt></p></TD>
</TR>
</TABLE>
<p><b>QPD
Input Parameter Specification</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Field
Seq (Query ID=Z79)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Name</b></p></TD>
<TD colspan=1 align="left"><p><b>Key/</b><br>
<b>Search
</b></p></TD>
<TD colspan=1 align="left"><p><b>Sort</b></p></TD>
<TD colspan=1 align="left"><p><b>LEN</b></p></TD>
<TD colspan=1 align="left"><p><b>TYPE</b></p></TD>
<TD colspan=1 align="left"><p><b>Opt</b></p></TD>
<TD colspan=1 align="left"><p><b>Rep</b></p></TD>
<TD colspan=1 align="left"><p><b>Match
Op
</b></p></TD>
<TD colspan=1 align="left"><p><b>TBL</b></p></TD>
<TD colspan=1 align="left"><p><b>Segment
Field Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>Service
Identifier Code
</b></p></TD>
<TD colspan=1 align="left"><p><b>ElementName</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>1</p></TD>
<TD colspan=1 align="left"><p>MessageQueryName</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>60</p></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>R</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>2</p>
<BR></TD>
<TD colspan=1 align="left"><p>QueryTag</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>32</p></TD>
<TD colspan=1 align="left"><p>ST</p></TD>
<TD colspan=1 align="left"><p>R</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>3</p></TD>
<TD colspan=1 align="left"><p>SelectionCriteria</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><b>255</b></p></TD>
<TD colspan=1 align="left"><p><b>ST</b></p></TD>
<TD colspan=1 align="left"><p><b>R</b></p></TD>
<TD colspan=1 align="left"><p><b>Y</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
</TABLE>
<p><b>QPD
Input Parameter Field Description and Commentary</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Input
Parameter (Query ID=Z79)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Comp.
Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>DT</b></p></TD>
<TD colspan=1 align="left"><p><b>Description</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>MessageQueryName</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>Must
be valued <b>Z79^Dispense Information^HL7nnnn</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>QueryTag</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ST</p></TD>
<TD colspan=1 align="left"><p>Unique
to each query message instance.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>SelectionCriteria</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ST</p></TD>
<TD colspan=1 align="left"><p>A
query expression whose operands are derived from the "ColName" column in the
"Input/Output Specification:  Virtual Table" given below.
</p></TD>
</TR>
</TABLE>
<p><b>Input
Specification: Virtual Table</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>ColName
(Query ID=Z79)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Key/</b><br>
<b>Search
</b></p></TD>
<TD colspan=1 align="left"><p><b>Sort</b></p></TD>
<TD colspan=1 align="left"><p><b>LEN</b></p></TD>
<TD colspan=1 align="left"><p><b>TYPE</b></p></TD>
<TD colspan=1 align="left"><p><b>Opt</b></p></TD>
<TD colspan=1 align="left"><p><b>Rep</b></p></TD>
<TD colspan=1 align="left"><p><b>Match
Op
</b></p></TD>
<TD colspan=1 align="left"><p><b>TBL</b></p></TD>
<TD colspan=1 align="left"><p><b>Segment
Field Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>Service
Identifier Code
</b></p></TD>
<TD colspan=1 align="left"><p><b>ElementName</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>PatientList</p></TD>
<TD colspan=1 align="left"><p>S</p></TD>
<TD colspan=1 align="left"><p>Y</p></TD>
<TD colspan=1 align="left"><p>20</p></TD>
<TD colspan=1 align="left"><p>CX</p></TD>
<TD colspan=1 align="left"><p>O</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID.3</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID-3:
Patient  Identifier List
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>OrderControlCode</p></TD>
<TD colspan=1 align="left"><p>S</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>2</p></TD>
<TD colspan=1 align="left"><p>ID</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>0119</p></TD>
<TD colspan=1 align="left"><p>ORC.1</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ORC-1
Order Control
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>MedicationDispensed</p></TD>
<TD colspan=1 align="left"><p>S</p></TD>
<TD colspan=1 align="left"><p>Y</p></TD>
<TD colspan=1 align="left"><p>100</p></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RXD.2</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RXD-2
Dispense/Give Code
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>DispenseDate</p></TD>
<TD colspan=1 align="left"><p>S</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>26</p></TD>
<TD colspan=1 align="left"><p>TS</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RXD.3</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RXD-2
Date/Time Dispensed
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>QuantityDispensed</p></TD>
<TD colspan=1 align="left"><p>L</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>20</p></TD>
<TD colspan=1 align="left"><p>NM</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RXD.4</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>RXD-4
Actual Dispense Amount
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>OrderingProvider</p></TD>
<TD colspan=1 align="left"><p>S</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>120</p></TD>
<TD colspan=1 align="left"><p>XCN</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ORC.12</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ORC-12
Ordering Provider
</p></TD>
</TR>
</TABLE>
<p><b>Virtual
Table Field Description and Commentary</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>ColName
(Query ID=Z79)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Comp.
Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>DT</b></p></TD>
<TD colspan=1 align="left"><p><b>Description</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>PatientList</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CX</p></TD>
<TD colspan=1 align="left"><p>The
combination of values for <i>PatientList.ID, and
PatientList.AssigningAuthority,</i> are intended to identify a unique entry on
the PATIENT_MASTER table. The <i>PatientList.IdentifierTypeCode</i> is useful
for further filtering or to supply uniqueness in the event that the assigning
authority may have more than one coding system. (The PATIENT_MASTER table
contains a constraint that prevents multiple patients from being identified by
the same combination of field values.)  This PATIENT_MASTER entry will be
searched against on the PHARMACY_DISPENSE_TRANSACTION table to retrieve the
rows fulfilling the query conditions. <br><br>If this field is not valued, all
values for this field are considered to be a match.<br><br>If one PID.3 is
specified, only 1 segment pattern will be returned.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><b>ID</b></p></TD>
<TD colspan=1 align="left"><p>ID</p></TD>
<TD colspan=1 align="left"><p>If
this field, PID.3.1, is not valued, all values for this field are considered to
be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><b>Assigning
Authority
</b></p></TD>
<TD colspan=1 align="left"><p>HD</p></TD>
<TD colspan=1 align="left"><p>If
this field, PID.3.4, is not valued, all values for this field are considered to
be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><b>Identifier
type code
</b></p></TD>
<TD colspan=1 align="left"><p>IS</p></TD>
<TD colspan=1 align="left"><p>If
this field, PID.3.5, is not valued, all values for this field are considered to
be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>OrderControlCode</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ID</p></TD>
<TD colspan=1 align="left"><p>If
this field, ORC.1, is not valued, all values for this field are considered to
be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>MedicationDispensed</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>If
this field, RXD.2, is not valued, all values for this field are considered to
be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>DispenseDate</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>TS</p></TD>
<TD colspan=1 align="left"><p>If
this field, RXD.3, is not valued, all values for this field are considered to
be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>QuantityDispensed</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>NM</p></TD>
<TD colspan=1 align="left"><p>If
this field, RXD.4, is not valued, all values for this field are considered to
be a match.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>OrderingProvider</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>XCN</p></TD>
<TD colspan=1 align="left"><p>If
this field, ORC.12, is not valued, all values for this field are considered to
be a match.
</p></TD>
</TR>
</TABLE>
<p><b>RCP
Response Control Parameter Field Description and Commentary</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Field
Seq (Query ID=Z79)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Name</b></p></TD>
<TD colspan=1 align="left"><p><b>Component
Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>LEN</b></p></TD>
<TD colspan=1 align="left"><p><b>DT</b></p></TD>
<TD colspan=1 align="left"><p><b>Description</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>1</p></TD>
<TD colspan=1 align="left"><p>Query
Priority
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>1</p></TD>
<TD colspan=1 align="left"><p>ID</p></TD>
<TD colspan=1 align="left"><p>(<b>D</b>)eferred
or (<b>I</b>)mmediate.  Default is <b>I</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>2</p></TD>
<TD colspan=1 align="left"><p>Quantity
Limited Request
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>10</p></TD>
<TD colspan=1 align="left"><p>CQ</p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Quantity</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>NM</p></TD>
<TD colspan=1 align="left"><p>Number
of units (specified by the following component) that will be returned in each
increment of the response.  If no value is given, the entire response will be
returned in a single increment.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Units</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p><b>CH</b>aracters,
<b>LI</b>nes, <b>P</b>a<b>G</b>es, or <b>R</b>ecor<b>D</b>s.  Default is
<b>LI</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>3</p></TD>
<TD colspan=1 align="left"><p>Response
Modality
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>60</p></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p><b>R</b>eal
time or <b>B</b>atch.  Default is <b>R</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>6</p></TD>
<TD colspan=1 align="left"><p>Sort-by
Field
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>256</p></TD>
<TD colspan=1 align="left"><p>SRT</p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Sort-by
Field
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ST</p></TD>
<TD colspan=1 align="left"><p>Segment
field name of an output column by which the response may be sorted.  Must
contain a <b>Y</b> in the Sort column of the output specification table.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Sequencing</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ID</p></TD>
<TD colspan=1 align="left"><p>As
specified in HL7 Table 0397- Sequencing.  Default is <b>A</b>scending.
</p></TD>
</TR>
</TABLE>
<h3>
<A NAME="Heading154">5.9.7 Query by example (QBP) / tabular response (RTB)</A></h3>

<p>This
section demonstrates how to use a different syntax for passing query parameters
to the query server.   This syntactic variant is called "query by example"
because, instead of passing query parameter as fields of the QBP segment, they
are passed as fields of existing HL7 segments.  Nevertheless, the query
conformance statement will clearly specify which fields of the HL7 segment can
carry useful values.  Note that both the QBP syntax and the "query by example"
syntax have the same expressive power.  Also note that when segments are used
in the "query by example" variant, the required/optional characteristics of
each field should be defined in the conformance statement, and that field
optionality in queries may be different from the usual optionality of the
segment when used in other HL7 messages. <br>
This sample shows how the "query by example" might be used to find a list of
candidates matching a set of demographics.  Because demographic data is
naturally carried by the existing PID segment, the message designer may, for
stylistic or practical reasons, decide to pass the demographic parameters such
as patient name or patient age in a PID segment.<br>
The Client wishes to see a list of patients whose demographics are as
follows:<br>
Last Name:	Thomas<br>First Name:	Gregory<br>Sex:		Male<br>DOB:		12/11/48<br>
The Client wishes to do this using the peekaboo algorithm with an 80%
confidence level.<br>
MSH|^&amp;~\|PCR|GenHosp|MPI||199811201400-0800||QBP^Z77^QBP_Q13|8699|P|2.4||||||||<br>
QPD|Z77^find_candidates^HL7nnnn|Q0001|peekaboo|80|<br>
PID|||||Thomas&amp;Gregory||19481211|M<br>
RCP|I|25^RD|<br>
RDF|PatientList^CX^20~PatientName^XPN^48~Mother'sMaidenName^XPN^48~DOB^TS^26~Sex^IS^1~Race^CE^80|<br>
The MPI system returns the following RTB message<br>
<b>MSH</b>|^&amp;~\|MPI|GenHosp|PCR||199811201400-0800||RTB^Z78^RTB_R13|8699|P|2.4||||||||<br>
<b>MSA</b>|AA|8699|<br>
<b>QAK</b>|<br>
<b>QPD</b>|Z77^find_candidates^HL7nnnn|Q0001|peekaboo|80|<br>
<b>RDF</b>|PatientList^CX^20~PatientName^XPN^48~Mother'sMaidenName^XPN^48~DOB^TS^26~Sex^IS^1~Race^CE^80|<br>
<b>RDT</b>|555444222111^^^MPI&amp;KP.NCA&amp;L^MR|Thomas^Gregory||19481211|M||</p>

<h4>
<A NAME="Heading155"> </A></h4>


<h4>
<A NAME="Heading156">5.9.7.1 MPI Conformance Statement using QBE variant</A></h4>

<p><center><b>Conformance
Statement</b></center><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Statement ID (Query ID=Z77):
</b></p></TD>
<TD colspan=1 align="left"><p>Z77</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Type:</b></p></TD>
<TD colspan=1 align="left"><p>Query</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Name:
</b></p></TD>
<TD colspan=1 align="left"><p>Tabular
Patient List
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Trigger (= MSH-9):
</b></p></TD>
<TD colspan=1 align="left"><p>QBP^Z77^QBP_Q13</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Mode:
</b></p></TD>
<TD colspan=1 align="left"><p>Both</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Response
Trigger (= MSH-9):
</b></p></TD>
<TD colspan=1 align="left"><p>RTB^Z78^RTB_K13</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Characteristics:
</b></p></TD>
<TD colspan=1 align="left"><p>Query
By Example:  passes algorithm data via QBP segment and patient match
information via PID segment.<br>
Only PID fields listed in the QBE Input Parameter Specification may be
populated to be matched against.  Fields not populated will be considered as
matching all returned records.<br>
Output columns are chosen from a Virtual Table.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Purpose:</b></p></TD>
<TD colspan=1 align="left"><p>To
find patient records that closely (as specified by the Client) match a set of
input criteria using a specified algorithm.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Response
Characteristics:
</b></p></TD>
<TD colspan=1 align="left"><p>Response
returns requested columns from the Virtual Table.  If no columns were
requested, all columns are returned.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Based
on Segment Pattern:
</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
</TABLE>
<p><br>
</p>
<TABLE>
<TR align="left">
<TD colspan=1 align="left"><p><tt><b><u>QBP^Z77^QBP_Q13</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Query
Grammar:  QBP Message 
</u></b></tt></p></TD>
<TD colspan=1 align="center"><p>Section
Reference
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header Segment
</tt></p></TD>
<TD colspan=1 align="center"><p>2.16.9</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QPD</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Parameter Definition
</tt></p></TD>
<TD colspan=1 align="center"><p>0</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>PID</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Patient
Identification Segment
</tt></p></TD>
<TD colspan=1 align="center"><p>3.4.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>RCP</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Response
Control Parameter
</tt></p></TD>
<TD colspan=1 align="center"><p>5.5.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
RDF ]
</tt></p>
<BR></TD>
<TD colspan=1 align="left"><p><tt>Table
Row Definition Segment
</tt></p></TD>
<TD colspan=1 align="center"><p>5.5.6</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="center"><p>2.16.4</p></TD>
</TR>
</TABLE>
<p><br>
</p>
<TABLE>
<TR align="left">
<TD colspan=1 align="left"><p><tt><b><u>RTB^Z78^RTB_K13</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Response
Grammar:<br>Who Am I
</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Comment</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Support
Indicator
</u></b></tt></p></TD>
<TD colspan=1 align="center"><p>Sec
Ref
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.9</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSA</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Acknowledgement
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.8</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[ERR]</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Error</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QAK</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Acknowledgement
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>5.5.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QPD</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Parameter Definition
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>5.5.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
RDF
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Table
Row Definition Segment
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>5.5.6</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 [{ RDT }]]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Table
Row Data Segment
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>5.5.7</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.4</p></TD>
</TR>
</TABLE>
<p><b>QPD
Input Parameter Specification</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Field
Seq (Query ID=Z77)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>Key/</b><br>
<b>Search
</b></p></TD>
<TD colspan=1 align="left"><p><b>Sort</b></p></TD>
<TD colspan=1 align="left"><p><b>LEN</b></p></TD>
<TD colspan=1 align="left"><p><b>TYPE</b></p></TD>
<TD colspan=1 align="left"><p><b>Opt</b></p></TD>
<TD colspan=1 align="left"><p><b>Rep</b></p></TD>
<TD colspan=1 align="left"><p><b>Match
Op
</b></p></TD>
<TD colspan=1 align="left"><p><b>TBL</b></p></TD>
<TD colspan=1 align="left"><p><b>Segment
Field Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>Service
Identifier Code
</b></p></TD>
<TD colspan=1 align="left"><p><b>ElementName</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>1</p></TD>
<TD colspan=1 align="left"><p>MessageQueryName</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>60</p></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>R</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Message
Query Name
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>2</p></TD>
<TD colspan=1 align="left"><p>QueryTag</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>32</p></TD>
<TD colspan=1 align="left"><p>ST</p></TD>
<TD colspan=1 align="left"><p>R</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Query
Tag
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>3</p></TD>
<TD colspan=1 align="left"><p>Algorithm</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><b>48</b></p></TD>
<TD colspan=1 align="left"><p><b>ST</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Algorithm</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>4</p></TD>
<TD colspan=1 align="left"><p>ConfidenceLevel</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>8</p></TD>
<TD colspan=1 align="left"><p>NM</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Confidence
Level
</p></TD>
</TR>
</TABLE>
<p><b>QPD
Input Parameter Field Description and Commentary</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Input
Parameter (Query ID=Z77)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Comp.
Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>DT</b></p></TD>
<TD colspan=1 align="left"><p><b>Description</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>MessageQueryName</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>Must
be valued <b>Z77^Tabular Patient List^HL7nnnn</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>QueryTag</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ST</p></TD>
<TD colspan=1 align="left"><p>Unique
to each query message instance.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Algorithm</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ST</p></TD>
<TD colspan=1 align="left"><p>The
name of the search algorithm that is used to look up the parameter values
specified in the PID segment.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>ConfidenceLevel</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>NM</p></TD>
<TD colspan=1 align="left"><p>The
degree of accuracy that the search algorithm must achieve in order to score a
"hit."
</p></TD>
</TR>
</TABLE>
<p><b>QBE
Input Parameter Specification</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Segment
Field Name (Query ID=Z77)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Name</b></p></TD>
<TD colspan=1 align="left"><p><b>Key/</b><br>
<b>Search
</b></p></TD>
<TD colspan=1 align="left"><p><b>Sort</b></p></TD>
<TD colspan=1 align="left"><p><b>LEN</b></p></TD>
<TD colspan=1 align="left"><p><b>TYPE</b></p></TD>
<TD colspan=1 align="left"><p><b>Opt</b></p></TD>
<TD colspan=1 align="left"><p><b>Rep</b></p></TD>
<TD colspan=1 align="left"><p><b>Match
Op
</b></p></TD>
<TD colspan=1 align="left"><p><b>TBL</b></p></TD>
<TD colspan=1 align="left"><p><b>Service
Identifier Code
</b></p></TD>
<TD colspan=1 align="left"><p><b>ElementName</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>PID.5</p></TD>
<TD colspan=1 align="left"><p>PatientName</p></TD>
<TD colspan=1 align="left"><p><b>S</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>48</p></TD>
<TD colspan=1 align="left"><p>XPN</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID-5-Patient
Name
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>PID.7</p></TD>
<TD colspan=1 align="left"><p>DOB</p></TD>
<TD colspan=1 align="left"><p><b>S</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>26</p></TD>
<TD colspan=1 align="left"><p>TS</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID-7-Date/time
of Birth
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>PID.8</p></TD>
<TD colspan=1 align="left"><p>Sex</p></TD>
<TD colspan=1 align="left"><p>S</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>1</p></TD>
<TD colspan=1 align="left"><p>IS</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID-8-Sex</p></TD>
</TR>
</TABLE>
<p><b>QBE
Input Parameter Field Description and Commentary</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Input
Parameter (Query ID=Z77)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Comp.
Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>DT</b></p></TD>
<TD colspan=1 align="left"><p><b>Description</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>PatientName</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>XPN</p></TD>
<TD colspan=1 align="left"><p>Name
of the patient.  May be specified in full or in part.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>DOB</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>TS</p></TD>
<TD colspan=1 align="left"><p>Date
and time of the patient's birth.  Year, month, and day must be specified; time
is optional.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Sex</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>IS</p></TD>
<TD colspan=1 align="left"><p>Administrative
gender of the patient.
</p></TD>
</TR>
</TABLE>
<p><b>RCP
Response Control Parameter Field Description and Commentary</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Field
Seq (Query ID=Z77)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Name</b></p></TD>
<TD colspan=1 align="left"><p><b>Component
Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>LEN</b></p></TD>
<TD colspan=1 align="left"><p><b>DT</b></p></TD>
<TD colspan=1 align="left"><p><b>Description</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>1</p></TD>
<TD colspan=1 align="left"><p>Query
Priority
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>1</p></TD>
<TD colspan=1 align="left"><p>ID</p></TD>
<TD colspan=1 align="left"><p>(<b>D</b>)eferred
or (<b>I</b>)mmediate.  Default is <b>I</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>2</p></TD>
<TD colspan=1 align="left"><p>Quantity
Limited Request
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>10</p></TD>
<TD colspan=1 align="left"><p>CQ</p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Quantity</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>NM</p></TD>
<TD colspan=1 align="left"><p>Number
of units (specified by the following component) that will be returned in each
increment of the response.  If no value is given, the entire response will be
returned in a single increment.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Units</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p><b>CH</b>aracters,
<b>LI</b>nes, <b>P</b>a<b>G</b>es, or <b>R</b>ecor<b>D</b>s.  Default is
<b>LI</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>3</p></TD>
<TD colspan=1 align="left"><p>Response
Modality
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>60</p></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p><b>R</b>eal
time or <b>B</b>atch.  Default is <b>R</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>6</p></TD>
<TD colspan=1 align="left"><p>Sort-by
Field
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>256</p></TD>
<TD colspan=1 align="left"><p>SRT</p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Sort-by
Field
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ST</p></TD>
<TD colspan=1 align="left"><p>Segment
field name of an output column by which the response may be sorted.  Must
contain a <b>Y</b> in the Sort column of the output specification table.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Sequencing</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ID</p></TD>
<TD colspan=1 align="left"><p>As
specified in HL7 Table 0397- Sequencing.  Default is <b>A</b>scending.
</p></TD>
</TR>
</TABLE>
<p><b>Output
Specification and Commentary: Virtual Table</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>ColName
(Query ID=Z77)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Key/</b><br>
<b>Search
</b></p></TD>
<TD colspan=1 align="left"><p><b>Sort</b></p></TD>
<TD colspan=1 align="left"><p><b>LEN</b></p></TD>
<TD colspan=1 align="left"><p><b>TYPE</b></p></TD>
<TD colspan=1 align="left"><p><b>Opt</b></p></TD>
<TD colspan=1 align="left"><p><b>Rep</b></p></TD>
<TD colspan=1 align="left"><p><b>Match
Op
</b></p></TD>
<TD colspan=1 align="left"><p><b>TBL</b></p></TD>
<TD colspan=1 align="left"><p><b>Segment
Field Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>Service
Identifier Code
</b></p></TD>
<TD colspan=1 align="left"><p><b>ElementName</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>PatientList</p></TD>
<TD colspan=1 align="left"><p><b>S</b></p></TD>
<TD colspan=1 align="left"><p><b>Y</b></p></TD>
<TD colspan=1 align="left"><p><b>20</b></p></TD>
<TD colspan=1 align="left"><p><b>CX</b></p></TD>
<TD colspan=1 align="left"><p><b>O</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID.3</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID-3
Patient  Identifier List
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>PatientName</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>48</p></TD>
<TD colspan=1 align="left"><p>XPN</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID.5</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID-5
Patient Name
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>MothersMaidenName</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>48</p></TD>
<TD colspan=1 align="left"><p>XPN</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID.6</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID-6
Mother's Maiden Name
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>DOB</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>26</p></TD>
<TD colspan=1 align="left"><p>TS</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID.7</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID-7
Date/Time of Birth
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Sex</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>1</p></TD>
<TD colspan=1 align="left"><p>IS</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID.8</p>
<BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID-8
Sex
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Race</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>80</p></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID.10</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID-10
Race
</p></TD>
</TR>
</TABLE>
<p>The
same query as described above could be sent as a pure Query By Parameter query,
without the "query by example" variant, as follows.<br>
Notice that the query uses only a single QPD segment to carry all the
parameters.  The response to the query is the same as for the "query by
example" variant above.<br>
Example: the Client wishes to do this using the peekaboo algorithm with an 80%
confidence level.<br>
MSH|^&amp;~\|PCR|GenHosp|MPI||199811201400-0800||QBP^Z75^QBP_Q13|8699|P|2.4||||||||<br>
QPD|Z75^find_candidates^HL7nnnn|Q0001|peekaboo|80|Thomas^Gregory|19481211|M<br>
RDF|PatientList^CX^20~PatientName^XPN^48~Mother'sMaidenName^XPN^48~DOB^TS^26~Sex^IS^1~Race^CE^80|<br>
The MPI system returns the following RTB message<br>
<b>MSH</b>|^&amp;~\|MPI|GenHosp|PCR||199811201400-0800||RTB^Z76^RTB_R13|8699|P|2.4||||||||<br>
<b>MSA</b>|AA|8699|<br>
<b>QAK</b>|<br>
QPD|Z75^find_candidates^HL7nnnn|Q0001|peekaboo|80|Thomas^Gregory|19481211|M<br>
<b>RDF</b>|PatientList^CX^20~PatientName^XPN^48~Mother'sMaidenName^XPN^48~DOB^TS^26~Sex^IS^1~Race^CE^80|<br>
<b>RDT</b>|555444222111^^^MPI&amp;KP.NCA&amp;L^MR|<tt>
Thomas^Gregory</tt>|<tt>19481211</tt>|M||
</p>

<h4>
<A NAME="Heading157">5.9.7.2 MPI Conformance Statement - Non query by example version</A></h4>

<p><center><b>Conformance
Statement</b></center><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Statement ID (Query ID=Z75):
</b></p></TD>
<TD colspan=1 align="left"><p>Z75</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Type:</b></p></TD>
<TD colspan=1 align="left"><p>Query</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Name:
</b></p></TD>
<TD colspan=1 align="left"><p>Tabular
Patient List
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Trigger (= MSH-9):
</b></p></TD>
<TD colspan=1 align="left"><p>QBP^Z75^QBP_Q13</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Mode:
</b></p></TD>
<TD colspan=1 align="left"><p>Both</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Response
Trigger (= MSH-9):
</b></p></TD>
<TD colspan=1 align="left"><p>RTB^Z76^RTB_K13</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Query
Characteristics:
</b></p></TD>
<TD colspan=1 align="left"><p>Patient
identifier and matching algorithm requirements are passed via the input
parameters.  Output columns are chosen from a Virtual Table.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Purpose:</b></p></TD>
<TD colspan=1 align="left"><p>To
find patient records that closely (as specified by the Client) match a set of
input criteria using a specified algorithm.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Response
Characteristics:
</b></p></TD>
<TD colspan=1 align="left"><p>Response
returns requested columns from the Virtual Table.  If no columns were
requested, all columns are returned.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><b>Based
on Segment Pattern:
</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
</TABLE>
<p><br>
</p>
<TABLE>
<TR align="left">
<TD colspan=1 align="left"><p><tt><b><u>QBP^Z75^QBP_Q13</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Query
Grammar:  QBP Message 
</u></b></tt></p></TD>
<TD colspan=1 align="center"><p>Section
Reference
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header Segment
</tt></p></TD>
<TD colspan=1 align="center"><p>2.16.9</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QPD</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Parameter Definition
</tt></p></TD>
<TD colspan=1 align="center"><p>0</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>RCP</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Response
Control Parameter
</tt></p></TD>
<TD colspan=1 align="center"><p>5.5.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
RDF ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Table
Row Definition Segment
</tt></p></TD>
<TD colspan=1 align="center"><p>5.5.6</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="center"><p>2.16.4</p></TD>
</TR>
</TABLE>
<p><br>
</p>
<TABLE>
<TR align="left">
<TD colspan=1 align="left"><p><tt><b><u>RTB^Z76^RTB_K13</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Response
Grammar:<br>Who Am I
</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Comment</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Support
Indicator
</u></b></tt></p></TD>
<TD colspan=1 align="center"><p>Sec
Ref
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.9</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSA</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Acknowledgement
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.8</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[ERR]</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Error</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QAK</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Acknowledgement
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>5.5.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>QPD</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Parameter Definition
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>5.5.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
RDF
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Table
Row Definition Segment
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>5.5.6</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
 [{ RDT }]]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Table
Row Data Segment
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>5.5.7</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><p>2.16.4</p></TD>
</TR>
</TABLE>
<p><b>QPD
Input Parameter Specification</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Field
Seq (Query ID=Z75)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Name</b></p></TD>
<TD colspan=1 align="left"><p><b>Key/</b><br>
<b>Search
</b></p></TD>
<TD colspan=1 align="left"><p><b>Sort</b></p></TD>
<TD colspan=1 align="left"><p><b>LEN</b></p></TD>
<TD colspan=1 align="left"><p><b>TYPE</b></p></TD>
<TD colspan=1 align="left"><p><b>Opt</b></p></TD>
<TD colspan=1 align="left"><p><b>Rep</b></p></TD>
<TD colspan=1 align="left"><p><b>Match
Op
</b></p></TD>
<TD colspan=1 align="left"><p><b>TBL</b></p></TD>
<TD colspan=1 align="left"><p><b>Segment
Field Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>Service
Identifier Code
</b></p></TD>
<TD colspan=1 align="left"><p><b>ElementName</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>1</p></TD>
<TD colspan=1 align="left"><p>MessageQueryName</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>60</p></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>R</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Message
Query Name
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>2</p></TD>
<TD colspan=1 align="left"><p>QueryTag</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>32</p></TD>
<TD colspan=1 align="left"><p>ST</p></TD>
<TD colspan=1 align="left"><p>R</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Query
Tag
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>3</p></TD>
<TD colspan=1 align="left"><p>Algorithm</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><b>48</b></p></TD>
<TD colspan=1 align="left"><p><b>ST</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Algorithm</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>4</p></TD>
<TD colspan=1 align="left"><p>ConfidenceLevel</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>8</p></TD>
<TD colspan=1 align="left"><p>NM</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Confidence
Level
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>5</p></TD>
<TD colspan=1 align="left"><p>PatientName</p></TD>
<TD colspan=1 align="left"><p>S</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>48</p></TD>
<TD colspan=1 align="left"><p>XPN</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID.5</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID-5-Patient
Name
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>6</p></TD>
<TD colspan=1 align="left"><p>DOB</p></TD>
<TD colspan=1 align="left"><p>S</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>26</p></TD>
<TD colspan=1 align="left"><p>TS</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID.7</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID-7-Date/Time
of Birth
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>7</p></TD>
<TD colspan=1 align="left"><p>Sex</p></TD>
<TD colspan=1 align="left"><p>S</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>1</p></TD>
<TD colspan=1 align="left"><p>IS</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID.8</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID-8-Sex</p></TD>
</TR>
</TABLE>
<p><b>QPD
Input Parameter Field Description and Commentary</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Input
Parameter (Query ID=Z75)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Comp.
Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>DT</b></p></TD>
<TD colspan=1 align="left"><p><b>Description</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>MessageQueryName</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p>Must
be valued <b>Z75^Tabular Patient List^HL7nnnn</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>QueryTag</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ST</p></TD>
<TD colspan=1 align="left"><p>Unique
to each query message instance.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Algorithm</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ST</p></TD>
<TD colspan=1 align="left"><p>The
name of the search algorithm that is used to look up the parameter values
specified in the PID segment.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>ConfidenceLevel</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>NM</p></TD>
<TD colspan=1 align="left"><p>The
degree of accuracy that the search algorithm must achieve in order to score a
"hit."
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>PatientName</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>XPN</p></TD>
<TD colspan=1 align="left"><p>Name
of the patient.  May be specified in full or in part.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>DOB</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>TS</p></TD>
<TD colspan=1 align="left"><p>Date
and time of the patient's birth.  Year, month, and day must be specified; time
is optional.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Sex</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>IS</p></TD>
<TD colspan=1 align="left"><p>Administrative
gender of the patient.
</p></TD>
</TR>
</TABLE>
<p><b>RCP
Response Control Parameter Field Description and Commentary</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>Field
Seq (Query ID=Z75)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Name</b></p></TD>
<TD colspan=1 align="left"><p><b>Component
Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>LEN</b></p></TD>
<TD colspan=1 align="left"><p><b>DT</b></p></TD>
<TD colspan=1 align="left"><p><b>Description</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>1</p></TD>
<TD colspan=1 align="left"><p>Query
Priority
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>1</p></TD>
<TD colspan=1 align="left"><p>ID</p></TD>
<TD colspan=1 align="left"><p>(<b>D</b>)eferred
or (<b>I</b>)mmediate.  Default is <b>I</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>2</p></TD>
<TD colspan=1 align="left"><p>Quantity
Limited Request
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>10</p></TD>
<TD colspan=1 align="left"><p>CQ</p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Quantity</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>NM</p></TD>
<TD colspan=1 align="left"><p>Number
of units (specified by the following component) that will be returned in each
increment of the response.  If no value is given, the entire response will be
returned in a single increment.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Units</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p><b>CH</b>aracters,
<b>LI</b>nes, <b>P</b>a<b>G</b>es, or <b>R</b>ecor<b>D</b>s.  Default is
<b>LI</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>3</p></TD>
<TD colspan=1 align="left"><p>Response
Modality
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>60</p></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><p><b>R</b>eal
time or <b>B</b>atch.  Default is <b>R</b>.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>6</p></TD>
<TD colspan=1 align="left"><p>Sort-by
Field
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>256</p></TD>
<TD colspan=1 align="left"><p>SRT</p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Sort-by
Field
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ST</p></TD>
<TD colspan=1 align="left"><p>Segment
field name of an output column by which the response may be sorted.  Must
contain a <b>Y</b> in the Sort column of the output specification table.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Sequencing</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>ID</p></TD>
<TD colspan=1 align="left"><p>As
specified in HL7 Table 0397- Sequencing.  Default is <b>A</b>scending.
</p></TD>
</TR>
</TABLE>
<p><b>Output
Specification and Commentary: Virtual Table</b><br>
</p>
<TABLE BORDER>
<TR align="left">
<TD colspan=1 align="left"><p><b>ColName
(Query ID=Z75)
</b></p></TD>
<TD colspan=1 align="left"><p><b>Key/</b><br>
<b>Search
</b></p></TD>
<TD colspan=1 align="left"><p><b>Sort</b></p></TD>
<TD colspan=1 align="left"><p><b>LEN</b></p></TD>
<TD colspan=1 align="left"><p><b>TYPE</b></p></TD>
<TD colspan=1 align="left"><p><b>Opt</b></p></TD>
<TD colspan=1 align="left"><p><b>Rep</b></p></TD>
<TD colspan=1 align="left"><p><b>Match
Op
</b></p></TD>
<TD colspan=1 align="left"><p><b>TBL</b></p></TD>
<TD colspan=1 align="left"><p><b>Segment
Field Name
</b></p></TD>
<TD colspan=1 align="left"><p><b>Service
Identifier Code
</b></p></TD>
<TD colspan=1 align="left"><p><b>ElementName</b></p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>PatientList</p></TD>
<TD colspan=1 align="left"><p><b>S</b></p></TD>
<TD colspan=1 align="left"><p><b>Y</b></p></TD>
<TD colspan=1 align="left"><p><b>20</b></p></TD>
<TD colspan=1 align="left"><p><b>CX</b></p></TD>
<TD colspan=1 align="left"><p><b>O</b></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID.3</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID-3
Patient  Identifier List
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>PatientName</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>48</p></TD>
<TD colspan=1 align="left"><p>XPN</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID.5</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID-5
Patient Name
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>MothersMaidenName</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>48</p></TD>
<TD colspan=1 align="left"><p>XPN</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID.6</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID-6
Mother's Maiden Name
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>DOB</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>26</p></TD>
<TD colspan=1 align="left"><p>TS</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID.7</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID-7
Date/Time of Birth
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Sex</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>1</p></TD>
<TD colspan=1 align="left"><p>IS</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID.8</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID-8
Sex
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>Race</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>80</p></TD>
<TD colspan=1 align="left"><p>CE</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID.10</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>PID-10
Race
</p></TD>
</TR>
</TABLE>
<h2>
<A NAME="Heading158">5.10 SUPERCEDED QUERY/RESPONSE TRIGGER EVENTS AND MESSAGE PAIRS</A></h2>

<p><b>If
the reader is defining a new query, please refer to the new recommended
query/response pairs defined in section 5.3. This section is retained for
backward compatibility and the framework for the existing functional queries.
</b></p>

<h3>
<A NAME="Heading159">5.10.1 Display message</A></h3>

<p><b>The
UDM message does not have a direct replacement in the new methodology. It is
not clear how extensively this message is used.</b></p>

<h4>
<A NAME="Heading160"> </A></h4>


<h4>
<A NAME="Heading161">5.10.1.1 Display vs. record-oriented messages</A></h4>


<h4>
<A NAME="Heading162">5.10.1.2 UDM/ACK - unsolicited display update message (event Q05)  </A></h4>

<p>There
is a simple HL7 message that allows for unsolicited display update messages to
be sent in HL7 format from one system to another.<br>
Trigger events for the unsolicited update are generally the completion of a
particular action (concerning a given patient).  For example, a lab test might
be completed, generating a STAT unsolicited display message to be sent to the
appropriate location<br>
</p>
<TABLE>
<TR align="left">
<TH colspan=1 align="left"><p><tt><b><u>UDM^Q05</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Unsolicited
Display Message
</u></b></tt></p></TH>
<TH><p>Chapter</p></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt><u>URD</u></tt></p></TD>
<TD colspan=1 align="left"><p><tt>Results/Update
Definition
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
<u>URS</u> ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Results/Update
Selection Criteria
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
        {  <u>DSP</u>  }
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Display
Data
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
</TABLE>
<p><br>
</p>
<TABLE>
<TR align="left">
<TH colspan=1 align="left"><p><tt><b><u>ACK^Q05</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>General
Acknowledgment
</u></b></tt></p></TH>
<TH><p>Chapter</p></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSA</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Acknowledgment
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
ERR ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Error</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
</TABLE>
<h4>
<A NAME="Heading163">5.10.1.3 Continuation of unsolicited display update message</A></h4>

<p>Like
other types of HL7 messages, the UDM message can be continued by use of the DSC
segment and <i>MSH-14-Continuation pointer</i>.  Thus if a UDM needs to be
continued as three separate UDM messages, the first message would contain:<br>
</p>
<TABLE>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>(no
continuation pointer)
</tt></p></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>URD</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[URS]</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>{DSP}</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>DSC</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
</TABLE>
<p>The
second message would contain:<br>
</p>
<TABLE>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>(continuation
pointer (to first message))
</tt></p></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>{DSP}</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>DSC</tt></p></TD>
<TD colspan=1 align="left"><p><tt>(with
continuation pointer)
</tt></p></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
</TABLE>
<p>The
last message would then contain:<br>
</p>
<TABLE>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>(cont8inuation
pointer (to second message))
</tt></p></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>{DSP}</tt></p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
</TABLE>
<p><br>
<b>Note:</b> 	This scheme works equally well with non-display messages, such as
the Unsolicited Update ORU message (see Chapter 7).<br>
Since these are unsolicited messages, intervening messages (from other systems)
may be sent to the receiving application while the sections of the particular
message are being continued.  <i>MSH-14-Continuation pointer</i> enables the
receiving system to keep track of extraneous intervening messages.
</p>

<h3>
<A NAME="Heading164">5.10.2 Original mode queries</A></h3>

<p>If
the reader is defining a new query, please refer to the new recommended
query/response pairs defined in section 5.3.3.4. This section is retained for
backward compatibility and the framework for the existing functional
queries.<br>
<b>Original mode implementation considerations</b><br>
e)	The particular allowable values for the filters in the QRD and QRF segments
are determined among cooperating applications during implementation.<br>
f)	The format chosen for the query segments is very general.  This might be
read by prospective  implementers to imply that the requirement for using the
Standard is the ability to respond to a wide variety of inquiries.  This is not
the intent.  The format here can be used with specific restrictions in any
interface.
</p>

<h4>
<A NAME="Heading165"> </A></h4>


<h4>
<A NAME="Heading166">5.10.2.1 QRY/DSR - original mode display query -  immediate response (event Q01) </A></h4>

<TABLE>
<TR align="left">
<TH colspan=1 align="left"><p><tt><b><u>QRY^Q01</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Query
Message
</u></b></tt></p></TH>
<TH><p>Chapter</p></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt><u>QRD</u></tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Definition
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
<u>QRF</u> ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Filter
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
</TABLE>
<p><br>
</p>
<TABLE>
<TR align="left">
<TH colspan=1 align="left"><p><tt><b><u>DSR^Q01</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Display
Response Message
</u></b></tt></p></TH>
<TH><p>Chapter</p></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSA</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Acknowledgment
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
ERR ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Error</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
<u>QAK</u> ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Acknowledgment
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt><u>QRD</u></tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Definition
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
<u>QRF</u> ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Filter
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>{
<u>DSP</u> }
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Display
Data
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
</TABLE>
<p>The
QRF and QRD segments from the QRY are echoed back in the response.  The DSC
segment contains the continuation pointer, if it is not null
(<i>DSC-1-Continuation pointer</i>).
</p>

<h5>
<A NAME="Heading167">5.10.2.1.1 Original mode display query variants</A></h5>

<p>If
a display query has more than a single type of response (i.e., a DSR message
with a different meaning, requiring different processing on the querying
system), the second component of the Message Type field of the MSH segment may
be used to indicate the response event type.  For example, an ancillary name
search display query may be defined using the query event code of DNM.  The
display response to such a query may be either a list of name matches (response
event type is DNM) or the ancillary's display results for an exact match to the
name query (response event type is NRS).  See<i> HL7 Table 0003 - Event type
code</i> and field notes for <i>MSH-9-Message type</i>.
</p>

<h3>
<A NAME="Heading168">5.10.3 Original mode deferred access</A></h3>

<p>For
clarity, A is the system initiating the query and B is the system sending the
responses.  Multiple queries and responses are permitted within single
messages.  The responses to a given query may be broken into several separate
DSR messages.  A single DSR message may contain responses to more than one QRY.
</p>

<h4>
<A NAME="Heading169"> </A></h4>


<h4>
<A NAME="Heading170">5.10.3.1 QRY/QCK - deferred query (event Q02) </A></h4>

<p>For
clarity, A is the system initiating the query and B is the system sending the
responses.  Multiple queries and responses are permitted within single
messages.  The responses to a given query may be broken into several separate
DSR messages.  A single DSR message may contain responses to more than one
QRY.<br>
</p>
<TABLE>
<TR align="left">
<TH colspan=1 align="left"><p><tt><b><u>QRY^Q02
(A to B)
</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Query
Message
</u></b></tt></p></TH>
<TH><p>Chapter</p></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt><u>QRD</u></tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Definition
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
<u>QRF</u> ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Filter
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
</TABLE>
<p><br>
</p>
<TABLE>
<TR align="left">
<TH colspan=1 align="left"><p><tt><b><u>QCK^Q02
(B to A)
</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Query
General Acknowledgment
</u></b></tt></p></TH>
<TH><p>Chapter</p></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSA</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
acknowledgment
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
ERR ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Error</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
<u>QAK</u> ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Acknowledgment
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
</TABLE>
<h4>
<A NAME="Heading171">5.10.3.2 DSR/ACK - deferred response to a query (event Q03) </A></h4>

<p>Later,
perhaps more than once.<br>
</p>
<TABLE>
<TR align="left">
<TH colspan=1 align="left"><p><tt><b><u>DSR^Q03</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Display
Response Message
</u></b></tt></p></TH>
<TH><p>Chapter</p></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[MSA]</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Acknowledgment
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
ERR ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Error</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
<u>QAK</u> ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Acknowledgment
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt><u>QRD</u></tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Definition
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
<u>QRF</u> ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Filter
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>{
<u>DSP</u> }
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Display
Data
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
</TABLE>
<p><br>
</p>
<TABLE>
<TR align="left">
<TH colspan=1 align="left"><p><tt><b><u>ACK^Q03
(A to B)
</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>General
Acknowledgment
</u></b></tt></p></TH>
<TH><p>Chapter</p></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSA</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Acknowledgment
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
ERR ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Error</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
</TABLE>
<p><b>Note:</b>
All record-oriented original mode and all enhanced mode queries follow the
immediate and deferred acknowledgment modes defined in Section 5.10.3.0.
</p>

<h3>
<A NAME="Heading172">5.10.4 Enhanced mode queries</A></h3>

<p>Version
2.3 introduced 4 enhanced queries as follows:<br>
*	An Embedded Query Language query, which supports free-form select statements,
based on the query language of choice (e.g., SQL)<br>
*	a Virtual Table request query which supports queries against Server database
tables (virtual or actual) based on specific selection criteria<br>
*	a stored procedure request, which enables an application on one system to
execute a stored procedure on another system, which is coded to extract
specific data<br>
*	an event replay request message, which is used to request data formatted as
an event replay response<br>
</p>
<TABLE BORDER>
<TR align="center">
<TH><p><b>Code</b></p></TH>
<TH><p><b>Query
Name
</b></p></TH>
<TH><p><b>Defining
Segment
</b></p></TH>
<TH><p><b>Explanation</b></p></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>EQQ
</p></TD>
<TD colspan=1 align="left"><p>Embedded
Query language Query
</p></TD>
<TD colspan=1 align="left"><p>EQL</p></TD>
<TD colspan=1 align="left"><p>Custom
message existing in an inhouse situation or communication between known vendors
where the goal is to wrap a custom EQL Query in an HL7 Message.<br>
This query provides an envelope with which a query expressed in a language
(e.g., SQL) is packaged and sent to the responding system. It is meant to
provide the maximum query functionality and re-use. <br>
The EQQ with its EQL query defining segment supports free-form select
statements, based on the query language of choice (e.g., SQL).
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>RQQ</p></TD>
<TD colspan=1 align="left"><p>Event
Replay Query
</p></TD>
<TD colspan=1 align="left"><p>ERQ</p></TD>
<TD colspan=1 align="left"><p>The
Event Replay Query, introduced in Version 2.3, provides a way for the querying
system to request data in a format very similar to the format that would have
been used had this data been sent as an update in response to a trigger event.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>SPQ</p></TD>
<TD colspan=1 align="left"><p>Stored
Procedure Request
</p></TD>
<TD colspan=1 align="left"><p>SPR</p></TD>
<TD colspan=1 align="left"><p>The
Stored Procedure Query provides a mechanism for the querying system to invoke a
stored procedure on the responding system. The request includes a stored
procedure name and a list of parameters passed to it.<br>
The SPQ enables an application on one system to execute a stored procedure on
another system, which is coded to extract specific data.
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>VQQ</p></TD>
<TD colspan=1 align="left"><p>Virtual
Table Query
</p></TD>
<TD colspan=1 align="left"><p>VTQ</p></TD>
<TD colspan=1 align="left"><p>Preferable
over multiple platforms or where standardization is desired. The VTQ provides a
way to query for data to be expressed as tables without having to specify SQL
or a stored procedure. The reader is advised to consider using the new
recommended query as described in section 5.3.<br>
The VQQ supports queries against Server database table (virtual or actual)
based on specific selection criteria delineated in the VTQ segment.
</p></TD>
</TR>
</TABLE>
<p>And
3 enhanced responses as follows:<br>
</p>
<TABLE BORDER>
<TR align="center">
<TH><p><b>Code</b></p></TH>
<TH><p><b>Response
Name
</b></p></TH>
<TH><p><b>Defining
Segment
</b></p></TH>
<TH><p><b>Explanation</b></p></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>EDR</p></TD>
<TD colspan=1 align="left"><p>Enhanced
Display Response
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Generalized
display response message formatted for direct output to a display device
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>ERP</p></TD>
<TD colspan=1 align="left"><p>Event
Replay Response
</p></TD>
<TD colspan=1 align="left"><p>ERQ</p></TD>
<TD colspan=1 align="left"><p>Formats
the data on the basis of an application-specific segment-oriented
(record-oriented) message
</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>TBR</p></TD>
<TD colspan=1 align="left"><p>Tabular
Data Response
</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Formats
the data in a relational format, as rows and columns.
</p></TD>
</TR>
</TABLE>
<p>This
set of queries and set of responses can be mixed and matched according to the
following grid. Note that the pairs appearing on shaded lines are not valid.<br>
</p>
<TABLE BORDER>
<TR align="center">
<TH><p><b>Query</b></p></TH>
<TH><p><b>Response</b></p></TH>
<TH><p><b>Response
type
</b></p></TH>
<TH><p><b>Defining
factor
</b></p></TH>
<TH><p><b>Validity
Status
</b></p></TH>
<TH><p><b>Sec
Ref
</b></p></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>EQQ^Q04</p></TD>
<TD colspan=1 align="left"><p>TBR^R08</p></TD>
<TD colspan=1 align="left"><p>Tabular</p></TD>
<TD colspan=1 align="left"><p>EQL-2
= T
</p></TD>
<TD colspan=1 align="left"><p>valid</p></TD>
<TD colspan=1 align="left"><p>5.10.4.0</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>EQQ^Q04</p></TD>
<TD colspan=1 align="left"><p>EDR^R07</p></TD>
<TD colspan=1 align="left"><p>Display</p></TD>
<TD colspan=1 align="left"><p>EQL-2
= D
</p></TD>
<TD colspan=1 align="left"><p>valid</p></TD>
<TD colspan=1 align="left"><p>5.10.4.0</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>EQQ^Q04</p></TD>
<TD colspan=1 align="left"><p>ERP^R09</p></TD>
<TD colspan=1 align="left"><p>Segment
Pattern
</p></TD>
<TD colspan=1 align="left"><p>EQL-2
= R
</p></TD>
<TD colspan=1 align="left"><p>not
valid
</p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>RQQ^Q09</p></TD>
<TD colspan=1 align="left"><p>ERP^R09</p></TD>
<TD colspan=1 align="left"><p>Segment
Pattern
</p></TD>
<TD colspan=1 align="left"><p>ERQ-2
= specified trigger event
</p></TD>
<TD colspan=1 align="left"><p>valid</p></TD>
<TD colspan=1 align="left"><p>5.10.4.2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>RQQ^Q09</p></TD>
<TD colspan=1 align="left"><p>TBR^R08</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Not
valid
</p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>RQQ^Q09</p></TD>
<TD colspan=1 align="left"><p>EDR^R07</p></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p>Not
valid
</p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>SPQ^Q08</p></TD>
<TD colspan=1 align="left"><p>TBR^R08</p></TD>
<TD colspan=1 align="left"><p>Tabular</p></TD>
<TD colspan=1 align="left"><p>SPR-2
= T
</p></TD>
<TD colspan=1 align="left"><p>Valid</p></TD>
<TD colspan=1 align="left"><p>5.10.4.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>SPQ^Q08</p></TD>
<TD colspan=1 align="left"><p>EDR^R07</p></TD>
<TD colspan=1 align="left"><p>Display</p></TD>
<TD colspan=1 align="left"><p>SPR
-2 = D
</p></TD>
<TD colspan=1 align="left"><p>valid</p></TD>
<TD colspan=1 align="left"><p>5.10.4.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>SPQ^Q08</p></TD>
<TD colspan=1 align="left"><p>ERP^R09</p></TD>
<TD colspan=1 align="left"><p>Segment
Pattern
</p></TD>
<TD colspan=1 align="left"><p>SPR
-2 = R
</p></TD>
<TD colspan=1 align="left"><p>Valid
</p></TD>
<TD colspan=1 align="left"><p>5.10.4.3</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>VQQ^Q07</p></TD>
<TD colspan=1 align="left"><p>TBR^R08</p></TD>
<TD colspan=1 align="left"><p>Tabular</p></TD>
<TD colspan=1 align="left"><p>VTQ-2
= T
</p></TD>
<TD colspan=1 align="left"><p>valid</p></TD>
<TD colspan=1 align="left"><p>5.10.4.4</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>VQQ^Q07</p></TD>
<TD colspan=1 align="left"><p>EDR^R07</p></TD>
<TD colspan=1 align="left"><p>Display</p></TD>
<TD colspan=1 align="left"><p>VTQ-2
= D
</p></TD>
<TD colspan=1 align="left"><p>valid</p></TD>
<TD colspan=1 align="left"><p>5.10.4.4</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p>VQQ^Q07</p></TD>
<TD colspan=1 align="left"><p>ERP^R09</p></TD>
<TD colspan=1 align="left"><p>Segment
Pattern
</p></TD>
<TD colspan=1 align="left"><p>VTQ-2
= R
</p></TD>
<TD colspan=1 align="left"><p>not
valid
</p></TD>
<TD colspan=1 align="left"><BR></TD>
</TR>
</TABLE>
<p>The
enhanced query/response pairs are contingent on the Server having defined the
Conformance Statement.<br>
<b>Enhanced mode implementation considerations: definition of tables and
"Virtual Tables"</b><br>
g)	The particular allowable values for the EQL, VTQ, SPR, and RDF segments are
determined among cooperating applications during implementation.<br>
h)	The formats chosen for the query messages are very general.  This might be
read by prospective implementers to imply that the requirement for using the
Standard is the ability to respond to a wide variety of inquiries.  This is not
the intent.  The format here can be used with specific restrictions in any
interface.<br>
i)	The contents of the tables expressed as TBR response messages are defined by
the functional chapters.  Where an existing HL7 segment contains the fields
needed to form a row of a tabular response, the segment ID can be referenced.
For example, if a table of patients is needed, where each row represents a
patient and each column a field from the PID segment, then the PID can be
referenced as a table, also sometimes referred to as a "Virtual Table."<br>
Where each row is comprised of fields from multiple HL7 segments, the
functional chapters may define additional tables.  For example, a table may be
defined to respond to insurance queries where each row represents a patient,
and is comprised of columns derived from the PID segment and the insurance
segments (IN1-IN4).
</p>

<h4>
<A NAME="Heading173"> </A></h4>


<h4>
<A NAME="Heading174">5.10.4.1 EQQ - embedded query language query (event Q04)</A></h4>

<p>This
query provides an envelope with which a query expressed in a language (e.g.,
SQL) is packaged and sent to the responding system. It is meant to provide the
maximum query function without reinventing the wheel. <br>
The EQQ with its EQL query defining segment supports free-form select
statements, based on the query language of choice (e.g., SQL).<br>
</p>
<TABLE>
<TR align="left">
<TH colspan=1 align="left"><p><tt><b><u>EQQ^Q04</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Embedded
Query Language Query 
</u></b></tt></p></TH>
<TH><p>Chapter</p>
<BR></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt><u>EQL</u></tt></p></TD>
<TD colspan=1 align="left"><p><tt>EQL
Definition
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
</TABLE>
<p>The
response to the EQQ could be tabular or display. The segment pattern response
(the ERP) is invalid given that there is no way to specify the desired segment
pattern in the query defining segment, EQL.<br>
</p>
<TABLE>
<TR align="left">
<TH colspan=1 align="left"><p><tt><b><u>TBR^R08</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Tabular
Data Response 
</u></b></tt></p></TH>
<TH><p>Chapter</p></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSA</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Acknowledgment
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[ERR]</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Error</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt><u>QAK</u></tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Acknowledgment
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt><u>RDF</u></tt></p></TD>
<TD colspan=1 align="left"><p><tt>Table
Row Definition
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>{
<u>RDT</u> }
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Table
Row Data
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
</TABLE>
<p><br>
</p>
<TABLE>
<TR align="left">
<TH colspan=1 align="left"><p><tt><b><u>EDR^R07</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Enhanced
Display Response 
</u></b></tt></p></TH>
<TH><p>Chapter</p></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSA</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Acknowledgment
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
ERR ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Error</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt><u>QAK</u></tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Acknowledgment
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>{
<u>DSP</u> }
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Display
Data
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
</TABLE>
<h4>
<A NAME="Heading175">5.10.4.2 RQQ - event replay query (event Q09) </A></h4>

<p>The
Event Replay Query under version 2.3 provides a way for the querying system to
request data formatted very similar to the format that would have been used
were this data to be sent as an update in response to a trigger event. <br>
The RQQ is used to request data formatted as an event replay response.<br>
</p>
<TABLE>
<TR align="left">
<TH colspan=1 align="left"><p><tt><b><u>RQQ^Q09</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Event
Replay Query
</u></b></tt></p></TH>
<TH><p>Chapter
</p></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt><u>ERQ</u></tt></p></TD>
<TD colspan=1 align="left"><p><tt>Event
Replay Query
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
</TABLE>
<p><tt>
	</tt><br>
</p>
<TABLE>
<TR align="left">
<TD colspan=1 align="left"><p><tt><b><u>ERP^R09</u></b></tt></p></TD>
<TD colspan=1 align="left"><p><tt><b><u>Event
Replay Response
</u></b></tt></p></TD>
<TD colspan=1 align="center"><p>Chapter</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSA</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Acknowledgment
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[ERR]</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Error</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt><u>QAK</u></tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Acknowledgment
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt><u>ERQ</u></tt></p></TD>
<TD colspan=1 align="left"><p><tt>Event
Replay Query
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><b>.
. .
</b></p></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>...</tt></p></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>...</tt></p></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
[ DSC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
</TABLE>
<p><b>Note:</b>
The remainder of this message is defined by the contents of the corresponding
segment-oriented record-oriented unsolicited update message, excluding the MSH,
as defined by the function-specific chapters of this specification.  The input
parameter list may be satisfied by more than one record-oriented unsolicited
update message: in this case, the segment group after the ERQ segment may
repeat.<br>
	When this message is continued, the continuation messages should include the
MSH, MSA, [ERR], QAK, ERQ, and [DSC] segments, as well as the segments
indicated by the ellipsis (...) in the response definition and the DSC should
be used only at the end of the group corresponding to the record-oriented
unsolicited update message.<br>
Enhanced mode record-oriented response messages note: The RDF segment from the
EQQ, VQQ and SPQ messages, and the ERQ segment from the EQQ message, are echoed
back in their respective responses.  The DSC segment contains the continuation
pointer, if it is not null (<i>DSC-1-continuation pointer</i>).
</p>

<h4>
<A NAME="Heading176">5.10.4.3 SPQ - stored procedure request (event Q08) </A></h4>

<p>The
Stored Procedure Query provides a mechanism for the querying system to invoke a
stored procedure on the responding system. The request includes a stored
procedure name and a list of parameters passed to it. <br>
The SPQ enables an application on one system to execute a stored procedure on
another system, which is coded to extract specific data.<br>
</p>
<TABLE>
<TR align="left">
<TH colspan=1 align="left"><p><tt><b><u>SPQ^Q08</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Stored
Procedure Request
</u></b></tt></p></TH>
<TH><p>Chapter</p></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt><u>SPR</u></tt></p></TD>
<TD colspan=1 align="left"><p><tt>Store
Procedure Request
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
<u>RDF</u> ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Table
Row Definition
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
</TABLE>
<p>Since
the SPR segment includes a response format code, the response could be tabular,
display or segment pattern.<br>
</p>
<TABLE>
<TR align="left">
<TH colspan=1 align="left"><p><tt><b><u>EDR^R07</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Enhanced
Display Response 
</u></b></tt></p></TH>
<TH><p>Chapter</p></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSA</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Acknowledgment
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
ERR ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Error</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt><u>QAK</u></tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Acknowledgment
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>{
<u>DSP</u> }
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Display
Data
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
</TABLE>
<p><br>
</p>
<TABLE>
<TR align="left">
<TH colspan=1 align="left"><p><tt><b><u>ERP^R09</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Event
Replay Response
</u></b></tt></p></TH>
<TH><p>Chapter</p></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSA</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Acknowledgment
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[ERR]</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Error</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt><u>QAK</u></tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Acknowledgment
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt><u>ERQ</u></tt></p></TD>
<TD colspan=1 align="left"><p><tt>Event
Replay Query
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><b>.
. .
</b></p></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>...</tt></p></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><p><tt>...</tt></p></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>
[ DSC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
</TABLE>
<p><b>Note:</b>
The remainder of this message is defined by the contents of the corresponding
segment-oriented record-oriented unsolicited update message, excluding the MSH,
as defined by the function-specific chapters of this specification.  The input
parameter list may be satisfied by more than one record-oriented unsolicited
update message: in this case, the segment group after the ERQ segment may
repeat.<br>
	When this message is continued, the continuation messages should include the
MSH, MSA, [ERR], QAK, ERQ, and [DSC] segments, as well as the segments
indicated by the ellipsis (...) in the response definition and the DSC should
be used only at the end of the group corresponding to the record-oriented
unsolicited update message.<br>
Enhanced mode record-oriented response messages note: The RDF segment from the
EQQ, VQQ and SPQ messages, and the ERQ segment from the EQQ message, are echoed
back in their respective responses.  The DSC segment contains the continuation
pointer, if it is not null (<i>DSC-1-Continuation pointer</i>).<br>
</p>
<TABLE>
<TR align="left">
<TH colspan=1 align="left"><p><tt><b><u>TBR^R08</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Tabular
Data Response 
</u></b></tt></p></TH>
<TH><p>Chapter</p></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSA</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Acknowledgment
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[ERR]</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Error</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt><u>QAK</u></tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Acknowledgment
</tt></p>
<BR></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt><u>RDF</u></tt></p></TD>
<TD colspan=1 align="left"><p><tt>Table
Row Definition
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>{
<u>RDT</u> }
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Table
Row Data
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
</TABLE>
<h4>
<A NAME="Heading177">5.10.4.4 VQQ - Virtual Table query (event Q07) </A></h4>

<p>The
VTQ provides a way to query for data to be expressed as tables without having
to specify SQL or a stored procedure. The reader is advised to consider using
the new recommended queries described in section 5.3.3.4.<br>
The VQQ supports queries against server database table (virtual or actual)
based on specific selection criteria delineated in the VTQ segment.<br>
</p>
<TABLE>
<TR align="left">
<TH colspan=1 align="left"><p><tt><b><u>VQQ^Q07</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Virtual
Table Query
</u></b></tt></p></TH>
<TH><p>Chapter</p></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt><u>VTQ</u></tt></p></TD>
<TD colspan=1 align="left"><p><tt>VTQ
Definition
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
<u>RDF</u> ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Table
Row Definition
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
</TABLE>
<p><br>
</p>
<TABLE>
<TR align="left">
<TH colspan=1 align="left"><p><tt><b><u>EDR^R07</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Enhanced
Display Response 
</u></b></tt></p></TH>
<TH><p>Chapter</p></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSA</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Acknowledgment
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
ERR ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Error</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt><u>QAK</u></tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Acknowledgment
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>{
<u>DSP</u> }
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Display
Data
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
</TABLE>
<p><br>
</p>
<TABLE>
<TR align="left">
<TH colspan=1 align="left"><p><tt><b><u>TBR^R08</u></b></tt></p></TH>
<TH colspan=1 align="left"><p><tt><b><u>Tabular
Data Response 
</u></b></tt></p></TH>
<TH><p>Chapter</p></TH>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSH</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Header
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>MSA</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Message
Acknowledgment
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[ERR]</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Error</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt><u>QAK</u></tt></p></TD>
<TD colspan=1 align="left"><p><tt>Query
Acknowledgment
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt><u>RDF</u></tt></p></TD>
<TD colspan=1 align="left"><p><tt>Table
Row Definition
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>{
<u>RDT</u> }
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Table
Row Data
</tt></p></TD>
<TD colspan=1 align="center"><p>5</p></TD>
</TR>
<TR align="left">
<TD colspan=1 align="left"><p><tt>[
DSC ]
</tt></p></TD>
<TD colspan=1 align="left"><p><tt>Continuation
Pointer
</tt></p></TD>
<TD colspan=1 align="center"><p>2</p></TD>
</TR>
</TABLE>
<h3>
<A NAME="Heading178">5.10.5 Other query/response message segments</A></h3>

<p>This
section includes query/response message segments not carried forward to the
recommended queries for v 2.4. The reader is referred to section 5.5 for those
message segments that are used by both the recommended queries and the previous
generation queries.
</p>

<h4>
<A NAME="Heading179"> </A></h4>


<h4>
<A NAME="Heading180">5.10.5.1 EQL - embedded query language segment</A></h4>

<p>The
EQL segment is used to define queries using select statements based on the
query language of choice (e.g., SQL).  Refer to the functional chapters for the
lists of HL7-defined EQL select statements.<br>
<center>HL7 Attribute Table - EQL
<a name="EQL"></a>
- Embedded Query Language</center><br>
</p>
<TABLE BORDER>
<TR align="center">
<TH><p><b>SEQ</b></p></TH>
<TH><p><b>LEN</b></p></TH>
<TH><p><b>DT</b></p></TH>
<TH><p><b>OPT</b></p></TH>
<TH><p><b>RP/#</b></p></TH>
<TH><p><b>TBL#</b></p></TH>
<TH><p><b>ITEM#</b></p></TH>
<TH><p>ELEMENT
NAME
</p></TH>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>1</p></TD>
<TD colspan=1 align="center"><p>32</p></TD>
<TD colspan=1 align="center"><p>ST</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>00696</p></TD>
<TD colspan=1 align="center"><p>Query
Tag
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>2</p></TD>
<TD colspan=1 align="center"><p>1</p></TD>
<TD colspan=1 align="center"><p>ID</p></TD>
<TD colspan=1 align="center"><p>R</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p><u>0106</u></p></TD>
<TD colspan=1 align="center"><p>00697</p></TD>
<TD colspan=1 align="center"><p>Query/Response
Format Code
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>3</p></TD>
<TD colspan=1 align="center"><p>250</p></TD>
<TD colspan=1 align="center"><p>CE</p></TD>
<TD colspan=1 align="center"><p>R</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>00709</p></TD>
<TD colspan=1 align="center"><p>EQL
Query Name
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>4</p></TD>
<TD colspan=1 align="center"><p>4096</p></TD>
<TD colspan=1 align="center"><p>ST</p></TD>
<TD colspan=1 align="center"><p>R</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>00710</p></TD>
<TD colspan=1 align="center"><p>EQL
Query Statement
</p></TD>
</TR>
</TABLE>
<h5>
<A NAME="Heading181">5.10.5.1.0 EQL field definitions</A></h5>


<h5>
<A NAME="Heading182">5.10.5.1.1 EQL-1   Query tag   (ST)   00696 </A></h5>

<p>Definition:
 This field may be valued by the initiating system to identify the query, and
may be used to match response messages to the originating query.  If it is
valued, the responding system is required to echo it back as the first field in
the query acknowledgment segment (QAK).  This field differs from
<i>MSA-2-Message control ID</i> in that its value remains constant for each
message (i.e., all continuation messages) associated with the query, whereas
<i>MSA-2-Message control ID</i> may vary with each continuation message, since
it is associated with each individual message, not the query as a whole.
</p>

<h5>
<A NAME="Heading183">5.10.5.1.2 EQL-2   Query/response format code   (ID)   00697 </A></h5>

<p>Definition:
This field refers to <cite>HL7 Table 0106 - Query/response format
code</cite><i> </i>for valid values. 
</p>

<h5>
<A NAME="Heading184">5.10.5.1.3 EQL-3   EQL query name   (CE)   00709 </A></h5>

<p><tt>Components:
 &lt;identifier (ST)&gt; ^ &lt;text (ST)&gt; ^ &lt;name of coding system
(IS)&gt; ^ &lt;alternate identifier (ST)&gt; ^ &lt;alternate text (ST)&gt; ^
&lt;name of alternate coding system (IS)&gt;</tt><br>
Definition:  This field contains the name of the query.  Where the default HL7
coding system is used, these names are assigned by the function-specific
chapters of this specification.  The values for this field are equivalent to
those of <i>SPR-3-Stored procedure name</i> (see Section 5.10.5.5 "SPR - stored
procedure request definition segment"). 
</p>

<h5>
<A NAME="Heading185">5.10.5.1.4 EQL-4   EQL query statement   (ST)   00710 </A></h5>

<p>Definition:
 This field contains the EQL select statement that is the basis of the
query.<br>
Fields are designated by the "@" symbol concatenated with the HL7 segment ID
followed by the sequence number for the field separated by a period (see
chapter 2 for definition of segment ID and sequence number).  If the field is
divided into components, the designation may be suffixed with ".nn," to
identify a particular component (a suffix of ".3" indicates the third component
of the field); otherwise, the whole field is assumed.  If the field is further
divided into subcomponents, the designation is suffixed with ".nn.mm," which
identifies the component and subcomponent requested by relative position.<br>
Site-specific fields may be used, provided that they begin with the letter
<b>"Z." </b>Note that in this case the site-specified segment ID (if the field
is not being added to an existing HL7 segment) followed by the sequence number
must be defined so that they do not conflict with existing HL7 segment IDs and
field sequence numbers. Values for this field are defined in the
function-specific chapters of this specification.<br>
<b>Note:</b>	If the "@" is being used as one of the delimiter characters
defined in <i>MSH-2-Encoding characters</i>, it must be "escaped " (See Section )
</p>

<h4>
<A NAME="Heading186">5.10.5.2 ERQ - event replay query segment</A></h4>

<p>The
ERQ segment is used to issue queries where the desired response is formatted as
an event replay response message.  This enables the querying application to
request detailed event data from an application that supports this feature,
such that it may no longer be necessary for it to capture and store all event
information at the time of the original trigger event.<br>
<center>HL7 Attribute Table - ERQ
<a name="ERQ"></a>
- Event replay query</center><br>
</p>
<TABLE BORDER>
<TR align="center">
<TH><p><b>SEQ</b></p></TH>
<TH><p><b>LEN</b></p></TH>
<TH><p><b>DT</b></p></TH>
<TH><p><b>OPT</b></p></TH>
<TH><p><b>RP/#</b></p></TH>
<TH><p><b>TBL#</b></p></TH>
<TH><p><b>ITEM#</b></p></TH>
<TH><p>ELEMENT
NAME
</p></TH>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>1</p></TD>
<TD colspan=1 align="center"><p>32</p></TD>
<TD colspan=1 align="center"><p>ST</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>00696</p></TD>
<TD colspan=1 align="center"><p>Query
Tag
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>2</p></TD>
<TD colspan=1 align="center"><p>250</p></TD>
<TD colspan=1 align="center"><p>CE</p></TD>
<TD colspan=1 align="center"><p>R</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>00706</p></TD>
<TD colspan=1 align="center"><p>Event
Identifier
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>3</p></TD>
<TD colspan=1 align="center"><p>256</p></TD>
<TD colspan=1 align="center"><p>QIP</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><p>Y</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>00705</p></TD>
<TD colspan=1 align="center"><p>Input
Parameter List
</p></TD>
</TR>
</TABLE>
<h5>
<A NAME="Heading187">5.10.5.2.0 ERQ field definitions</A></h5>


<h5>
<A NAME="Heading188">5.10.5.2.1 ERQ-1   Query tag   (ST)   00696 </A></h5>

<p>Definition:
 This field may be valued by the initiating system to identify the query, and
may be used to match response messages to the originating query.  If it is
valued, the responding system is required to echo it back as the first field in
the query acknowledgment segment (QAK).  This field differs from
<i>MSA-2-Message control ID</i> in that its value remains constant for each
message (i.e., all continuation messages) associated with the query, whereas
<i>MSA-2-Message control ID</i> may vary with each continuation message, since
it is associated with each individual message, not the query as a whole.
</p>

<h5>
<A NAME="Heading189">5.10.5.2.2 ERQ-2   Event identifier   (CE)   00706 </A></h5>

<p><tt>Components:
 &lt;identifier (ST)&gt; ^ &lt;text (ST)&gt; ^ &lt;name of coding system
(IS)&gt; ^ &lt;alternate identifier (ST)&gt; ^ &lt;alternate text (ST)&gt; ^
&lt;name of alternate coding system (IS)&gt;</tt><br>
Definition:  This field contains the HL7 event identifier corresponding to the
original trigger event.  Its contents dictate the format of the response
message.  Hence, a value of "A04" in this field indicates a request for the
data associated with the "register a patient" trigger event.  The ERP response
message returns the contents of the "register a patient" message defined in
Chapter 3.  If more than one match is found, the ERP returns repeating groups
of the segments defined by the "A04" message.
</p>

<h5>
<A NAME="Heading190">5.10.5.2.3 ERQ-3   Input parameter list   (QIP)   00705 </A></h5>

<p><tt>Components:
 &lt;segment field name (ST)&gt; ^ &lt;value1 (ST) &amp; value2 (ST) &amp;
value3 (ST...&gt;</tt><br>
Definition:  This field contains the list of parameter names and values to be
passed to the responding system, in the form "<tt>&lt;segment field name&gt; ^
&lt;value1 &amp; value2 &amp; value3 ...&gt;.</tt>"  A single valued parameter
contains only a single subcomponent in the second component: thus no
subcomponent delimiters are needed (e.g., <tt>&lt;segment field name&gt; ^
&lt;value&gt;</tt>)<tt>.</tt>  A simple list of values (i.e., a one-dimensional
array) may be passed instead of a single value by separating each value with
the subcomponent delimiter: "<tt>&lt;segment field name&gt; ^
&lt;value1&amp;value2 &amp;...&gt;</tt>."  Refer to Section 5.10.5.1.4, "EQL-4
EQL query statement   (ST)   00710," for segment field name definition
conventions.<br>
For example, a value of "@PID.19^123-45-6789" could be combined with the A04
event identifier to request patient registration data for the patient with the
social security number 123-45-6789.
</p>

<h4>
<A NAME="Heading191">5.10.5.3 QRD - original-style query definition segment</A></h4>

<p>The
QRD segment is used to define a query. <br>
<center>HL7 Attribute Table - QRD
<a name="QRD"></a>
- Original-Style Query Definition</center><br>
</p>
<TABLE BORDER>
<TR align="center">
<TH><p><b>SEQ</b></p></TH>
<TH><p><b>LEN</b></p></TH>
<TH><p><b>DT</b></p></TH>
<TH><p><b>OPT</b></p></TH>
<TH><p><b>RP/#</b></p></TH>
<TH><p><b>TBL#</b></p></TH>
<TH><p><b>ITEM
#
</b></p></TH>
<TH><p>ELEMENT
NAME
</p></TH>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>1</p></TD>
<TD colspan=1 align="center"><p>26</p></TD>
<TD colspan=1 align="center"><p>TS</p></TD>
<TD colspan=1 align="center"><p>R</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>00025</p></TD>
<TD colspan=1 align="center"><p>Query
Date/Time
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>2</p></TD>
<TD colspan=1 align="center"><p>1</p></TD>
<TD colspan=1 align="center"><p>ID</p></TD>
<TD colspan=1 align="center"><p>R</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p><u>0106</u></p></TD>
<TD colspan=1 align="center"><p>00026</p></TD>
<TD colspan=1 align="center"><p>Query
Format Code
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>3</p></TD>
<TD colspan=1 align="center"><p>1</p></TD>
<TD colspan=1 align="center"><p>ID</p></TD>
<TD colspan=1 align="center"><p>R</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p><u>0091</u></p></TD>
<TD colspan=1 align="center"><p>00027</p></TD>
<TD colspan=1 align="center"><p>Query
Priority
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>4</p></TD>
<TD colspan=1 align="center"><p>10</p></TD>
<TD colspan=1 align="center"><p>ST</p></TD>
<TD colspan=1 align="center"><p>R</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>00028</p></TD>
<TD colspan=1 align="center"><p>Query
ID
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>5</p></TD>
<TD colspan=1 align="center"><p>1</p></TD>
<TD colspan=1 align="center"><p>ID</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p><u>0107</u></p></TD>
<TD colspan=1 align="center"><p>00029</p></TD>
<TD colspan=1 align="center"><p>Deferred
Response Type
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>6</p></TD>
<TD colspan=1 align="center"><p>26</p></TD>
<TD colspan=1 align="center"><p>TS</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>00030</p></TD>
<TD colspan=1 align="center"><p>Deferred
Response Date/Time
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>7</p></TD>
<TD colspan=1 align="center"><p>10</p></TD>
<TD colspan=1 align="center"><p>CQ</p></TD>
<TD colspan=1 align="center"><p>R</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p><u>0126</u></p></TD>
<TD colspan=1 align="center"><p>00031</p></TD>
<TD colspan=1 align="center"><p>Quantity
Limited Request
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>8</p></TD>
<TD colspan=1 align="center"><p>250
</p></TD>
<TD colspan=1 align="center"><p>XCN
</p></TD>
<TD colspan=1 align="center"><p>R</p></TD>
<TD colspan=1 align="center"><p>Y</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>00032</p></TD>
<TD colspan=1 align="center"><p>Who
Subject Filter
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>9</p></TD>
<TD colspan=1 align="center"><p>250
</p></TD>
<TD colspan=1 align="center"><p>CE
</p></TD>
<TD colspan=1 align="center"><p>R</p></TD>
<TD colspan=1 align="center"><p>Y</p></TD>
<TD colspan=1 align="center"><p><u>0048</u></p></TD>
<TD colspan=1 align="center"><p>00033</p></TD>
<TD colspan=1 align="center"><p>What
Subject Filter
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>10</p></TD>
<TD colspan=1 align="center"><p>250</p></TD>
<TD colspan=1 align="center"><p>CE
</p></TD>
<TD colspan=1 align="center"><p>R</p></TD>
<TD colspan=1 align="center"><p>Y</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>00034</p></TD>
<TD colspan=1 align="center"><p>What
Department Data Code
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>11</p></TD>
<TD colspan=1 align="center"><p>20</p></TD>
<TD colspan=1 align="center"><p>CM</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><p>Y</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>00035</p></TD>
<TD colspan=1 align="center"><p>What
Data Code Value Qual.
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>12</p></TD>
<TD colspan=1 align="center"><p>1</p></TD>
<TD colspan=1 align="center"><p>ID</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p><u>0108</u></p></TD>
<TD colspan=1 align="center"><p>00036</p></TD>
<TD colspan=1 align="center"><p>Query
Results Level
</p></TD>
</TR>
</TABLE>
<h5>
<A NAME="Heading192">5.10.5.3.0 QRD field definitions</A></h5>


<h5>
<A NAME="Heading193">5.10.5.3.1 QRD-1   Query date/time   (TS)   00025 </A></h5>

<p>Definition:
 This field contains the date the query was generated by the application
program. 
</p>

<h5>
<A NAME="Heading194">5.10.5.3.2 QRD-2   Query format code   (ID)   00026 </A></h5>

<p>Definition:
 This field refers to <cite>HL7 Table 0106 - Query/response format
code</cite><i> </i>for valid values. 
<br>
<center>HL7 Table 0106 - Query/response format code
<a name="HL70106"></a></center><br>
</p>
<TABLE BORDER>
<TR align="center">
<TH><p><b>Value</b></p></TH>
<TH><p><b>Description</b></p></TH>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>D</p></TD>
<TD colspan=1 align="center"><p>Response
is in display format
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>R</p></TD>
<TD colspan=1 align="center"><p>Response
is in record-oriented format
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>T</p></TD>
<TD colspan=1 align="center"><p>Response
is in tabular format
</p></TD>
</TR>
</TABLE>
<h5>
<A NAME="Heading195">5.10.5.3.3 QRD-3   Query priority   (ID)   00027 </A></h5>

<p>Definition:
 This field contains the time frame in which the response is expected.  Refer
<cite>HL7 Table 0091 - Query priority</cite> for valid values.  Table values
and subsequent fields specify time frames for response. 
<br>
<center>HL7 Table 0091 - Query priority</center><br>
</p>
<TABLE BORDER>
<TR align="center">
<TH><p><b>Value</b></p></TH>
<TH><p><b>Description</b></p></TH>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>D</p></TD>
<TD colspan=1 align="center"><p>Deferred</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>I</p></TD>
<TD colspan=1 align="center"><p>Immediate</p></TD>
</TR>
</TABLE>
<h5>
<A NAME="Heading196">5.10.5.3.4 QRD-4   Query ID   (ST)   00028 </A></h5>

<p>Definition:
 This field contains a unique identifier for the query.  Assigned by the
querying application.  Returned intact by the responding application.
</p>

<h5>
<A NAME="Heading197">5.10.5.3.5 QRD-5   Deferred response type   (ID)   00029 </A></h5>

<p>Definition:
This field refers to <cite>HL7 Table 0107 - Deferred response type</cite><i>
</i>for valid entries. 
<br>
<center>HL7 Table 0107 - Deferred response type
<a name="HL70107"></a></center><br>
</p>
<TABLE BORDER>
<TR align="center">
<TH><p><b>Value</b></p></TH>
<TH><p><b>Description</b></p></TH>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>B</p></TD>
<TD colspan=1 align="center"><p>Before
the Date/Time specified
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>L</p></TD>
<TD colspan=1 align="center"><p>Later
than the Date/Time specified
</p></TD>
</TR>
</TABLE>
<h5>
<A NAME="Heading198">5.10.5.3.6 QRD-6   Deferred response date/time   (TS)   00030 </A></h5>

<p>Definition:
 This field contains the date/time before or after which to send a deferred
response.  If not present, the response can be sent when it is available.  (See
<i>QRD-5-Deferred response type</i> above). 
</p>

<h5>
<A NAME="Heading199">5.10.5.3.7 QRD-7   Quantity limited request   (CQ)   00031 </A></h5>

<p><tt>Components:
 &lt;quantity (NM)&gt; ^ &lt;units (CE)&gt;</tt><br>
Definition:  This field contains the maximum length of the response that can be
accepted by the requesting system.  Valid responses are numerical values (in
the first component) given in the units specified in the second component.
Refer to<i> </i><cite>HL7 Table 0126 - Quantity limited request</cite><i>
</i>for valid entries for the second component.  Default is LI (lines). 
<br>
<center>HL7 Table 0126 - Quantity limited request</center><br>
</p>
<TABLE BORDER>
<TR align="center">
<TH><p><b>Value</b></p></TH>
<TH><p><b>Description</b></p></TH>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>CH</p></TD>
<TD colspan=1 align="center"><p>Characters</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>LI</p></TD>
<TD colspan=1 align="center"><p>Lines
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>PG</p></TD>
<TD colspan=1 align="center"><p>Pages</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>RD</p></TD>
<TD colspan=1 align="center"><p>Records</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>ZO</p></TD>
<TD colspan=1 align="center"><p>Locally
defined
</p></TD>
</TR>
</TABLE>
<h5>
<A NAME="Heading200">5.10.5.3.8 QRD-8   Who subject filter   (XCN)   00032 </A></h5>

<p><tt>Components:
&lt;ID number (ST)&gt; ^ &lt;family name (FN)&gt; ^ &lt;given name (ST)&gt; ^
&lt;second and further given names or initials thereof  (ST)&gt; ^ &lt;suffix
(e.g., JR or III) (ST)&gt; ^ &lt;prefix (e.g., DR) (ST)&gt; ^ &lt;degree (e.g.,
MD) (IS)&gt; ^ &lt;source table (IS)&gt; ^ &lt;assigning authority (HD)&gt; ^
&lt;name type code (ID)&gt;  ^ &lt;identifier check digit (ST)&gt; ^ &lt;code
identifying the check digit scheme employed (ID)&gt; ^ &lt;identifier type code
(IS)&gt; ^ &lt;assigning facility (HD)&gt; ^ &lt;name representation code
(ID)&gt; ^ &lt;name context (CE)&gt; ^ &lt;name validity range (DR)&gt; ^ &lt;
name assembly order (ID)&gt;Subcomponents of assigning authority:
&lt;namespace ID (IS)&gt; &amp; &lt;universal ID (ST)&gt; &amp; &lt;universal
ID type (ID)&gt;</tt><br>
<tt>Subcomponents of assigning facility:  &lt;namespace ID (IS)&gt; &amp;
&lt;universal ID (ST)&gt; &amp; &lt;universal ID type (ID)&gt;</tt><br>
Definition:  This field identifies the subject, or who the inquiry is about.
<br>
<b>Note:</b> 	This field should not have been a required field. However, for
backwards compatibility it remains a required field. There are some queries in
the standard that have not required this field. 
</p>

<h5>
<A NAME="Heading201">5.10.5.3.9 QRD-9   What subject filter   (CE)   00033 </A></h5>

<p><tt>Components:
 &lt;identifier (ST)&gt; ^ &lt;text (ST)&gt; ^ &lt;name of coding system
(IS)&gt; ^ &lt;alternate identifier (ST)&gt; ^ &lt;alternate text (ST)&gt; ^
&lt;name of alternate coding system (IS)&gt;</tt><br>
Definition:  This field describes the kind of information that is required to
satisfy the request.  Valid values define the type of transaction inquiry and
may be extended locally during implementation.
<br>
<center>HL7 Table 0048 - What subject filter
<a name="HL70048"></a></center><br>
</p>
<TABLE BORDER>
<TR align="center">
<TH><p><b>Value</b></p></TH>
<TH><p><b>Description</b></p></TH>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>ADV</p></TD>
<TD colspan=1 align="center"><p>Advice/diagnosis</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>ANU</p></TD>
<TD colspan=1 align="center"><p>Nursing
unit lookup (returns patients in beds, excluding empty beds)
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>APN</p></TD>
<TD colspan=1 align="center"><p>Patient
name lookup
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>APP</p></TD>
<TD colspan=1 align="center"><p>Physician
lookup
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>ARN</p></TD>
<TD colspan=1 align="center"><p>Nursing
unit lookup (returns patients in beds, including empty beds)
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>APM</p></TD>
<TD colspan=1 align="center"><p>Medical
record number query, returns visits for a medical record number
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>APA</p></TD>
<TD colspan=1 align="center"><p>Account
number query, return matching visit
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>CAN</p></TD>
<TD colspan=1 align="center"><p>Cancel.
 Used to cancel a query
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>DEM</p>
<BR></TD>
<TD colspan=1 align="center"><p>Demographics</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>FIN</p></TD>
<TD colspan=1 align="center"><p>Financial</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>GID</p></TD>
<TD colspan=1 align="center"><p>Generate
new identifier
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>GOL</p></TD>
<TD colspan=1 align="center"><p>Goals</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>MRI</p></TD>
<TD colspan=1 align="center"><p>Most
recent inpatient
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>MRO</p></TD>
<TD colspan=1 align="center"><p>Most
recent outpatient
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>NCK</p></TD>
<TD colspan=1 align="center"><p>Network
clock
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>NSC</p></TD>
<TD colspan=1 align="center"><p>Network
status change
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>NST</p></TD>
<TD colspan=1 align="center"><p>Network
statistic
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>ORD</p></TD>
<TD colspan=1 align="center"><p>Order</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>OTH</p></TD>
<TD colspan=1 align="center"><p>Other</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>PRB</p></TD>
<TD colspan=1 align="center"><p>Problems</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>PRO</p></TD>
<TD colspan=1 align="center"><p>Procedure</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>RES</p></TD>
<TD colspan=1 align="center"><p>Result</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>RAR</p></TD>
<TD colspan=1 align="center"><p>Pharmacy
administration information
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>RER</p></TD>
<TD colspan=1 align="center"><p>Pharmacy
encoded order information
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>RDR</p></TD>
<TD colspan=1 align="center"><p>Pharmacy
dispense information
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>RGR</p></TD>
<TD colspan=1 align="center"><p>Pharmacy
give information
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>ROR</p></TD>
<TD colspan=1 align="center"><p>Pharmacy
prescription information
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>SAL</p></TD>
<TD colspan=1 align="center"><p>All
schedule related information, including open slots, booked slots, blocked slots
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>SBK</p></TD>
<TD colspan=1 align="center"><p>Booked
slots on the identified schedule
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>SBL</p></TD>
<TD colspan=1 align="center"><p>Blocked
slots on the identified schedule
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>SOF</p></TD>
<TD colspan=1 align="center"><p>First
open slot on the identified schedule after the start date/tiem
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>SOP</p></TD>
<TD colspan=1 align="center"><p>Open
slots on the identified schedule
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>SSA</p></TD>
<TD colspan=1 align="center"><p>Time
slots available for a single appointment
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>SSR</p></TD>
<TD colspan=1 align="center"><p>Time
slots available for a recurring appointment
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>STA</p></TD>
<TD colspan=1 align="center"><p>Status</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>VXI</p></TD>
<TD colspan=1 align="center"><p>Vaccine
Information
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>XID</p></TD>
<TD colspan=1 align="center"><p>Get
cross-referenced identifiers
</p></TD>
</TR>
</TABLE>
<p><center>See
the HL7 Implementation Guide for detailed examples of use of various query
filter fields.
</center></p>

<h5>
<A NAME="Heading202">5.10.5.3.10 QRD-10   What department data code   (CE)   00034 </A></h5>

<p><tt>Components:
 &lt;identifier (ST)&gt; ^ &lt;text (ST)&gt; ^ &lt;name of coding system
(IS)&gt; ^ &lt;alternate identifier (ST)&gt; ^ &lt;alternate text (ST)&gt; ^
&lt;name of alternate coding system (IS)&gt;</tt><br>
Definition:  This field contains the possible contents including test number,
procedure number, drug code, item number, order number, etc.  The contents of
this field are determined by the contents of the previous field. This field
could contain multiple occurrences separated by repetition delimiters. <br>
<b>Note:</b> 	This field should not have been a required field. However, for
backwards compatibility it remains a required field. There are some queries in
the standard that have not required this field. 
</p>

<h5>
<A NAME="Heading203">5.10.5.3.11 QRD-11   What data code value qual   (CM)   00035  </A></h5>

<p><tt>Components:
 &lt;first data code value (ST)&gt; ^ &lt;last data code value (ST)&gt;</tt><br>
Definition: This field contains start and stop values separated by a component
separator.  These values constitute a window or range to further refine the
inquiry. 
</p>

<h5>
<A NAME="Heading204">5.10.5.3.12 QRD-12   Query results level   (ID)   00036 </A></h5>

<p>Definition:
 This field is used to control level of detail in results.  Refer to <cite>HL7
Table 0108 - Query results level</cite><i> </i>for valid values.  See chapters
4 and 7.
<br>
<center>HL7 Table 0108 - Query results level
<a name="HL70108"></a></center><br>
</p>
<TABLE BORDER>
<TR align="center">
<TH><p><b>Value</b></p></TH>
<TH><p><b>Description</b></p></TH>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><p>Order
plus order status
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>R</p></TD>
<TD colspan=1 align="center"><p>Results
without bulk text
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>S</p></TD>
<TD colspan=1 align="center"><p>Status
only
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>T</p></TD>
<TD colspan=1 align="center"><p>Full
results
</p></TD>
</TR>
</TABLE>
<h4>
<A NAME="Heading205">5.10.5.4 QRF - original style query filter segment</A></h4>

<p>The
QRF segment is used with the QRD segment to further refine the content of an
original style query.<br>
<center>HL7 Attribute Table - QRF
<a name="QRF"></a>
- Original style query filter</center><br>
</p>
<TABLE BORDER>
<TR align="center">
<TH><p><b>SEQ</b></p></TH>
<TH><p><b>LEN</b></p></TH>
<TH><p><b>DT</b></p></TH>
<TH><p><b>OPT</b></p></TH>
<TH><p><b>RP/#</b></p></TH>
<TH><p><b>TBL#</b></p></TH>
<TH><p><b>ITEM
#
</b></p></TH>
<TH><p>ELEMENT
NAME
</p></TH>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>1</p></TD>
<TD colspan=1 align="center"><p>20</p></TD>
<TD colspan=1 align="center"><p>ST</p></TD>
<TD colspan=1 align="center"><p>R</p></TD>
<TD colspan=1 align="center"><p>Y</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>00037</p></TD>
<TD colspan=1 align="center"><p>Where
Subject Filter
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>2</p></TD>
<TD colspan=1 align="center"><p>26</p></TD>
<TD colspan=1 align="center"><p>TS</p></TD>
<TD colspan=1 align="center"><p>B</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>00038</p></TD>
<TD colspan=1 align="center"><p>When
Data Start Date/Time
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>3</p></TD>
<TD colspan=1 align="center"><p>26</p></TD>
<TD colspan=1 align="center"><p>TS</p></TD>
<TD colspan=1 align="center"><p>B</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>00039</p></TD>
<TD colspan=1 align="center"><p>When
Data End Date/Time
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>4</p></TD>
<TD colspan=1 align="center"><p>60</p></TD>
<TD colspan=1 align="center"><p>ST</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><p>Y</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>00040</p></TD>
<TD colspan=1 align="center"><p>What
User Qualifier
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>5</p></TD>
<TD colspan=1 align="center"><p>60</p></TD>
<TD colspan=1 align="center"><p>ST</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><p>Y</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>00041</p></TD>
<TD colspan=1 align="center"><p>Other
QRY Subject Filter
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>6</p></TD>
<TD colspan=1 align="center"><p>12</p></TD>
<TD colspan=1 align="center"><p>ID</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><p>Y</p></TD>
<TD colspan=1 align="center"><p><u>0156</u></p></TD>
<TD colspan=1 align="center"><p>00042</p></TD>
<TD colspan=1 align="center"><p>Which
Date/Time Qualifier
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>7</p></TD>
<TD colspan=1 align="center"><p>12</p></TD>
<TD colspan=1 align="center"><p>ID</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><p>Y</p></TD>
<TD colspan=1 align="center"><p><u>0157</u></p></TD>
<TD colspan=1 align="center"><p>00043</p></TD>
<TD colspan=1 align="center"><p>Which
Date/Time Status Qualifier
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>8</p></TD>
<TD colspan=1 align="center"><p>12</p></TD>
<TD colspan=1 align="center"><p>ID</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><p>Y</p></TD>
<TD colspan=1 align="center"><p><u>0158</u></p></TD>
<TD colspan=1 align="center"><p>00044</p></TD>
<TD colspan=1 align="center"><p>Date/Time
Selection Qualifier
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>9</p></TD>
<TD colspan=1 align="center"><p>60</p></TD>
<TD colspan=1 align="center"><p>TQ</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>00694</p></TD>
<TD colspan=1 align="center"><p>When
Quantity/Timing Qualifier
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>10</p></TD>
<TD colspan=1 align="center"><p>10</p></TD>
<TD colspan=1 align="center"><p>NM</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>01442</p></TD>
<TD colspan=1 align="center"><p>Search
Confidence Threshold
</p></TD>
</TR>
</TABLE>
<h5>
<A NAME="Heading206">5.10.5.4.0 QRF field definitions</A></h5>


<h5>
<A NAME="Heading207">5.10.5.4.1 QRF-1   Where subject filter   (ST)   00037 </A></h5>

<p>Definition:
 This field identifies the department, system, or subsystem to which the query
pertains.  This field may repeat as in LAB~HEMO, etc.
</p>

<h5>
<A NAME="Heading208">5.10.5.4.2 QRF-2   When data start date/time   (TS)   00038 </A></h5>

<p>Definition:
This field has been retained for backward compatibility only. It is recommended
to use <i>QRF-9 - When quantity/timing qualifier</i>.  When used for backward
compatibility, this field contains the dates and times equal to or after which
this value should be included. 
</p>

<h5>
<A NAME="Heading209">5.10.5.4.3 QRF-3   When data end date/time   (TS)   00039 </A></h5>

<p>Definition:
This field has been retained for backward compatibility only. It is recommended
to use <i>QRF-9 - When quantity/timing qualifier</i>.  When used for backward
compatibility, this field contains the dates and times equal to or before which
this date should be included. This field contains the dates and times equal to
or before which this date should be included. 
</p>

<h5>
<A NAME="Heading210">5.10.5.4.4 QRF-4   What user qualifier   (ST)   00040 </A></h5>

<p>Definition:
 This field contains an identifier to further define characteristics of the
data of interest. 
</p>

<h5>
<A NAME="Heading211">5.10.5.4.5 QRF-5   Other QRY subject filter   (ST)   00041 </A></h5>

<p>Definition:
 This field contains a filter defined locally for use between two systems.
This filter uses codes and field definitions that have specific meaning only to
the applications and/or site involved.
</p>

<h5>
<A NAME="Heading212">5.10.5.4.6 QRF-6   Which date/time qualifier   (ID)   00042 </A></h5>

<p>Definition:
 This field specifies the type of date referred to in <i>QRF-2-When data start
date/time</i> and <i>QRF-3-When data end date/time</i>.
<br>
<center>HL7 Table 0156 - Which date/time qualifier
<a name="HL70156"></a></center><br>
</p>
<TABLE BORDER>
<TR align="center">
<TH><p><b>Value</b></p></TH>
<TH><p><b>Description</b></p></TH>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>ANY</p></TD>
<TD colspan=1 align="center"><p>Any
date/time within a range
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>COL</p></TD>
<TD colspan=1 align="center"><p>Collection
date/time, equivalent to film or sample collection date/time
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>ORD</p></TD>
<TD colspan=1 align="center"><p>Order
date/time
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>RCT</p></TD>
<TD colspan=1 align="center"><p>Specimen
receipt date/time, receipt of specimen in filling ancillary (Lab)
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>REP</p></TD>
<TD colspan=1 align="center"><p>Report
date/time, report date/time at filing ancillary (i.e., Lab)
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>SCHED</p></TD>
<TD colspan=1 align="center"><p>Schedule
date/time
</p></TD>
</TR>
</TABLE>
<h5>
<A NAME="Heading213">5.10.5.4.7 QRF-7   Which date/time status qualifier   (ID)   00043 </A></h5>

<p>Definition:
 This field specifies the status type of objects selected in date range defined
by <i>QRF-2-When data start date/time</i> and <i>QRF-3-When data end
date/time</i>.
<br>
<center>HL7 Table 0157 - Which date/time status qualifier
<a name="HL70157"></a></center><br>
</p>
<TABLE BORDER>
<TR align="center">
<TH><p><b>Value</b></p></TH>
<TH><p><b>Description</b></p></TH>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>ANY</p></TD>
<TD colspan=1 align="center"><p>Any
status
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>CFN</p></TD>
<TD colspan=1 align="center"><p>Current
final value, whether final or corrected
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>COR</p></TD>
<TD colspan=1 align="center"><p>Corrected
only (no final with corrections)
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>FIN</p></TD>
<TD colspan=1 align="center"><p>Final
only (no corrections)
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>PRE</p></TD>
<TD colspan=1 align="center"><p>Preliminary</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>REP</p></TD>
<TD colspan=1 align="center"><p>Report
completion date/time
</p></TD>
</TR>
</TABLE>
<h5>
<A NAME="Heading214">5.10.5.4.8 QRF-8   Date/time selection qualifier   (ID)   00044 </A></h5>

<p>Definition:
 This field allows the specification of certain types of values within the
date/time range.
<br>
<center>HL7 Table 0158 - Date/time selection qualifier
<a name="HL70158"></a></center><br>
</p>
<TABLE BORDER>
<TR align="center">
<TH><p><b>Value</b></p></TH>
<TH><p><b>Description</b></p></TH>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>1ST</p></TD>
<TD colspan=1 align="center"><p>First
value within range
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>ALL</p></TD>
<TD colspan=1 align="center"><p>All
values within the range
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>LST</p></TD>
<TD colspan=1 align="center"><p>Last
value within the range
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>REV</p></TD>
<TD colspan=1 align="center"><p>All
values within the range returned in reverse chronological order (This is the
default if not otherwise specified.)
</p></TD>
</TR>
</TABLE>
<h5>
<A NAME="Heading215">5.10.5.4.9 QRF-9   When quantity/timing qualifier   (TQ)   00694 </A></h5>

<p><tt>Components:
 &lt;quantity (CQ)&gt; ^ &lt;interval (CM)&gt; ^ &lt;duration (CM)&gt; ^
&lt;start date/time (TS)&gt; ^ &lt;end date/time (TS)&gt; ^ &lt;priority
(ST)&gt; ^ &lt;condition (ID)&gt; ^ &lt;text (TX)&gt; ^ &lt;conjunction
(ID)&gt; ^ &lt;order sequencing (CM)&gt; ^ &lt;occurrence duration (CE)&gt; ^
&lt;total occurrences (NM)&gt;</tt><br>
Definition:  This field allows an interval definition to be used for specifying
multiple responses to a query. With the addition of this filter, new query
specifications should no longer use <i>QRF-2-When data start date/time</i> and
<i>QRF-3-When data end date/time</i> in future implementations.
</p>

<h5>
<A NAME="Heading216">5.10.5.4.10 QRF-10   Search confidence threshold   (NM)   01442 </A></h5>

<p>Definition:
 This field contains a numeric value used to establish the minimum threshold
match. The value instructs the responding system to return no records for
patients whose "match weight" on the look-up was lower than this user-defined
value.<br>
Example: |0.50| or |8.25|<br>
One use of this optional field is in Patient Look-up transactions where the
searching system employs a numeric algorithm for determining potential matches
to patient/person lookups.
</p>

<h4>
<A NAME="Heading217">5.10.5.5 SPR - stored procedure request definition segment</A></h4>

<p>The
SPR segment is used to issue queries using stored procedure calls.  Refer to
the functional chapters for the lists of HL7-defined stored procedure names,
input parameters and output tables.<br>
<center>HL7 Attribute Table - SPR
<a name="SPR"></a>
- Stored Procedure Request Definition</center><br>
</p>
<TABLE BORDER>
<TR align="center">
<TH><p><b>SEQ</b></p></TH>
<TH><p><b>LEN</b></p></TH>
<TH><p><b>DT</b></p></TH>
<TH><p><b>OPT</b></p></TH>
<TH><p><b>RP/#</b></p></TH>
<TH><p><b>TBL#</b></p></TH>
<TH><p><b>ITEM#</b></p></TH>
<TH><p>ELEMENT
NAME
</p></TH>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>1</p></TD>
<TD colspan=1 align="center"><p>32</p></TD>
<TD colspan=1 align="center"><p>ST</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>00696</p></TD>
<TD colspan=1 align="center"><p>Query
Tag
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>2</p></TD>
<TD colspan=1 align="center"><p>1</p></TD>
<TD colspan=1 align="center"><p>ID</p></TD>
<TD colspan=1 align="center"><p>R</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p><u>0106</u></p></TD>
<TD colspan=1 align="center"><p>00697</p></TD>
<TD colspan=1 align="center"><p>Query/Response
Format Code
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>3</p></TD>
<TD colspan=1 align="center"><p>250</p></TD>
<TD colspan=1 align="center"><p>CE</p></TD>
<TD colspan=1 align="center"><p>R</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>00704</p></TD>
<TD colspan=1 align="center"><p>Stored
Procedure Name
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>4</p></TD>
<TD colspan=1 align="center"><p>256</p></TD>
<TD colspan=1 align="center"><p>QIP</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><p>Y</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>00705</p></TD>
<TD colspan=1 align="center"><p>Input
Parameter List
</p></TD>
</TR>
</TABLE>
<h5>
<A NAME="Heading218">5.10.5.5.0 SPR field definitions</A></h5>


<h5>
<A NAME="Heading219">5.10.5.5.1 SPR-1   Query tag   (ST)   00696 </A></h5>

<p>Definition:
 This field may be valued by the initiating system to identify the query, and
may be used to match response messages to the originating query.  If it is
valued, the responding system is required to echo it back as the first field in
the query acknowledgment segment (QAK).  This field differs from
<i>MSA-2-Message control ID</i> in that its value remains constant for each
message (i.e., all continuation messages) associated with the query, whereas
<i>MSA-2-Message control ID</i> may vary with each continuation message, since
it is associated with each individual message, not the query as a whole.
</p>

<h5>
<A NAME="Heading220">5.10.5.5.2 SPR-2   Query/response format code   (ID)   00697 </A></h5>

<p>Definition:
 This field refers to <cite>HL7 Table 0106 - Query/response format
code</cite><i> </i>for valid values. 
<br>
<center>HL7 Table 0106 - Query/response format code</center><br>
</p>
<TABLE BORDER>
<TR align="center">
<TH><p><b>Value</b></p></TH>
<TH><p><b>Description</b></p></TH>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>D</p></TD>
<TD colspan=1 align="center"><p>Response
is in display format
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>R</p></TD>
<TD colspan=1 align="center"><p>Response
is in record-oriented format
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>T</p></TD>
<TD colspan=1 align="center"><p>Response
is in tabular format
</p></TD>
</TR>
</TABLE>
<h5>
<A NAME="Heading221">5.10.5.5.3 SPR-3   Stored procedure name   (CE)   00704 </A></h5>

<p><tt>Components:
 &lt;identifier (ST)&gt; ^ &lt;text (ST)&gt; ^ &lt;name of coding system
(IS)&gt; ^ &lt;alternate identifier (ST)&gt; ^ &lt;alternate text (ST)&gt; ^
&lt;name of alternate coding system (IS)&gt;</tt><br>
Definition:  This field contains the name of the stored procedure that is to be
executed.  Values for this field are defined in the function-specific chapters
of this specification; site-specific stored procedure names begin with the
letter <b>"Z."
</b></p>

<h5>
<A NAME="Heading222">5.10.5.5.4 SPR-4   Input parameter list   (QIP)   00705 </A></h5>

<p><tt>Components:
&lt;segment field name (ST)&gt; ^ &lt;value1 (ST) &amp; value2 (ST) &amp;
value3 (ST) ...&gt;</tt><br>
Definition:  This field contains the list of parameter names and values to be
passed to the stored procedure, in the form <tt>"&lt;segment field name&gt; ^
&lt;value1&amp; value2 &amp; value3 ...&gt;."</tt>  A single valued parameter
contains only a single subcomponent in the second component: thus no
subcomponent delimiters are needed (e.g.,<tt> &lt;segment field name&gt; ^
&lt;value&gt;</tt>).  A simple list of values (i.e., a one-dimensional array)
may be passed instead of a single value by separating each value with the
subcomponent delimiter: "<tt>&lt;segment field name&gt; ^ &lt;value1&amp;
value2 &amp;...&gt;</tt>."  Refer to Section 5.10.5.1.4, "EQL-4   EQL query
statement   (ST)   00710 for segment field naming conventions.
</p>

<h4>
<A NAME="Heading223">5.10.5.6 URD - results/update definition segment</A></h4>

<p>The
URD segment is used in sending unsolicited updates about orders and results.
Its purpose is similar to that of the QRD segment, but from the
results/unsolicited update point of view.  Some of the fields have parallels in
the QRD segment.<br>
<center>HL7 Attribute Table - URD
<a name="URD"></a>
- Results/update Definition</center><br>
</p>
<TABLE BORDER>
<TR align="center">
<TH><p><b>SEQ</b></p></TH>
<TH><p><b>LEN</b></p></TH>
<TH><p><b>DT</b></p></TH>
<TH><p><b>OPT</b></p></TH>
<TH><p><b>RP/#</b></p></TH>
<TH><p><b>TBL#</b></p></TH>
<TH><p><b>ITEM
#
</b></p></TH>
<TH><p>ELEMENT
NAME
</p></TH>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>1</p></TD>
<TD colspan=1 align="center"><p>26</p></TD>
<TD colspan=1 align="center"><p>TS</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>00045</p></TD>
<TD colspan=1 align="center"><p>R/U
Date/Time
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>2</p></TD>
<TD colspan=1 align="center"><p>1</p></TD>
<TD colspan=1 align="center"><p>ID</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p><u>0109</u></p></TD>
<TD colspan=1 align="center"><p>00046</p></TD>
<TD colspan=1 align="center"><p>Report
Priority
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>3</p></TD>
<TD colspan=1 align="center"><p>250</p></TD>
<TD colspan=1 align="center"><p>XCN</p></TD>
<TD colspan=1 align="center"><p>R</p></TD>
<TD colspan=1 align="center"><p>Y</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>00047</p></TD>
<TD colspan=1 align="center"><p>R/U
Who Subject Definition
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>4</p></TD>
<TD colspan=1 align="center"><p>250</p></TD>
<TD colspan=1 align="center"><p>CE</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><p>Y</p></TD>
<TD colspan=1 align="center"><p><u>0048</u></p></TD>
<TD colspan=1 align="center"><p>00048</p></TD>
<TD colspan=1 align="center"><p>R/U
What Subject Definition
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>5</p></TD>
<TD colspan=1 align="center"><p>250</p></TD>
<TD colspan=1 align="center"><p>CE</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><p>Y</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>00049</p></TD>
<TD colspan=1 align="center"><p>R/U
What Department Code
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>6</p></TD>
<TD colspan=1 align="center"><p>20</p></TD>
<TD colspan=1 align="center"><p>ST</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><p>Y</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>00050</p></TD>
<TD colspan=1 align="center"><p>R/U
Display/Print Locations
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>7</p></TD>
<TD colspan=1 align="center"><p>1</p></TD>
<TD colspan=1 align="center"><p>ID</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p><u>0108</u></p></TD>
<TD colspan=1 align="center"><p>00051</p></TD>
<TD colspan=1 align="center"><p>R/U
Results Level
</p></TD>
</TR>
</TABLE>
<h5>
<A NAME="Heading224">5.10.5.6.0 URD field definitions</A></h5>


<h5>
<A NAME="Heading225">5.10.5.6.1 URD-1   R/U date/time   (TS)   00045 </A></h5>

<p>Definition:
 This field contains the date and time the update was generated by the
application program. 
</p>

<h5>
<A NAME="Heading226">5.10.5.6.2 URD-2   Report priority   (ID)   00046  </A></h5>

<p>Definition:
This field contains the priority associated with this report or update.  Refer
to <cite>HL7 Table 0109 - Report priority</cite><i> </i>for valid values. 
<br>
<center>HL7 Table 0109 - Report priority
<a name="HL70109"></a></center><br>
</p>
<TABLE BORDER>
<TR align="center">
<TH><p><b>Value</b></p></TH>
<TH><p><b>Description</b></p></TH>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>R</p></TD>
<TD colspan=1 align="center"><p>Routine</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>S</p></TD>
<TD colspan=1 align="center"><p>Stat</p></TD>
</TR>
</TABLE>
<h5>
<A NAME="Heading227">5.10.5.6.3 URD-3   R/U who subject definition   (XCN)   00047 </A></h5>

<p><tt>Components:
&lt;ID number (ST)&gt; ^ &lt;family name (FN)&gt; ^ &lt;given name (ST)&gt; ^
&lt;second and further given names or initials thereof  (ST)&gt; ^ &lt;suffix
(e.g., JR or III) (ST)&gt; ^ &lt;prefix (e.g., DR) (ST)&gt; ^ &lt;degree (e.g.,
MD) (IS)&gt; ^ &lt;source table (IS)&gt; ^ &lt;assigning authority (HD)&gt; ^
&lt;name type code (ID)&gt;  ^ &lt;identifier check digit (ST)&gt; ^ &lt;code
identifying the check digit scheme employed (ID)&gt; ^ &lt;identifier type code
(IS)&gt; ^ &lt;assigning facility (HD)&gt; ^ &lt;name representation code
(ID)&gt; ^ &lt;name context (CE)&gt; ^ &lt;name validity range (DR)&gt; ^ &lt;
name assembly order (ID)&gt;</tt><br>
Subcomponents of assigning authority:  &lt;namespace ID (IS)&gt; &amp;
&lt;universal ID (ST)&gt; &amp; &lt;universal ID type (ID)&gt;<br>
Subcomponents of assigning facility:  &lt;namespace ID (IS)&gt; &amp;
&lt;universal ID (ST)&gt; &amp; &lt;universal ID type (ID)&gt;<br>
Definition:  This field contains the definition of the subject, or who the
report is about. 
</p>

<h5>
<A NAME="Heading228">5.10.5.6.4 URD-4   R/U what subject definition   (CE)   00048 </A></h5>

<p><tt>Components:
 &lt;identifier (ST)&gt; ^ &lt;text (ST)&gt; ^ &lt;name of coding system
(IS)&gt; ^ &lt;alternate identifier (ST)&gt; ^ &lt;alternate text (ST)&gt; ^
&lt;name of alternate coding system (IS)&gt;</tt><br>
Definition:  This field describes the kind of information that is provided in
the report.  Valid values are the type of transaction inquiry.  Refer to<i>
</i><cite>HL7 Table 0048 - What subject filter</cite><i> </i>for valid
values.<br>
This table may be extended by local agreement during implementation.  See the
HL7 Implementation Guide for detailed examples of use of various query filter
fields.
</p>

<h5>
<A NAME="Heading229">5.10.5.6.5 URD-5   R/U what department code   (CE)   00049 </A></h5>

<p><tt>Components:
 &lt;identifier (ST)&gt; ^ &lt;text (ST)&gt; ^ &lt;name of coding system
(IS)&gt; ^ &lt;alternate identifier (ST)&gt; ^ &lt;alternate text (ST)&gt; ^
&lt;name of alternate coding system (IS)&gt;</tt><br>
Definition:  This field contains either a test number, procedure number, drug
code, item number, order number, etc. to identify the department.  The contents
of this field are determined by the contents of the previous field.  This field
could contain multiple occurrences separated by repetition delimiters. 
</p>

<h5>
<A NAME="Heading230">5.10.5.6.6 URD-6   R/U display/print locations   (ST)   00050 </A></h5>

<p>Definition:
 This field contains a list of the locations to which the report should be
distributed. 
</p>

<h5>
<A NAME="Heading231">5.10.5.6.7 URD-7   R/U results level   (ID)   00051 </A></h5>

<p>Definition:
 This field is used to control level of detail in results.  Refer to <cite>HL7
Table 0108 - Query results level</cite> for valid values.  Default level is
<b>T </b>for full results.  See chapters 4 and 7. 
</p>

<h4>
<A NAME="Heading232">5.10.5.7 URS - unsolicited selection segment</A></h4>

<p>The
URS segment is identical with the QRF segment, except that if the name of any
field contains Query (of QRY), this word has been changed to Results (see
<i>URS-5-R/U other results subject definition</i>). <br>
<center>HL7 Attribute Table - URS
<a name="URS"></a>
- Unsolicited Selection</center><br>
</p>
<TABLE BORDER>
<TR align="center">
<TH><p><b>SEQ</b></p></TH>
<TH><p><b>LEN</b></p></TH>
<TH><p><b>DT</b></p></TH>
<TH><p><b>OPT</b></p></TH>
<TH><p><b>RP/#</b></p></TH>
<TH><p><b>TBL#</b></p></TH>
<TH><p><b>ITEM
#
</b></p></TH>
<TH><p>ELEMENT
NAME
</p></TH>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>1</p></TD>
<TD colspan=1 align="center"><p>20</p></TD>
<TD colspan=1 align="center"><p>ST</p></TD>
<TD colspan=1 align="center"><p>R</p></TD>
<TD colspan=1 align="center"><p>Y</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>00052</p></TD>
<TD colspan=1 align="center"><p>R/U
Where Subject Definition
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>2</p></TD>
<TD colspan=1 align="center"><p>26</p></TD>
<TD colspan=1 align="center"><p>TS</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>00053</p></TD>
<TD colspan=1 align="center"><p>R/U
When Data Start Date/Time
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>3</p></TD>
<TD colspan=1 align="center"><p>26</p></TD>
<TD colspan=1 align="center"><p>TS</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>00054</p></TD>
<TD colspan=1 align="center"><p>R/U
When Data End Date/Time
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>4</p></TD>
<TD colspan=1 align="center"><p>20</p></TD>
<TD colspan=1 align="center"><p>ST</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><p>Y</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>00055</p></TD>
<TD colspan=1 align="center"><p>R/U
What User Qualifier
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>5</p></TD>
<TD colspan=1 align="center"><p>20</p></TD>
<TD colspan=1 align="center"><p>ST</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><p>Y</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>00056</p></TD>
<TD colspan=1 align="center"><p>R/U
Other Results Subject Definition
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>6</p></TD>
<TD colspan=1 align="center"><p>12</p></TD>
<TD colspan=1 align="center"><p>ID</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><p>Y</p></TD>

<TD colspan=1 align="center"><p><u>0156</u></p></TD>
<TD colspan=1 align="center"><p>00057</p></TD>
<TD colspan=1 align="center"><p>R/U
Which Date/Time Qualifier
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>7</p></TD>
<TD colspan=1 align="center"><p>12</p></TD>
<TD colspan=1 align="center"><p>ID</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><p>Y</p></TD>
<TD colspan=1 align="center"><p><u>0157</u></p></TD>
<TD colspan=1 align="center"><p>00058</p></TD>
<TD colspan=1 align="center"><p>R/U
Which Date/Time Status Qualifier
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>8</p></TD>
<TD colspan=1 align="center"><p>12</p></TD>
<TD colspan=1 align="center"><p>ID</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><p>Y</p></TD>
<TD colspan=1 align="center"><p><u>0158</u></p></TD>
<TD colspan=1 align="center"><p>00059</p></TD>
<TD colspan=1 align="center"><p>R/U
Date/Time Selection Qualifier
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>9</p></TD>
<TD colspan=1 align="center"><p>60</p></TD>
<TD colspan=1 align="center"><p>TQ</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>00695</p></TD>
<TD colspan=1 align="center"><p>R/U
Quantity/Timing Qualifier
</p></TD>
</TR>
</TABLE>
<h5>
<A NAME="Heading233">5.10.5.7.0 URS field definitions</A></h5>


<h5>
<A NAME="Heading234">5.10.5.7.1 URS-1   R/U where subject definition   (ST)   00052 </A></h5>

<p>Definition:
 This field identifies the department, system, or subsystem to which the result
pertains.  This field may repeat as in <b>LAB~HEMO</b>, etc. 
</p>

<h5>
<A NAME="Heading235">5.10.5.7.2 URS-2   R/U when data start date/time   (TS)   00053 </A></h5>

<p>Definition:
 This field contains the date/time the result starts  (if applicable). 
</p>

<h5>
<A NAME="Heading236">5.10.5.7.3 URS-3   R/U when data end date/time   (TS)   00054 </A></h5>

<p>Definition:
 This field contains the date/time the result ends (if applicable). 
</p>

<h5>
<A NAME="Heading237">5.10.5.7.4 URS-4   R/U what user qualifier   (ST)   00055 </A></h5>

<p>Definition:
 This field contains an identifier to define further the characteristics of the
data that are of interest. 
</p>

<h5>
<A NAME="Heading238">5.10.5.7.5 URS-5   R/U other results subject definition   (ST)   00056 </A></h5>

<p>Definition:
 This field contains a further qualifier, defined locally, for use between two
systems.  This filter uses codes and field definitions that have specific
meaning only to the application and/or site involved.
</p>

<h5>
<A NAME="Heading239">5.10.5.7.6 URS-6   R/U which date/time qualifier   (ID)   00057 </A></h5>

<p>Definition:
This field specifies the type of date referred to in <i>URS-2-when data start
date/time</i> and <i>URS-3-when data end date/time</i>.  Refer to <cite>HL7
Table 0156 - Which date/time qualifier</cite><i> </i>for valid values.
</p>

<h5>
<A NAME="Heading240">5.10.5.7.7 URS-7   R/U which date/time status qualifier   (ID)   00058 </A></h5>

<p>Definition:
 This field specifies the status type of objects selected in date range defined
by <i>URS-2-when data start date/time</i> and <i>URS-3-When data end
date/time</i>.  Refer <cite>HL7 Table 0157 - Which date/time status
qualifier</cite><i> </i>for valid values.
</p>

<h5>
<A NAME="Heading241">5.10.5.7.8 URS-8   R/U date/time selection qualifier   (ID)   00059 </A></h5>

<p>Definition:
 This field allows the specification of certain types of values within the
date/time range.  Refer to <cite>HL7 Table 0158 - Date/time selection
qualifier</cite><i> </i>for valid values.
</p>

<h5>
<A NAME="Heading242">5.10.5.7.9 URS-9   R/U quantity/timing qualifier   (TQ)   00695 </A></h5>

<p><tt>Components:
 &lt;quantity (CQ)&gt; ^ &lt;interval (CM)&gt; ^ &lt;duration (CM)&gt; ^
&lt;start date/time (TS)&gt; ^ &lt;end date/time (TS)&gt; ^ &lt;priority
(ST)&gt; ^ &lt;condition (ID)&gt; ^ &lt;text (TX)&gt; ^ &lt;conjunction
(ID)&gt; ^ &lt;order sequencing (CM)&gt; ^ &lt;occurrence duration (CE)&gt; ^
&lt;total occurrences (NM)&gt;</tt><br>
Definition:  This field allows an interval definition to be used for specifying
multiple responses to a query. With the addition of this filter, new query
specifications should no longer use<i> URS-2-R/U when data start date/time</i>
and <i>URS-3-R/U when data end date/time </i>in future implementations.
</p>

<h4>
<A NAME="Heading243">5.10.5.8 VTQ - Virtual table query request segment</A></h4>

<p>The
VTQ segment is used to define queries that are responded to with the Tabular
Data Message (TBR).  The VTQ query message is an alternate method to the EQQ
query message that some systems may find easier to implement, due to its use of
HL7 delimiters that separate components of the selection definition, and its
limited selection criteria.  Queries involving complex selection criteria
(nested operators, etc.) may need to be formatted as an EQL segment.<br>
As with the other query methods, the functional chapters define specific
queries supported as VTQ messages.  Refer to these functional chapters for the
lists of HL7-defined Virtual Tables, selection lists and criteria.<br>
<center>HL7 Attribute Table - VTQ
<a name="VTQ"></a>
- Virtual Table Query Request</center><br>
</p>
<TABLE BORDER>
<TR align="center">
<TH><p><b>SEQ</b></p></TH>
<TH><p><b>LEN</b></p></TH>
<TH><p><b>DT</b></p></TH>
<TH><p><b>OPT</b></p></TH>
<TH><p><b>RP/#</b></p></TH>
<TH><p><b>TBL#</b></p></TH>
<TH><p><b>ITEM#</b></p></TH>
<TH><p>ELEMENT
NAME
</p></TH>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>1</p></TD>
<TD colspan=1 align="center"><p>32</p></TD>
<TD colspan=1 align="center"><p>ST</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>00696</p></TD>
<TD colspan=1 align="center"><p>Query
Tag
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>2</p></TD>
<TD colspan=1 align="center"><p>1</p></TD>
<TD colspan=1 align="center"><p>ID</p></TD>
<TD colspan=1 align="center"><p>R</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p><u>0106</u></p></TD>
<TD colspan=1 align="center"><p>00697</p></TD>
<TD colspan=1 align="center"><p>Query/
Response Format Code
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>3</p></TD>
<TD colspan=1 align="center"><p>250</p></TD>
<TD colspan=1 align="center"><p>CE</p></TD>
<TD colspan=1 align="center"><p>R</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>00698</p></TD>
<TD colspan=1 align="center"><p>VT
Query Name
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>4</p></TD>
<TD colspan=1 align="center"><p>250</p></TD>
<TD colspan=1 align="center"><p>CE</p></TD>
<TD colspan=1 align="center"><p>R</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>00699</p></TD>
<TD colspan=1 align="center"><p>Virtual
Table Name
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>5</p></TD>
<TD colspan=1 align="center"><p>256</p></TD>
<TD colspan=1 align="center"><p>QSC
</p></TD>
<TD colspan=1 align="center"><p>O</p></TD>
<TD colspan=1 align="center"><p>Y</p></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p>00700</p></TD>
<TD colspan=1 align="center"><p>Selection
Criteria
</p></TD>
</TR>
</TABLE>
<h5>
<A NAME="Heading244">5.10.5.8.0 VTQ field definitions</A></h5>


<h5>
<A NAME="Heading245">5.10.5.8.1 VTQ-1   Query tag   (ST)   00696 </A></h5>

<p>Definition:
 This field may be valued by the initiating system to identify the query, and
may be used to match response messages to the originating query.  If it is
valued, the responding system is required to echo it back as the first field in
the query acknowledgment segment (QAK).  This field differs from
<i>MSA-2-Message control ID</i> in that its value remains constant for each
message (i.e., all continuation messages) associated with the query, whereas
<i>MSA-2-Message control ID</i> may vary with each continuation message, since
it is associated with each individual message, not the query as a whole.
</p>

<h5>
<A NAME="Heading246">5.10.5.8.2 VTQ-2   Query/response format code   (ID)   00697 </A></h5>

<p>Definition:
This field refers to <cite>HL7 Table 0106 - Query/response format
code</cite><i> </i>for valid values. 
</p>

<h5>
<A NAME="Heading247">5.10.5.8.3 VTQ-3   VT query name   (CE)   00698 </A></h5>

<p><tt>Components:
 &lt;identifier (ST)&gt; ^ &lt;text (ST)&gt; ^ &lt;name of coding system
(IS)&gt; ^ &lt;alternate identifier (ST)&gt; ^ &lt;alternate text (ST)&gt; ^
&lt;name of alternate coding system (IS)&gt;</tt><br>
Definition:  This field contains the name of the Virtual Table query.  These
names are assigned by the function-specific chapters of this specification.
Site-specific VT query names begin with the letter "Z."
</p>

<h5>
<A NAME="Heading248">5.10.5.8.4 VTQ-4   Virtual table name   (CE)   00699 </A></h5>

<p><tt>Components:
 &lt;identifier (ST)&gt; ^ &lt;text (ST)&gt; ^ &lt;name of coding system
(IS)&gt; ^ &lt;alternate identifier (ST)&gt; ^ &lt;alternate text (ST)&gt; ^
&lt;name of alternate coding system (IS)&gt;</tt><br>
Definition:  This field contains the name of the Virtual Table being
referenced.  This table name may refer to an HL7-defined segment, an HL7
Virtual Table (refer to the functional chapters), or a site-specific "Z table."
</p>

<h5>
<A NAME="Heading249">5.10.5.8.5 VTQ-5   Selection criteria   (QSC)   00700 </A></h5>

<p><tt>Components:
 &lt;segment field name (ST)&gt; ^ &lt;relational operator (ID)&gt; ^ &lt;value
(ST)&gt; ^ &lt;relational conjunction (ID)&gt;</tt><br>
Definition:  Each repetition of this field defines a column in the RDT segment:
the first repetition defines the first column of the RDT segment; the second
repetition defines the second column of the RDT segments, etc.  <br>
This field indicates the conditions that qualify the rows to be returned in the
query response.  (This field conveys the same information as the "WHERE" clause
in the corresponding SQL expression of the query, but is formatted
differently.)  It is comprised of the following components:<br>
*	The segment field name that is participating as a qualifier (usually the
"key").  Refer to Section 5.10.5.1.4, for field naming conventions.<br>
*	A relational operator, refer to <cite>HL7 Table 0209 - Relational
operator</cite><i> </i>for valid values.
<br>
<center>HL7 Table 0209 - Relational operator
<a name="HL70209"></a></center><br>
</p>
<TABLE BORDER>
<TR align="center">
<TH><p><b>Relational
operator
</b></p></TH>
<TH><p><b>Value</b></p></TH>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>EQ</p></TD>
<TD colspan=1 align="center"><p>Equal</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>NE</p></TD>
<TD colspan=1 align="center"><p>Not
Equal
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>LT</p></TD>
<TD colspan=1 align="center"><p>Less
than
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>GT</p></TD>
<TD colspan=1 align="center"><p>Greater
than
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>LE</p></TD>
<TD colspan=1 align="center"><p>Less
than or equal
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>GE</p></TD>
<TD colspan=1 align="center"><p>Greater
than or equal
</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>CT</p></TD>
<TD colspan=1 align="center"><p>Contains</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>GN</p></TD>
<TD colspan=1 align="center"><p>Generic</p></TD>
</TR>
</TABLE>
<p>*
The value to which the field will be compared.<br>
If more than one comparison is to be made to select qualifying rows, a
conjunction (defined by <cite>HL7 Table 0210 - Relational conjunction</cite>)
relating this repetition of the field to the next:
<br>
<center>HL7 Table 0210 - Relational conjunction
<a name="HL70210"></a></center><br>
</p>
<TABLE BORDER>
<TR align="center">
<TH><p><b>Relational
conjunction
</b></p></TH>
<TH><p><b>Note</b></p></TH>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>AND</p></TD>
<TD colspan=1 align="center"><p>Default</p></TD>
</TR>
<TR align="center">
<TD colspan=1 align="center"><p>OR</p></TD>
<TD colspan=1 align="center"><BR></TD>
</TR>
</TABLE>
<p>Hence,
the segment<br>
VTQ|TAG001|T|VT_QUERY_NAME|PID|@00108.1^EQ^EVANS^AND~@00108.2^EQ^CAROLYN
&lt;cr&gt;<br>
causes a response to be generated from the Virtual Table defined by the PID
segment. All rows containing the name field subcomponents defined in the
selection criteria field (last name =  "Evans," first name = "Carolyn") will be
selected for the response.  The columns returned from each selected row will be
defined by the RDF segment (see Section <br>
Notes:<br>
*	As previously stated, the VTQ segment does not, and is not intended to,
provide as robust selection function as native EQQ query.  It is offered as a
simpler alternative.<br>
*	When applied to strings, the relational operators LT, GT, LE, and GE imply an
alphabetic comparison.<br>
*	A "generic" comparison selects a record for inclusion in the response if the
beginning of the designated field matches the select string.<br>
*	Where a repeating field is specified as an operand, a match on any instance
of that field qualifies the row for inclusion in the response message.<br>
*	AND takes precedence over OR.  More sophisticated precedence rules require
that the query be expressed as an SQL message, or a stored procedure for the
query may be written and referenced with the SPR segment.
</p>

<h3>
<A NAME="Heading250">5.10.6 Other Query examples</A></h3>


<h4>
<A NAME="Heading251"> </A></h4>


<h4>
<A NAME="Heading252">5.10.6.1 Original mode query with display-oriented response</A></h4>

<p>Query
for all lab results on patient #12233.  The query is made at 11:00 a.m.,
9/11/87.  The Query anticipates an immediate display-oriented response.<br>
MSH|^~\&amp;|ICU||LAB01||||QRY^Q01|MSG00001|P|2.3&lt;cr&gt;<br>
QRD|198709111012|D|I|4387|||20^LI|12233|RES|ALL&lt;cr&gt;<br>
The response to the above query might look like the following:<br>
MSH|^~\&amp;|LAB01||ICU||||DSR|ZXT23461|P|2.3&lt;cr&gt;<br>
MSA|AA|MSG00001P&lt;cr&gt;<br>
QRD|198709111012|D|I|4387|||20^LI|12233|RES|ALL&lt;cr&gt;<br>
DSP|||RESULTS FOR PATIENT#12233   SMITH, JOHN H. 09/11/87&lt;cr&gt;<br>
DSP|||SPECIMEN#H85 COLLECTED 09/11/87 /07/0/0&lt;cr&gt;<br>
DSP&lt;cr&gt;<br>
DSP|||ELECTROLYTES&lt;cr&gt;<br>
DSP|||	SODIUM			140	[135-148]	MEQ/L	STAT&lt;cr&gt;<br>
DSP|||	POTASSIUM		4.0	[3.5-5.0]	MEQ/L	STAT&lt;cr&gt;<br>
DSP|||	CHLORIDE			89	[95-111]		MEQ/L	STAT&lt;cr&gt;<br>
DSP|||	CO2			20	[20-30]		MEQ/L	STAT&lt;cr&gt;<br>
DSP||||LB&lt;cr&gt;<br>
DSP|||CBC&lt;cr&gt;<br>
DSP|||	HEMOGLOBIN		[13.5-18.0]&lt;cr&gt;<br>
DSP|||	HEMATOCRIT		45	[40-54]		%&lt;cr&gt;	<br>
DSP|||	RED CELL COUNT		5.0	[4.6-6.2] 	M/MM3&lt;cr&gt;<br>
DSP|||	MCHC			32	[32-36]		G/DL&lt;cr&gt;<br>
DSP|||	MCH			28	[26-32]		PG&lt;cr&gt;<br>
DSP|||	MCV			85	[81-101]		FL&lt;cr&gt;<br>
DSP|||	WHITE CELL CNT		7.5	[5.0-10.0]	K/MM3&lt;cr&gt;<br>
DSP||||LB&lt;cr&gt;	<br>
DSP|||SPECIMEN#B24   COLLECTED 9/10/87&lt;cr&gt;<br>
DSC|12333H85;12&lt;cr&gt;<br>
A continuation query would echo back the contents of <i>DSC-1-Continuation
pointer</i> as follows:<br>
MSH|^~\&amp;|ICU||LAB01||||QRY^Q01|MSG00003|P|2.3&lt;cr&gt;<br>
QRD|198709111012|D|I|4387|||20^LI|12233|RES|ALL&lt;cr&gt;<br>
DSC|12333H85;12&lt;cr&gt;<br>
The following response shows that there is no further data by leaving
<i>DSC-1-Continuation pointer</i> not present.  This could be done by sending
the DSC segment with no data, but the example does the same thing by totally
omitting the DSC segment.<br>
MSH|^~\&amp;|LAB01||ICU|||DSR|ZXT23469|P|2.1&lt;cr&gt;<br>
MSA|AA|MSG00003|&lt;cr&gt;<br>
QRD|198709111012|D|I|4387|||20^LI|12233|RES|ALL&lt;cr&gt;<br>
DSP|||RESULTS FOR PATIENT#12233   SMITH, JOHN H. 09/11/87&lt;cr&gt;<br>
DSP|||SPECIMEN#H85 COLLECTED 09/10/87 /07/0/0&lt;cr&gt;<br>
DSP&lt;cr&gt;<br>
DSP|||ELECTROLYTES&lt;cr&gt;<br>
DSP|||	SODIUM		136	[135-148]	MEQ/L	STAT&lt;cr&gt;<br>
DSP|||	POTASSIUM	4.2	[3.5-5.0]	MEQ/L	STAT&lt;cr&gt;<br>
DSP|||	CHLORIDE		91	[95-111]		MEQ/L	STAT&lt;cr&gt;<br>
DSP|||	CO2		25	[20-30]		MEQ/L	STAT&lt;cr&gt;<br>
DSP||||LB&lt;cr&gt;
</p>

<h4>
<A NAME="Heading253">5.10.6.2 Enhanced mode query examples</A></h4>

<p><b>Note:</b>
For illustration purposes, these examples assume that the following are defined
in the ADT chapter:<br>
*	The VQQ (using SQL) and EQQ selection criteria<br>
*	The Virtual Table named PID, representing the PID segment as a "Virtual
Table"<br>
*	The stored procedure named PID_QRY_01<br>
This section includes embedded query language (using SQL), Virtual Table and
stored procedure query examples with tabular response.<br>
The following examples illustrate a query for the last and first names,
address, social security number and date of birth of patients whose last name
is "Evans."  The fields comprising the query and response are identified by
their HL7 segment field names.  Where a field is composed of components, the
particular component is identified with a "<b>.n</b>" suffix (e.g., the patient
last name is the first component of the patient name field (<i>PID-5-Patient
Name</i>), and therefore is identified as "@PID.5.1."<br>
The following examples illustrate this query expressed as an SQL select
statement, as a Virtual Table query and as a stored procedure call
</p>

<h5>
<A NAME="Heading254">5.10.6.2.1 Embedded query language query</A></h5>

<p>MSH|^~\|CLINIC||CENTRAL-REG||||EQQ^Q04|MSG00001|P|2.4&lt;cr&gt;<br>
EQL|TAG001|T|SQL_PID_QRY_01|SELECT @PID.5.1,@PID.5.2,@PID.11.1,@PID.11.2,<br>
	@PID.11.3,@PID.11.4,@PID.11.5,@PID.19,@PID.7<br>
	FROM PID WHERE @PID.5.1=`EVANS'&lt;cr&gt;
</p>

<h5>
<A NAME="Heading255">5.10.6.2.2 Virtual Table query</A></h5>

<p>MSH|^~\|CLINIC||CENTRAL-REG||||VQQ^Q07|MSG00001|P|2.4&lt;cr&gt;<br>
VTQ| TAG001|T | VTQ_PID_QRY_01|PID|@PID.5.1^EQ^EVANS&lt;cr&gt;<br>
RDF|9|@PID.5.1^ST^20~@PID.5.2^ST^20~@PID.11.1^ST^30~@PID.11.2^ST^30~@PID.11.3^ST^20~@PID.11.4^ST^2~@PID.11.5^ST^5~@PID.19^ST^11~@PID.7^TS^8&lt;cr&gt;</p>

<h5>
<A NAME="Heading256">5.10.6.2.3 Stored procedure request</A></h5>

<p>MSH|^~\|CLINIC||CENTRAL-REG||||SPQ^Q08|MSG00001|P|2.4&lt;cr&gt;<br>
SPR|TAG0001|T|SPR_PID_QRY_01|@PID.5.1^EVANS&lt;cr&gt;<br>
RDF|9|@PID.5.1^ST^20~@PID.5.2^ST^20~@PID.11.1^ST^30~@PID.11.2^ST^30~@PID.11.3^ST^20~@PID.11.4^ST^2~@PID.11.5^ST^5~@PID.19^ST^11~@PID.7^TS^8&lt;cr&gt;</p>

<h5>
<A NAME="Heading257">5.10.6.2.4 The response to the above queries might look like the following:</A></h5>

<p>MSH|^~\|CENTRAL-REG||CLINIC||||TBR^R08|MSG99001|P|2.4&lt;cr&gt;<br>
MSA|AA|MSG00001&lt;cr&gt;<br>
QAK|TAG0001|OK&lt;cr&gt;<br>
RDF|9|@PID.5.1^ST^20~@PID.5.2^ST^20~@PID.11.1^ST^30~@PID.11.2^ST^30~@PID.11.3^ST^20~@PID.11.4^ST^2~@PID.11.5^ST^5~@PID.19^ST^11~@PID.7^TS^8&lt;cr&gt;<br>
RDT|Evans|Aaron|105 Maple
St.||Lancaster|PA|19786|156-96-2542|19520809&lt;cr&gt;<br>
RDT|Evans|Bart|166 Norwood
Ln.||Hershey|PA|19987|765-58-4615|19701217&lt;cr&gt;<br>
RDT|Evans|Beth|15 Elmwood Ct.|Apt.
15|Gap|PA|19724|58-96-7619|19401119&lt;cr&gt;<br>
RDT|Evans|Carolyn|903 Diane
Circle||Phoenixville|PA|19460|156-96-2542|19620324&lt;cr&gt;<br>
DSC|00005&lt;cr&gt;<br>
For each of the above queries, a continuation query would echo back the
contents of <i>DSC-1- continuation pointer</i>, as shown in the following
examples:
</p>

<h5>
<A NAME="Heading258">5.10.6.2.5 Embedded query language continuation query</A></h5>

<p>MSH|^~\|CLINIC||CENTRAL-REG||||EQQ^Q04|MSG00002|P|2.4&lt;cr&gt;<br>
EQL|TAG001|T|SQL_PID_QRY_01|SELECT @PID.5.1,@PID.5.2,@PID.11.1,@PID.11.2,<br>
	@PID.11.3,@PID.11.4,@PID.11.5,@PID.19,@PID.7 <br>
	FROM PID WHERE @PID.5.1=`EVANS'&lt;cr&gt;<br>
DSC|00005&lt;cr&gt;
</p>

<h5>
<A NAME="Heading259">5.10.6.2.6 Virtual Table query continuation query</A></h5>

<p>MSH|^~\|CLINIC||CENTRAL-REG||||VQQ^Q07|MSG00002|P|2.4&lt;cr&gt;<br>
VTQ| TAG001|T | VTQ_PID_QRY_01|PID|@PID.5.1^EQ^EVANS&lt;cr&gt;<br>
RDF|9|@PID.5.1^ST^20~@PID.5.2^ST^20~@PID.11.1^ST^30~@PID.11.2^ST^30~@PID.11.3^ST^20~@PID.11.4^ST^2~@PID.11.5^ST^5~@PID.19^ST^11~@PID.7^TS^8&lt;cr&gt;<br>
DSC|00005&lt;cr&gt;
</p>

<h5>
<A NAME="Heading260">5.10.6.2.7 Stored procedure request query continuation query</A></h5>

<p>MSH|^~\|CLINIC||CENTRAL-REG||||SPQ^Q08|MSG00002|P|2.4&lt;cr&gt;<br>
SPR|TAG0001|T|SPR_PID_QRY_01|@PID.5.1^EVANS&lt;cr&gt;<br>
RDF|9|@PID.5.1^ST^20~@PID.5.2^ST^20~@PID.11.1^ST^30~@PID.11.2^ST^30~@PID.11.3^ST^20~@PID.11.4^ST^2~@PID.11.5^ST^5~@PID.19^ST^11~@PID.7^TS^8&lt;cr&gt;<br>
DSC|00005&lt;cr&gt;
</p>

<h5>
<A NAME="Heading261">5.10.6.2.8 Tabular response showing no further data</A></h5>

<p>This
response shows that there is no further data by leaving the continuation
pointer not present.  This could be done by sending the DSC segment ID with no
data, but the example does the same thing by totally omitting the DSC
segment<br>
MSH|^~\|CENTRAL-REG||CLINIC||||TBR^R08|MSG00003|P|2.4&lt;cr&gt;<br>
MSA|AA|MSG00002&lt;cr&gt;<br>
QAK|TAG0001|OK&lt;cr&gt;<br>
RDF|9|@PID.5.1^ST^20~@PID.5.2^ST^20~@PID.11.1^ST^30~@PID.11.2^ST^30~@PID.11.3^ST^20~@PID.11.4^ST^2~@PID.11.5^ST^5~@PID.19^ST^11~@PID.7^TS^8&lt;cr&gt;<br>
RDT|Evans|William|609 N. 3rd
St.||Manheim|PA|19898|169-03-9872|19290726&lt;cr&gt;<br>
RDT|Evans|Zachary|111 North
Ln.||Lancaster|PA|19987|539-43-8725|19340926&lt;cr&gt;
</p>

<h5>
<A NAME="Heading262">5.10.6.2.9 Event replay query example</A></h5>

<p>Suppose
that from the table of "Evans," Carolyn Evans is selected and the querying
application now needs detailed ADT information about her.  It can issue another
query for this information using the event replay query (RQQ).<br>
MSH|^~\|CLINIC||CENTRAL-REG||||RQQ^Q09|MSG00004|P|2.3&lt;cr&gt;<br>
ERQ|TAG0002|A04|@PID.19^ST^11^156-96-2542&lt;cr&gt;
</p>

<h5>
<A NAME="Heading263">5.10.6.2.10 Event replay response example</A></h5>

<p>The
response is returned as an Event Replay Response, which is the HL7 ADT patient
registration message corresponding to event code A04, prefixed by the MSH, MSA
and ERQ segments:<br>
MSH|^~\|CLINIC||CENTRAL-REG||||ERP^R09|MSG00005|P|2.4&lt;cr&gt;<br>
MSA|AA|MSG00004&lt;cr&gt;<br>
QAK|TAG0002|OK&lt;cr&gt;<br>
ERQ|TAG0002|A04|@PID.19^ST^11^156-96-2542&lt;cr&gt;<br>
EVN|A04|199405151259||&lt;cr&gt;<br>
PID|||2-68708-5|253763|EVANS^CAROLYN||19620324|F|||903 Diane
Circle^^PHOENIXVILLE^PA^19460|(610)555-1212|(610)555-1212||S|C||156-96-2542||&lt;cr&gt;<br>
NK1||EVANS^RICHARD|SPOUSE|903Diane Circle^^PHOENIXVILLE^<br>
	PA^19460|(610)555-1212|&lt;cr&gt;<br>
PV1||E|EMERG||||0148^ADDISON^JAMES&lt;cr&gt;<br>
..etc<br>
Error responses to the above queries might look like the following:
</p>

<h5>
<A NAME="Heading264">5.10.6.2.11 Embedded query language (EQL) , Virtual Table, and stored procedure error response</A></h5>

<p>MSH|^~\|CENTRAL-REG||CLINIC||||TBR^R08|MSG99001|P|2.4&lt;cr&gt;<br>
MSA|AE|MSG00001| &lt;cr&gt;<br>
ERR|EQL^^4^207&amp;&amp;HL70357<br>
QAK|TAG0001|AE&lt;cr&gt;
</p>

<h5>
<A NAME="Heading265">5.10.6.2.12 Event replay error response</A></h5>

<p>MSH|^~\|CENTRAL-REG||CLINIC||||ERP^R09|MSG00005|P|2.3&lt;cr&gt;<br>
MSA|AE|MSG00004||||^REQUESTED EVENT TYPE "A04" NOT SUPPORTED ON THIS
SYSTEM&lt;cr&gt;<br>
ERR|MSH^^9^201&amp;&amp;HL70357<br>
QAK|TAG0002|AE&lt;cr&gt;
</p>

<h2>
<A NAME="Heading266">5.11 OUTSTANDING ISSUES</A></h2>

<p>It
is not clear that there is a good use case for the super segment pattern as
described in the example in section 5.9.1.2.1
</p>
<HR><a name="fn0" href="#fnB0">[1]</a><p> 	If the Client elects to cancel the query
at this point, a cancel query message will be sent.  The query would look as
follows:</p>
<p>MSH||||||||QCN^J41^QCN_J01|8956|<br>
QAK|Q001|
</p>

</body></html>
