<HTML><HEAD>
<TITLE>HL7 V2.4 Appendix C</TITLE></HEAD>
<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">
<H1>
HL7 V2.4 Contents
</H1>
<A HREF="hl7.htm">Contents</A><br>
<A HREF="ch01.htm">1 . Introduction</A><br>
<A HREF="ch02.htm">2 .Control </A><br>
<A HREF="ch03.htm">3 .Patient Administration</A><br>
<A HREF="ch04.htm">4 .Order Entry</A><br>
<A HREF="ch05.htm">5 .Query</A><br>
<A HREF="ch06.htm">6. Financial Management</A><br>
<A HREF="ch07.htm">7 .Observation Reporting</A><br>
<A HREF="ch08.htm">8 .Master Files</A><br>
<A HREF="ch09.htm">9 .Medical Records/Information Management (Document Management)</A><br>
<A HREF="ch10.htm">10 .Scheduling</A><br>
<A HREF="ch11.htm">11 .Patient Referral</A><br>
<A HREF="ch12.htm">12 .Patient Care</A><br>
<A HREF="ch13.htm">13 .Clinical Laboratory Automation</A><br>
<A HREF="ch14.htm">14 .Application Management</A><br>
<A HREF="ch15.htm">15 .Personnel Management</A><br>
<A HREF="AppendixA.htm">A .Data Definition Tables</A><br>
<A HREF="AppendixB.htm">B. Lower Layer Protocols</A><br>
<A HREF="AppendixC.htm">C. Version 2.4 BNF Message Descriptions</A><br>
<A HREF="AppendixD.htm">D. Glossary</A><br>

<hr size=4>
<H1>
HL7 V2.4 Appendix C</H1>
<UL>
<LI><A HREF="#Heading1">C .<BR>Version 2.4 BNF Message Descriptions</A>
<UL>
<LI><A HREF="#Heading2">C.1 APPENDIX C CONTENTS</A>
<LI><A HREF="#Heading3">C.2 BNF DESCRIPTIONS OF HL7 VERSION 2.4 ABSTRACT MESSAGES</A>
<UL>
<LI><A HREF="#Heading4">C.2.1 Overview</A>
<LI><A HREF="#Heading5">C.2.2 Tokens</A>
<UL>
<LI><A HREF="#Heading6"> </A>
<LI><A HREF="#Heading7">C.2.2.1 Terminators</A>
<LI><A HREF="#Heading8">C.2.2.2 Segments</A>
<UL>
<LI><A HREF="#Heading9">C.2.2.2.1 Control/query</A>
<LI><A HREF="#Heading10">C.2.2.2.2 Master files</A>
<LI><A HREF="#Heading11">C.2.2.2.3 Patient administration</A>
<LI><A HREF="#Heading12">C.2.2.2.4 Financial information</A>
<LI><A HREF="#Heading13">C.2.2.2.5 Orders/Observations</A>
</UL>
</UL>
<LI><A HREF="#Heading14">C.2.3 BNF Message Definitions</A>
</UL>
</UL>
</UL>
<hr size=4>

<h1>
<A NAME="Heading1">C .<BR>Version 2.4 BNF Message Descriptions</A></h1>

<p><br>
</p>
<TABLE>
<TR align="left">
<TD colspan=1 align="left"><p>Editor:</p></TD>
<TD colspan=1 align="left"><p>Karen
Van Hentenryck<br>Health Level Seven
</p></TD>
</TR>
</TABLE>
<h2>
<A NAME="Heading2">C.1 APPENDIX C CONTENTS</A></h2>


<h2>
<A NAME="Heading3">C.2 BNF DESCRIPTIONS OF HL7 VERSION 2.4 ABSTRACT MESSAGES</A></h2>


<h3>
<A NAME="Heading4">C.2.1 Overview</A></h3>

<p>This
appendix gives examples of BNF representations of abstract message definitions
at the segment level for HL7, version 2.4.  It does not specify the field-level
or data-type definitions nor does it define the message exchange protocol. It
is not the only possible set of BNF productions capable of describing these
messages, since the choice of tokens for certain segments and messages is to
some extent arbitrary (e.g., should the EVN segment have a single token, or
many?), as are the forms used to define recursion.  <br>
In the definitions that follow an attempt has been made both to follow the
general use of message definitions given in the various chapters and to resolve
questions of ambiguity.<br>
For more information on BNF, see <i>Compiler Design in C ; Allen I. Holub;
Prentice Hall; Englewood Cliffs, New Jersey; 1990.
</i></p>

<h3>
<A NAME="Heading5">C.2.2 Tokens</A></h3>


<h4>
<A NAME="Heading6"> </A></h4>


<h4>
<A NAME="Heading7">C.2.2.1 Terminators</A></h4>

<p>EOM
End of message.  Not formally part of HL7 abstract message definition, nor of
the encoding rules: hence optional from the point of view of the abstract
message definitions and encoding rules.  Included here to add to clarity and to
the usefulness of the BNF descriptions in generating HL7 parsers. <br>
ST	Segment terminator.<br>
SOM	Start of Message.  Not formally part of HL7 abstract message definition,
nor of the encoding rules: hence optional from the point of view of the
abstract message definitions and encoding rules.  Included here to add to
clarity and to the usefulness of the BNF descriptions in generating HL7 parsers. 
</p>

<h4>
<A NAME="Heading8">C.2.2.2 Segments</A></h4>


<h5>
<A NAME="Heading9">C.2.2.2.1 Control/query</A></h5>

<p>MSH
MSA ERR NTE QRD QRF DSC URS URD DSP MSHmcf
</p>

<h5>
<A NAME="Heading10">C.2.2.2.2 Master files</A></h5>

<p>MFE
MFI MFA
</p>

<h5>
<A NAME="Heading11">C.2.2.2.3 Patient administration</A></h5>

<p>EVN
EVNA01 EVNA02 EVNA03 EVNA04 EVNA05 EVNA06 EVNA07 EVNA08 EVNA0 EVNA10 EVNA11
EVNA12 EVNA13 EVNA14 EVNA15 EVNA16 EVNA17 EVNA18 EVNA19 EVNA20 EVNA21 EVNA22
EVNA23 EVNA24 EVNA25 EVNA26 EVNA27 EVNA28 EVNA29 EVNA30 EVNA31 EVNA32 EVNA33
EVNA34 EVNA35 EVNA36 EVNA37 PID PV1 DG1 PR1 NK1 PV2 ACC AL1 IN1 IN2 IN3 UB1 UB2
NPU MRG
</p>

<h5>
<A NAME="Heading12">C.2.2.2.4 Financial information</A></h5>

<p>GT1
FT1 BLG EVNP01 EVNP02 EVNP03  
</p>

<h5>
<A NAME="Heading13">C.2.2.2.5 Orders/Observations</A></h5>

<p>ORC
OBR OBX RXA RXC RXO RXR RXG RXD RXE ODS ODT RQ1 RQD MSHorr1 MSHorr2
</p>

<h3>
<A NAME="Heading14">C.2.3 BNF Message Definitions</A></h3>

<p><i>The
following is a listing of the BNF message descriptions, using the tokens
defined above.  It includes the accompanying segment groups used in producing
the messages. Comments within the file are delimited by "/*" (comment start)
and "*/" (comment end).</i><br>
<tt>hl7Msgs: ack      /* General acknowledgment     */</tt><br>
<tt>   |     mcf      /* Delayed acknowledgment message.  */</tt><br>
<tt>   |     qry      /* Query message.             */</tt><br>
<tt>   |     dsr      /* Display response message.  */</tt><br>
<tt>   |     udm      /* Unsolicited display message.  */</tt><br>
<tt>   |     adt     /* Admissions, discharge, transfer. */</tt><br>
<tt>   |     orm      /* Order message.             */</tt><br>
<tt>   |     orr      /* Order message response.    */</tt><br>
<tt>   |     rxo      /* Pharmacy order. */</tt><br>
<tt>   |     rde      /* Pharmacy order information.   */</tt><br>
<tt>   |     rds      /* Pharmacy dispense information.   */</tt><br>
<tt>   |     rgv      /* Pharmacy dose information. */</tt><br>
<tt>   |     ras      /* Pharmacy administration information. */</tt><br>
<tt>   |     rre      /* Pharmacy encoded order history report. */</tt><br>
<tt>   |     rrd      /* Pharmacy dispense history report. */</tt><br>
<tt>   |     rrg      /* Pharmacy give history report. */</tt><br>
<tt>   |     rra      /* Pharmacy administration report. */</tt><br>
<tt>   |     orrRxo   /* Pharmacy order message response. */</tt><br>
<tt>   |     orrRde   /* Pharmacy encoded order message response. */</tt><br>
<tt>   |     orrRds   /* Pharmacy dispense message response. */</tt><br>
<tt>   |     orrRgv   /* Pharmacy give message response. */</tt><br>
<tt>   |     orrRas   /* Pharmacy administer message response. */</tt><br>
<tt>   |     bar      /* Add or change billing account. */</tt><br>
<tt>   |     dft      /* Detail financial transaction. */</tt><br>
<tt>   |     oru      /* Observation result - unsolicited. */</tt><br>
<tt>   |     orf      /* Observation result - solicited. */</tt><br>
<tt>   |     mfn      /* Master Files Notification */</tt><br>
<tt>   |     mfk      /* Master Files Acknowledgement */</tt><br>
<tt>   |     mfd      /* Master File Update Delayed Application Acknowledgement
*/</tt><br>
<tt>   |     mfq      /* Master Files Query  */</tt><br>
<tt>   |     mfr      /* Master Files Query Response */</tt><br>
<tt>   ;</tt><br>
<tt>/* Chapter II - Control Section */</tt><br>
<tt>/* ACK - General synchronous acknowledgement.
*/</tt><br>
<tt>ack:     SOM MSH ST MSA ST ERROpt EOM ;</tt><br>
<tt>/*  Delayed Acknowledgement */</tt><br>
<tt>mcf:	 SOM MSHmcf ST MSA ST EOM</tt><br>
<tt>   |	 SOM MSHmcf ST MSA ST ERROpt EOM ;</tt><br>
<tt>NoteOptGrp:</tt><br>
<tt>   |	 NoteGrp ;</tt><br>
<tt>NoteGrp: NTE ST</tt><br>
<tt>   |    NTE ST NoteGrp ;</tt><br>
<tt>/* Chapter II - Query Section */</tt><br>
<tt>QueryHdr:  QRD ST QRFOpt PIDOpt ;</tt><br>
<tt>qry:      SOM MSH ST QRD ST QRFOpt DSCOpt EOM ;</tt><br>
<tt>dsr:      SOM MSH ST MSA ST ERROpt QRD ST QRFOpt DisplayGrp DSCOpt
EOM</tt><br>
<tt>   |      SOM MSH ST QRD ST QRFOpt DisplayGrp DSCOpt EOM ;</tt><br>
<tt>udm:      SOM MSH ST URD ST URSOpt DisplayGrp DSCOpt EOM ;</tt><br>
<tt>DisplayGrp: DSP ST</tt><br>
<tt>   |      DSP ST DisplayGrp ;</tt><br>
<tt>/* Chapter III - ADT Messages: note that the EVNxxx tokens stand for
identical segments except for the event type code values. This allows the BNF
description for each ADT message to be unique, although the actual segment
level definitions are non-unique. Thus the BNF is parallel to that used in the
ADT chapter.  */</tt><br>
<tt>adt:     a01   /* Admit a patient.     */</tt><br>
<tt>   |     a02   /* Transfer a patient.  */</tt><br>
<tt>   |     a03   /* Discharge a patient. */</tt><br>
<tt>   |     a04   /* Register a patient.  */</tt><br>
<tt>   |     a05   /* Pre-admit a patient. */</tt><br>
<tt>   |     a06   /* Transfer an outpatient to inpatient.   */</tt><br>
<tt>   |     a07   /* Transfer an inpatient to outpatient.   */</tt><br>
<tt>   |     a08   /* Update patient information.   */</tt><br>
<tt>   |     a09   /* Patient departing.   */</tt><br>
<tt>   |     a10   /* Patient arriving.    */</tt><br>
<tt>   |     a11   /* Cancel admit.        */</tt><br>
<tt>   |     a12   /* Cancel transfer.     */</tt><br>
<tt>   |     a13   /* Cancel discharge.    */</tt><br>
<tt>   |     a14   /* Pending admit.       */</tt><br>
<tt>   |     a15   /* Pending transfer.    */</tt><br>
<tt>   |     a16   /* Pending discharge.   */</tt><br>
<tt>   |     a17   /* Swap a patient.      */</tt><br>
<tt>   |     a18   /* Merge patient information.    */</tt><br>
<tt>   |     a19   /* Patient query.       */</tt><br>
<tt>   |     a20   /* Nursing - census application updates.  */</tt><br>
<tt>   |     a21   /* Leave of absence - out (leaving).      */</tt><br>
<tt>   |     a22   /* Leave of absence - in (returning).     */</tt><br>
<tt>   |     a23   /* Delete a patient record.               */</tt><br>
<tt>   |     a24   /* Link patient information.     */</tt><br>
<tt>   |     a25   /* Cancel pending discharge.     */</tt><br>
<tt>   |     a26   /* Cancel pending transfer.      */</tt><br>
<tt>   |     a27   /* Cancel pending admit.         */</tt><br>
<tt>   |     a28   /* Add person information.       */</tt><br>
<tt>   |     a29   /* Delete person information.    */</tt><br>
<tt>   |     a30   /* Merge person information.     */</tt><br>
<tt>   |     a31   /* Update person information.    */</tt><br>
<tt>   |     a32   /* Cancel patient arriving.      */</tt><br>
<tt>   |     a33   /* Cancel patient departing.     */</tt><br>
<tt>   |     a34   /* Merge patient information (PID only). */</tt><br>
<tt>   |     a35   /* Merge patient information (Account # only). */</tt><br>
<tt>   |     a36   /* Merge patient information (PID &amp; Account #).
*/</tt><br>
<tt>   |     a37 ; /* Unlink patient information.   */</tt><br>
<tt>a01:   SOM MSH ST EVNA01 ST PID ST NK1OptGrp PV1 ST PV2Opt
OBXOptGrp</tt><br>
<tt>       AL1OptGrp DG1OptGrp PR1OptGrp GT1OptGrp InsOptGrp1</tt><br>
<tt>       ACCOpt UB1Opt UB2Opt EOM ;</tt><br>
<tt>a02:   SOM MSH ST EVNA02 ST PidGrp EOM ;</tt><br>
<tt>a03:   SOM MSH ST EVNA03 ST PidGrp EOM ;</tt><br>
<tt>a04:   SOM MSH ST EVNA04 ST PID ST NK1OptGrp PV1 ST PV2Opt
OBXOptGrp</tt><br>
<tt>         AL1OptGrp DG1OptGrp PR1OptGrp GT1OptGrp InsOptGrp1</tt><br>
<tt>         ACCOpt UB1Opt UB2Opt EOM ;</tt><br>
<tt>a05:   SOM MSH ST EVNA05 ST PID ST NK1OptGrp PV1 ST PV2Opt
OBXOptGrp</tt><br>
<tt>         AL1OptGrp DG1OptGrp PR1OptGrp GT1OptGrp InsOptGrp1</tt><br>
<tt>         ACCOpt UB1Opt UB2Opt EOM ;</tt><br>
<tt>a06:   SOM MSH ST EVNA06 ST PID ST MRGOpt NK1OptGrp PV1 ST PV2Opt
OBXOptGrp</tt><br>
<tt>         AL1OptGrp DG1OptGrp PR1OptGrp GT1OptGrp InsOptGrp1</tt><br>
<tt>         ACCOpt UB1Opt UB2Opt EOM ;</tt><br>
<tt>a07:   SOM MSH ST EVNA07 ST PID ST MRGOpt NK1OptGrp PV1 ST PV2Opt
OBXOptGrp</tt><br>
<tt>         AL1OptGrp DG1OptGrp PR1OptGrp GT1OptGrp InsOptGrp1</tt><br>
<tt>         ACCOpt UB1Opt UB2Opt EOM ;</tt><br>
<tt>a08:   SOM MSH ST EVNA08 ST PID ST NK1OptGrp PV1 ST PV2Opt
OBXOptGrp</tt><br>
<tt>         AL1OptGrp DG1OptGrp PR1OptGrp GT1OptGrp InsOptGrp1</tt><br>
<tt>         ACCOpt UB1Opt UB2Opt EOM ;</tt><br>
<tt>a09:   SOM MSH ST EVNA09 ST PidGrp DG1OptGrp EOM ;</tt><br>
<tt>a10:   SOM MSH ST EVNA10 ST PidGrp DG1OptGrp EOM ;</tt><br>
<tt>a11:   SOM MSH ST EVNA11 ST PidGrp DG1OptGrp EOM ;</tt><br>
<tt>a12:   SOM MSH ST EVNA12 ST PidGrp DG1OptGrp EOM ;</tt><br>
<tt>a13:   SOM MSH ST EVNA13 ST PID ST NK1OptGrp PV1 ST PV2Opt OBXOptGrp
</tt><br>
<tt>         AL1OptGrp DG1OptGrp PR1OptGrp GT1OptGrp InsOptGrp1</tt><br>
<tt>         ACCOpt UB1Opt UB2Opt EOM ;</tt><br>
<tt>a14:   SOM MSH ST EVNA14 ST PID ST NK1OptGrp PV1 ST PV2Opt OBXOptGrp
</tt><br>
<tt>         AL1OptGrp DG1OptGrp PR1OptGrp GT1OptGrp InsOptGrp1</tt><br>
<tt>         ACCOpt UB1Opt UB2Opt EOM ;</tt><br>
<tt>a15:   SOM MSH ST EVNA15 ST PidGrp DG1OptGrp EOM ;</tt><br>
<tt>a16:   SOM MSH ST EVNA16 ST PidGrp DG1OptGrp EOM ;</tt><br>
<tt>a17:   SOM MSH ST EVNA17 ST PidGrp PidGrp EOM ;</tt><br>
<tt>a18:   SOM MSH ST EVNA18 ST PID ST MRG ST PV1Opt EOM ; </tt><br>
<tt>a19:   SOM MSH ST MSA ST ERROpt QRD ST InfGrp DSCOpt EOM ;</tt><br>
<tt>a20:   SOM MSH ST EVNA20 ST NPU ST EOM  ;</tt><br>
<tt>a21:   SOM MSH ST EVNA21 ST PidGrp EOM ;</tt><br>
<tt>a22:   SOM MSH ST EVNA22 ST PidGrp EOM ;</tt><br>
<tt>a23:   SOM MSH ST EVNA23 ST PidGrp EOM ;</tt><br>
<tt>a24:   SOM MSH ST EVNA24 ST PID ST PV1Opt PID ST EOM  ;</tt><br>
<tt>a25:   SOM MSH ST EVNA25 ST PidGrp EOM ;</tt><br>
<tt>a26:   SOM MSH ST EVNA26 ST PidGrp EOM ;</tt><br>
<tt>a27:   SOM MSH ST EVNA27 ST PID ST NK1OptGrp PV1 ST PV2Opt OBXOptGrp EOM
;</tt><br>
<tt>a28:   SOM MSH ST EVNA28 ST PID ST NK1OptGrp PV1Opt PV2Opt
OBXOptGrp</tt><br>
<tt>         AL1OptGrp DG1OptGrp PR1OptGrp GT1OptGrp InsOptGrp1</tt><br>
<tt>         ACCOpt UB1Opt UB2Opt EOM ;</tt><br>
<tt>a29:   SOM MSH ST EVNA29 ST PID ST PV1Opt PV2Opt OBXOptGrp EOM ;</tt><br>
<tt>a30:   SOM MSH ST EVNA30 ST PID ST MRG ST EOM ; </tt><br>
<tt>a31:   SOM MSH ST EVNA31 ST PID ST NK1OptGrp PV1Opt PV2Opt OBXOptGrp
</tt><br>
<tt>         AL1OptGrp DG1OptGrp PR1OptGrp GT1OptGrp InsOptGrp1</tt><br>
<tt>         ACCOpt UB1Opt UB2Opt EOM ;</tt><br>
<tt>a32:   SOM MSH ST EVNA32 ST PidGrp EOM ;</tt><br>
<tt>a33:   SOM MSH ST EVNA33 ST PidGrp EOM ;</tt><br>
<tt>a34:   SOM MSH ST EVNA34 ST PID ST MRG ST EOM ; </tt><br>
<tt>a35:   SOM MSH ST EVNA35 ST PID ST MRG ST EOM ; </tt><br>
<tt>a36:   SOM MSH ST EVNA36 ST PID ST MRG ST EOM ; </tt><br>
<tt>a37:   SOM MSH ST EVNA37 ST PID ST PV1Opt PID ST PV1Opt EOM ; </tt><br>
<tt>/* Insurance group 1 requires an IN1 segment within a repeating insurance
*/</tt><br>
<tt>/* group while Insurance group 2 allows a repeating IN3 within the group
*/</tt><br>
<tt>/* of a single IN1-IN2 pair
*/</tt><br>
<tt>InsOptGrp1:</tt><br>
<tt>      |  InsGrp1 ;</tt><br>
<tt>InsGrp1: Ins1</tt><br>
<tt>      |  Ins1 InsGrp1 ;</tt><br>
<tt>      </tt><br>
<tt>Ins1:    IN1 ST IN2Opt IN3Opt ;</tt><br>
<tt>InsOptGrp2:</tt><br>
<tt>   |      InsGrp2 ;</tt><br>
<tt>InsGrp2:  Ins2</tt><br>
<tt>   |      Ins2 InsGrp2 ;</tt><br>
<tt>Ins2:     IN1 ST IN2Opt IN3OptGrp ;</tt><br>
<tt>/* Inf is the patient information data that forms each member */</tt><br>
<tt>/*  of a list of patient information segments in response to a query
*/</tt><br>
<tt>InfGrp: Inf </tt><br>
<tt>      | Inf InfGrp ;</tt><br>
<tt>Inf:    EVNA19Opt PID ST NK1OptGrp PV1 ST PV2Opt OBXOptGrp</tt><br>
<tt>	AL1OptGrp DG1OptGrp PR1OptGrp GT1OptGrp InsOptGrp1</tt><br>
<tt>        ACCOpt UB1Opt UB2Opt;</tt><br>
<tt>PidGrp:  PID ST PV1 ST PV2Opt OBXOptGrp ;</tt><br>
<tt>/*  Chapter IV - ORDERS */</tt><br>
<tt>/* ORM - Order message.  */</tt><br>
<tt>orm:      SOM MSH ST NoteOptGrp PidOptClause1 ORCGrp EOM ;</tt><br>
<tt>PidOptClause1:</tt><br>
<tt>   |      PID ST NoteOptGrp AL1OptGrp PV1Opt ;</tt><br>
<tt>ORCGrp:   ORC ST DetailOptClause</tt><br>
<tt>   |      ORC ST DetailOptClause ORCGrp ;</tt><br>
<tt>DetailOptClause:</tt><br>
<tt>   |      OrderSeg OBXDOptGrp BLGOpt ;</tt><br>
<tt>OBXDOptGrp:</tt><br>
<tt>   |      OBXDGrp ;</tt><br>
<tt>OBXDGrp:   OBX ST NoteOptGrp</tt><br>
<tt>   |      OBX ST NoteOptGrp OBXDGrp ;</tt><br>
<tt>OrderSeg: OBR ST NoteOptGrp</tt><br>
<tt>   |      Supplies NoteOptGrp</tt><br>
<tt>   |      ODSGrp NoteOptGrp</tt><br>
<tt>   |      ODTGrp NoteOptGrp ;</tt><br>
<tt>Supplies: RQD ST </tt><br>
<tt>   |	  RQD ST RQ1 ST ;</tt><br>
<tt>/* ORR - Response message.  */</tt><br>
<tt>orr:	Orr1</tt><br>
<tt>   |	Orr2 ;</tt><br>
<tt>Orr1:     SOM MSHorr1 ST MSA ST ERROpt NoteOptGrp PidOptClause2 EOM
;</tt><br>
<tt>Orr2:     SOM MSHorr2 ST MSA ST ERROpt NoteOptGrp RxOptResponse EOM
;</tt><br>
<tt>RxOptResponse: </tt><br>
<tt>   |     RxResponse ;</tt><br>
<tt>RxResponse: PIDOpt PrescriptionGrp ;</tt><br>
<tt>PrescriptionGrp:  ORC ST PrescriptionOpt</tt><br>
<tt>   |        ORC ST PrescriptionOpt PrescriptionGrp ;</tt><br>
<tt>PrescriptionOpt:</tt><br>
<tt>   |        Prescription;</tt><br>
<tt>Prescription:  RXO ST NoteOptGrp RXRGrp ST  RXCNOptGrp ;</tt><br>
<tt>PidOptClause2:</tt><br>
<tt>   |      PIDOpt ORCGrp1 ;</tt><br>
<tt>ORCGrp1:   ORC ST OrderSegOpt</tt><br>
<tt>   |      ORC ST OrderSegOpt ORCGrp1 ;</tt><br>
<tt>OrderSegOpt:</tt><br>
<tt>   |      OrderSeg ;</tt><br>
<tt>/* Pharmacy.
*/</tt><br>
<tt>rxo:     SOM MSH ST NoteOptGrp PidOptClause1 RxOrderGrp EOM ;</tt><br>
<tt>rde:     SOM MSH ST NoteOptGrp PidOptClause1 RxEncOrdGrp EOM ;</tt><br>
<tt>rds:     SOM MSH ST NoteOptGrp PidOptClause1 DispenseGrp EOM ;</tt><br>
<tt>rgv:     SOM MSH ST NoteOptGrp PidOptClause1 RxGiveGrp EOM ;</tt><br>
<tt>ras:     SOM MSH ST NoteOptGrp PidOptClause1 RxAdminGrp EOM ;</tt><br>
<tt>rra:     SOM MSH ST MSA ST ERROpt AdminRptGrp DSCOpt EOM ;</tt><br>
<tt>rrd:     SOM MSH ST MSA ST ERROpt DispenseRptGrp DSCOpt EOM ;</tt><br>
<tt>     </tt><br>
<tt>rre:     SOM MSH ST MSA ST ERROpt RxOrderRptGrp DSCOpt EOM ;</tt><br>
<tt>rrg:     SOM MSH ST MSA ST ERROpt GiveRptGrp DSCOpt EOM ;</tt><br>
<tt>orrRxo:  SOM MSH ST MSA ST ERROpt NoteOptGrp PidOptClause2 PresriptionGrp
EOM ;</tt><br>
<tt>orrRde:  SOM MSH ST MSA ST ERROpt NoteOptGrp PidOptClause2 RxOrdGrp2Opt EOM
;</tt><br>
<tt>orrRds:  SOM MSH ST MSA ST ERROpt NoteOptGrp PidOptClause2 RxdGrpOpt EOM
;</tt><br>
<tt>orrRgv:  SOM MSH ST MSA ST ERROpt NoteOptGrp PidOptClause2 RxgGrpOpt EOM
;</tt><br>
<tt>orrRas:  SOM MSH ST MSA ST ERROpt NoteOptGrp PidOptClause2 RxaGrpOpt EOM
;</tt><br>
<tt>RxAdmin:    ORC ST PrescriptionOpt RxEncOrdOpt RXAGrp RXR ST ;</tt><br>
<tt>RxGive:     ORC ST PrescriptionOpt RxEncOrdOpt RXG ST RXRGrp ST RXCOptGrp
;</tt><br>
<tt>RxEncOrd:   ORC ST PrescriptionOpt RXE ST RXRGrp ST RXCOptGrp ;</tt><br>
<tt>Dispense:   ORC ST PrescriptionOpt RxEncOrdOpt RXD ST RXRGrp ST RXCOptGrp
;</tt><br>
<tt>GiveRpt:    QueryHdr RxOrdGrp4 ;</tt><br>
<tt>AdminRpt:   QueryHdr RxOrdGrp1 ;</tt><br>
<tt>DispenseRpt: QueryHdr RxOrdGrp3 ;</tt><br>
<tt>RxOrderRptGrp: RxOrderRpt</tt><br>
<tt>      |     RxOrderRpt RxOrderRptGrp ;</tt><br>
<tt>RxOrderRpt: QueryHdr RxOrdGrp2 ;</tt><br>
<tt>RxOrdGrp1:  RxOrd1</tt><br>
<tt>      |     RxOrd1 RxOrdGrp1 ;</tt><br>
<tt>RxOrd1:     ORC ST RXE ST RXRGrp ST RXCOptGrp RXAGrp RXR ST;</tt><br>
<tt>RxOrdGrp2:  RxOrd2</tt><br>
<tt>      |     RxOrd2 RxOrdGrp2 ;</tt><br>
<tt>RxOrd2:     ORC ST RXE ST RXRGrp ST RXCOptGrp ;</tt><br>
<tt>RxOrdGrp2Opt: </tt><br>
<tt>     | RxOrdGrp2 RxOrdGrp2Opt ;</tt><br>
<tt>RxOrdGrp3:  RxOrd3</tt><br>
<tt>      |     RxOrd3 RxOrdGrp3 ;</tt><br>
<tt>RxOrd3:     ORC ST RXE ST RXRGrp ST RXCOptGrp RXDGrp RXRGrp ST ;</tt><br>
<tt>RxOrdGrp4:  RxOrd4</tt><br>
<tt>      |     RxOrd4 RxordGrp4 ;</tt><br>
<tt>RxOrd4:     RXE St RXRGrp ST RXCOptGrp RXGGrp RXRGrp ST ;</tt><br>
<tt>RxdGrpOpt:  </tt><br>
<tt>     | OrcRxdGrp RxdGrpOpt ;</tt><br>
<tt>OrcRxdGrp: </tt><br>
<tt>    | ORC ST RxdDsGrp OrcRxdGrp ;</tt><br>
<tt>RxdDsGrp: </tt><br>
<tt>   | RXD RXRGrp RXCOptGrp RxdDsGrp ;</tt><br>
<tt>RxgGrpOpt:  </tt><br>
<tt>     | OrcRxgGrp RxgGrpOpt ;</tt><br>
<tt>OrcRxgGrp: </tt><br>
<tt>    | ORC ST RxgGvGrp OrcRxgGrp ;</tt><br>
<tt>RxgGvGrp: </tt><br>
<tt>   | RXG RXRGrp RXCOptGrp RxgGvGrp ;</tt><br>
<tt>RxaGrpOpt:  </tt><br>
<tt>     | OrcRxaGrp RxaGrpOpt ;</tt><br>
<tt>OrcRxaGrp: </tt><br>
<tt>    | ORC ST RxaRaGrp OrcRxaGrp ;</tt><br>
<tt>RxaRaGrp: </tt><br>
<tt>   | RXA RXR RxaRaGrp ;</tt><br>
<tt>GiveRptGrp:    GiveRpt</tt><br>
<tt>      |    GiveRpt GiveRptGrp ;</tt><br>
<tt>AdminRptGrp:   AdminRpt</tt><br>
<tt>      |     AdminRpt AdminRptGrp ;</tt><br>
<tt>DispenseRptGrp:   DispenseRpt</tt><br>
<tt>      |     DispenseRpt DispenseRptGrp ;</tt><br>
<tt>DispenseGrp:   Dispense</tt><br>
<tt>   |     Dispense DispenseGrp ;</tt><br>
<tt>RxAdminGrp: RxAdmin</tt><br>
<tt>   |     RxAdmin RxAdminGrp ;</tt><br>
<tt>RxOrderGrp: RxOrder</tt><br>
<tt>   |     RxOrder RxOrderGrp ;</tt><br>
<tt>RxOrder:   ORC ST Prescription OBXDOptGrp BLGOpt ;</tt><br>
<tt>RxGiveGrp:  RxGive</tt><br>
<tt>   |     RxGive RxGiveGrp ;</tt><br>
<tt>RxEncOrdGrp: RxEncOrd</tt><br>
<tt>   |     RxEncOrd RxEncOrdGrp ;</tt><br>
<tt>RxEncOrdOpt:</tt><br>
<tt>   |     RxEncOrd ;</tt><br>
<tt>/* Chapter VI - Finance */</tt><br>
<tt>/* Finance: Patient accounting.  The triggering events that follow are
*/</tt><br>
<tt>/* served by the DFT, BAR and ACK messages.
*/</tt><br>
<tt>bar:      p01   /* Add and update patient account.        */</tt><br>
<tt>   |      p02 ; /* Purge patient account.        */</tt><br>
<tt>dft:      p03 ; /* Post detail financial transaction.     */</tt><br>
<tt>p01:      SOM MSH ST EVNP01 ST PID ST BillingGrp EOM ; </tt><br>
<tt>BillingGrp:   Billing</tt><br>
<tt>   |      Billing BillingGrp ;</tt><br>
<tt>Billing:  PV1Opt PV2Opt OBXOptGrp AL1OptGrp DG1OptGrp PR1OptGrp</tt><br>
<tt>            GT1OptGrp NK1OptGrp InsOptGrp2 ACCOpt UB1Opt UB2Opt ;</tt><br>
<tt>p02:      SOM MSH ST EVNP02 ST VisitGrp EOM ; </tt><br>
<tt>VisitGrp: Visit</tt><br>
<tt>   |      Visit VisitGrp ;</tt><br>
<tt>Visit:    PID ST PV1Opt PV2Opt OBXOptGrp ;</tt><br>
<tt>p03:      SOM MSH ST EVNP03 ST PID ST PV1Opt PV2Opt1 OBXOptGrp FT1Grp EOM
;</tt><br>
<tt>FT1Grp:   FT1 ST</tt><br>
<tt>   |      FT1 ST FT1Grp ;</tt><br>
<tt>/* Chapter VII - Ancillary Reporting */</tt><br>
<tt>/* Ancillary Data Reporting.  */</tt><br>
<tt>oru:      SOM MSH ST  PidOptClause3 ObserveGrp DSCOpt EOM ;</tt><br>
<tt>orf:   SOM MSH ST MSA ST ERROpt QueryHdr ObserveGrp DSCOpt EOM ;</tt><br>
<tt>PidOptClause3:</tt><br>
<tt>   |      PID ST NoteOptGrp PV1Opt ;</tt><br>
<tt>ObserveGrp: Observe</tt><br>
<tt>   |      Observe ObserveGrp ;</tt><br>
<tt>Observe:  ORCOpt OBR ST NoteOptGrp OBXDGRPOpt  ;</tt><br>
<tt>/* Master Files Messages...see note below... the segment level definition
for the MFSGrp will vary according to the master file entry being referenced in
the MFI segment... hence a BNF form will need to be generated for each master
file ...  */</tt><br>
<tt>mfn: SOM MSH ST MFI ST MFEGrp EOM ;</tt><br>
<tt>MFEGrp: MFE ST MFSGrpOpt</tt><br>
<tt>   |      MFE ST MFSGrpOpt MFEGrp ;</tt><br>
<tt>MFSGrpOpt:</tt><br>
<tt>   | MFSGrp ;</tt><br>
<tt>MFSGrp: XXX ST</tt><br>
<tt>   | XXX ST MFSGrp ;</tt><br>
<tt>/* XXX is then one or more HL7 and/or Z-segments carrying the data for the
entry identified by the MFI segment. */</tt><br>
<tt>/* Master File Delayed Acknowledgment
*/</tt><br>
<tt>mfd:	  SOM MSH ST MFI ST MFAOptGrp EOM ;</tt><br>
<tt>MFAOptGrp:</tt><br>
<tt>   |	 MFAGrp ;</tt><br>
<tt>MFAGrp:	 MFA ST</tt><br>
<tt>   |	 MFA ST MFAGrp ;</tt><br>
<tt>/* Response to Master Files Query */</tt><br>
<tt>mfr:   SOM MSH ST MSA ST ERROpt QRD ST QRFOpt MFI ST MFEGrp EOM ;</tt><br>
<tt>/* The segment level definition for the MFSGrp will vary according to the
master file being referenced by the MFI segment... hence a BNF form will need
to be generated for each master file...  */</tt><br>
<tt>/* This is the end of the message definition section  */</tt><br>
<tt>/* The following are sets of segment options and groups needed above.
*/</tt><br>
<tt>ACCOpt:</tt><br>
<tt>   |     ACC ST ;</tt><br>
<tt>BLGOpt:</tt><br>
<tt>   |	 BLG ST ;</tt><br>
<tt>ERROpt:</tt><br>
<tt>   |	 ERR ST ;</tt><br>
<tt>AL1OptGrp:</tt><br>
<tt>   |     AL1 ST</tt><br>
<tt>   |     AL1 ST AL1Grp ;</tt><br>
<tt>AL1Grp:  AL1 ST</tt><br>
<tt>   |     AL1 ST AL1Grp ;</tt><br>
<tt>DSCOpt:</tt><br>
<tt>   |      DSC ST ;</tt><br>
<tt>DG1Grp:  DG1 ST</tt><br>
<tt>   |     DG1 ST DG1Grp ;</tt><br>
<tt>DG1OptGrp:</tt><br>
<tt>   |     DG1 ST</tt><br>
<tt>   |     DG1 ST DG1Grp ;</tt><br>
<tt>EVNOpt:</tt><br>
<tt>   |     EVN ST ;</tt><br>
<tt>EVNA19Opt:</tt><br>
<tt>   |	 EVNA19 ST ;</tt><br>
<tt>GT1OptGrp:</tt><br>
<tt>   |     GT1 ST</tt><br>
<tt>   |     GT1 ST GT1Grp ;</tt><br>
<tt>GT1Grp:  GT1 ST</tt><br>
<tt>   |     GT1 ST GT1Grp ;</tt><br>
<tt>IN2Opt:</tt><br>
<tt>   |     IN2 ST ;</tt><br>
<tt>IN3Opt:</tt><br>
<tt>   |     IN3 ST ;</tt><br>
<tt>IN3OptGrp:</tt><br>
<tt>   |     IN3Grp ;</tt><br>
<tt>IN3Grp:  IN3 ST</tt><br>
<tt>   |     IN3 ST IN3Grp ;</tt><br>
<tt>MRGOpt:</tt><br>
<tt>   |     MRG ST ;</tt><br>
<tt>NK1OptGrp:</tt><br>
<tt>   |     NK1 ST</tt><br>
<tt>   |     NK1 ST NK1Grp ;</tt><br>
<tt>NK1Grp:  NK1 ST</tt><br>
<tt>   |     NK1 ST NK1Grp ;</tt><br>
<tt>OBXOptGrp:</tt><br>
<tt>   |     OBXGrp ;</tt><br>
<tt>OBXGrp:  OBX ST</tt><br>
<tt>   |     OBX ST OBXGrp ;</tt><br>
<tt>ODSGrp:  ODS ST</tt><br>
<tt>   |     ODS ST ODSGrp ;</tt><br>
<tt>ODTGrp:  ODT ST</tt><br>
<tt>   |     ODT ST ODTGrp ;</tt><br>
<tt>ORCOpt:</tt><br>
<tt>   |     ORC ST ;</tt><br>
<tt>PIDOpt:</tt><br>
<tt>   |     PID ST NoteOptGrp ;</tt><br>
<tt>PR1OptGrp:</tt><br>
<tt>   |     PR1 ST</tt><br>
<tt>   |     PR1 ST PR1Grp ;</tt><br>
<tt>PR1Grp:  PR1 ST</tt><br>
<tt>   |     PR1 ST PR1Grp ;</tt><br>
<tt>PV1Opt:</tt><br>
<tt>   |     PV1 ST ;</tt><br>
<tt>PV2Opt:</tt><br>
<tt>   |     PV2 ST ;</tt><br>
<tt>UB1Opt:</tt><br>
<tt>   |	 UB1 ST ;</tt><br>
<tt>UB2Opt:</tt><br>
<tt>   |	 UB2 ST ;</tt><br>
<tt>QRFOpt:  QRF ST</tt><br>
<tt>   |     QRF ST QRFOpt ;</tt><br>
<tt>RXAGrp:  RXA ST</tt><br>
<tt>   |     RXA ST RXAGrp ;</tt><br>
<tt>RXDGrp:  RXD ST</tt><br>
<tt>   |     RXD ST RXDGrp ;</tt><br>
<tt>RXGGrp:  RXG ST</tt><br>
<tt>   |     RXG ST RXGGrp ;</tt><br>
<tt>RXCOpt:</tt><br>
<tt>   |     RXC ST ;</tt><br>
<tt>RXCOptGrp:</tt><br>
<tt>   |     RXCGrp ;</tt><br>
<tt>RXCGrp:  RXC ST </tt><br>
<tt>   |     RXC ST RXCGrp ;</tt><br>
<tt>RXCNOptGrp:</tt><br>
<tt>   |     RXCNGrp ;</tt><br>
<tt>RXCNGrp:  RXC ST NoteOptGrp</tt><br>
<tt>   |     RXC ST NoteOptGrp RXCNGrp ;</tt><br>
<tt>RXRGrp:  RXR ST</tt><br>
<tt>   |     RXR ST RXRGrp ;</tt><br>
<tt>URSOpt:</tt><br>
<tt>   |     URS ST ;
</tt></p>
</body></html>
